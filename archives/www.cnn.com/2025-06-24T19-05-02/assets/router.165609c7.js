const BASE_URL="https://www.cnn.com";class Router{constructor(){this.bindedAnchorClick=this.onAnchorClick.bind(this),window.addEventListener("popstate",this.onPopState.bind(this)),this.addListeners(),history.replaceState(location.pathname,null,location.pathname)}onPopState(t){t&&t.state&&this.fetch(t.state)}get anchors(){return document.querySelectorAll("a")}addListeners(){this.removeListeners(),this.anchors.forEach((t=>{t.addEventListener("click",this.bindedAnchorClick)}))}removeListeners(){this.anchors.forEach((t=>{t.removeEventListener("click",this.bindedAnchorClick)}))}get fetchCount(){return this._fetchCount||0}set fetchCount(t){this._fetchCount=t}get mainEl(){return this._mainEl||(this._mainEl=document.querySelector("#main")),this._mainEl}get loaderEl(){return this._loaderEl||(this._loaderEl=document.querySelector("#loader")),this._loaderEl}get leftNavEl(){return this._leftNavEl||(this._leftNavEl=document.querySelector("left-nav")),this._leftNavEl}get menuIcon(){return this._menuIcon||(this._menuIcon=document.querySelector("menu-icon-wc")),this._menuIcon}get canonicalLink(){return this._canonicalLink||(this._canonicalLink=document.querySelector('link[rel="canonical"]')),this._canonicalLink}get title(){const t=document.querySelector(".title-description .title");return t&&t.dataset.title?t.dataset.title:"CNN Podcasts - Podcasts and News Briefs from CNN and CNN EspaÃ±ol"}onAnchorClick(t){try{if("_blank"!==t.currentTarget.getAttribute("target")){t.preventDefault();const e=t.currentTarget.getAttribute("href").split("#");history.pushState(e[0],null,e[0]),this.fetch(e[0])}}catch(t){console.error(t)}return!1}async fetch(t){try{this.renderLoading(),this.fetchCount+=1;const e=this.fetchCount,n=await fetch(`${t}${"/audio"===t?"/":"."}fragment`);if(200===n.status){const i=await n.text();if(e===this.fetchCount){this.render(i,t),this.canonicalLink.setAttribute("href",`${BASE_URL}${t}`);const e=new CustomEvent("CNN:PageView");window.dispatchEvent(e)}else setTimeout((()=>{location.href=t}),1e4)}else location.href=t}catch(e){console.error(e),location.href=t}}renderLoading(){this.loaderEl.classList.add("show"),this.leftNavEl.classList.remove("show"),this.menuIcon.classList.remove("close")}render(t,e){this.mainEl.innerHTML=t,this.mainEl.scrollIntoView(!0),this.loaderEl.classList.remove("show"),this.addListeners(),pSUPERFLY.virtualPage({sections:"audio",authors:"",path:e,title:this.title})}}window.addEventListener("load",(t=>{new Router}));