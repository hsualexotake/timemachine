"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9884],{88643:(e,t,r)=>{r.d(t,{P:()=>we});var n,o=r(63696),i=r(78325),a=r(89958),l=r(35289),s=r(16061),c=r(74437),u=r(468),d=r(27336),p=r(95584),h=r(2391),g=r(91785),v=r(66510),m=r(10737),f=r(20641),b=r(11545),y=r(27813),x=r(59310),w=r(55522),P=r(63548),j=r(62540),S=(0,a.default)("div",{target:"e8ajwjv5",label:"StyledPanel"})("display:block;",(e=>{var{expanded:t}=e;return t&&"position: relative"}),";html.no-js &{display:none;}"),T=(0,a.default)("div",{target:"e8ajwjv4",label:"StyledPanelContent"})(f.tc," ",b.K1," ",(e=>{var{hidden:t}=e;return!t&&"display: flex"}),";",(e=>{var{theme:t,hasError:r}=e;return(e=>{var t,r,{theme:o,hasError:i}=e,a=i?o.colourPalette.states.errorText:o.colourPalette.border;return(0,g.AH)(n||(t=["\n    background-color: ",";\n    color: ",";\n    border: "," solid ",";\n  "],r||(r=t.slice(0)),n=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))),i?o.colourPalette.background:o.colourPalette.midground,o.colourPalette.primary,(0,u.A)(1),a)})({theme:t,hasError:r})}),";",(e=>{var{verticalAlignment:t}=e;return"top"===t?"bottom: calc(100% + ".concat(c.SPACING_6,")"):"top: calc(100% + ".concat(c.SPACING_6,")")}),";",(e=>{var{horizontalAlignment:t}=e;return"left"===t&&"left: 0"}),";",(e=>{var{horizontalAlignment:t}=e;return"right"===t&&"right: 0"}),";",(e=>{var{horizontalAlignment:t}=e;return"centre"===t&&"left: 50%; transform: translateX(-50%)"}),";width:",(e=>{var{width:t}=e;return t||"15rem"}),";&::before,&::after{content:'';display:inline-block;position:absolute;",(e=>{var{verticalAlignment:t}=e;return"top"===t?"clip-path: polygon(0 0, 50% 100%, 100% 0) ":"clip-path: polygon(0 100%, 50% 0, 100% 100%)"}),";width:",(0,u.A)(16),";height:",(0,u.A)(12),";",(e=>{var{horizontalAlignment:t}=e;return"left"===t&&"left: ".concat(c.SPACING_4)}),";",(e=>{var{horizontalAlignment:t}=e;return"right"===t&&"right: ".concat(c.SPACING_4)}),";",(e=>{var{horizontalAlignment:t}=e;return"centre"===t&&"left: calc(50% - ".concat(c.SPACING_2,")")}),";}background:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";"),k=(0,a.default)("div",{target:"e8ajwjv3",label:"PanelWrapper"})("padding:",c.SPACING_3,";",(e=>{var{hideTitle:t}=e;return t?"display: inline-block":"display: block"}),";"),O=(0,a.default)("div",{target:"e8ajwjv2",label:"StyledTitleArea"})(f.NP," ",b.Vk,";padding-bottom:",c.SPACING_4,";",(e=>{var{hideTitle:t}=e;return t&&x.A.styles})," white-space:pre-line;",(e=>{var{theme:t,hasError:r}=e;return r&&"color: ".concat(t.colourPalette.states.errorText)}),";"),A=(0,a.default)("div",{target:"e8ajwjv1",label:"IconWrapper"})("align-self:flex-start;width:1em;padding-left:",c.SPACING_3,";padding-top:",c.SPACING_3,";min-width:",(0,u.A)(20),";",(e=>{var{theme:t,hasError:r}=e;return r&&"color: ".concat(t.colourPalette.states.errorText)}),";"),E=(0,a.default)("div",{target:"e8ajwjv0",label:"CloseButtonWrapper"})("float:right;",(e=>{var{hideTitle:t}=e;return!t&&"margin-left: ".concat(c.SPACING_3,";")}),";"),C=e=>{var{theme:t,children:r}=e;return t?(0,j.jsx)(y.a,{theme:t,children:r}):r};const I=e=>{var{id:t,panelTitle:r,panelTheme:n,panelIcon:i,panelMaxWidthPx:a,panelStateCallback:l,horizontalAlignment:s="left",verticalAlignment:c="bottom",expanded:u=!1,panelText:h="",hasError:g=!1,showCloseButton:v=!1,children:m,tracking:f={}}=e,b=(0,o.useRef)(null),y=(0,o.useRef)(null),[x,I]=(0,o.useState)({expanded:Boolean(u),shiftFocus:!1}),D=e=>{null==e||e.preventDefault(),I({expanded:!x.expanded,shiftFocus:!0})},N=(0,o.useRef)(!0);(0,o.useEffect)((()=>{N.current?N.current=!1:I({expanded:Boolean(u),shiftFocus:Boolean(u)})}),[u]),(0,o.useEffect)((()=>{"function"==typeof l&&l(x.expanded)}),[x,l]);var{groupName:L,groupType:R,groupPosition:H}=f,_=(e=>{var{groupName:t,groupType:r,groupPosition:n,resourceId:o}=e;return(0,P.D9)({groupName:t,groupType:r,groupPosition:n,itemName:"error panel close",itemType:"quick actions menu",headline:"close",topicId:o,experienceResourceId:o})})({groupName:L,groupType:R,groupPosition:H});return(0,j.jsx)(S,{expanded:x.expanded,ref:b,id:t,"data-testid":"panel",children:(0,j.jsx)(C,{theme:n,children:(0,j.jsxs)(T,{hidden:!x.expanded,role:"group",horizontalAlignment:s,verticalAlignment:c,ref:y,width:a,"data-testid":"panel-content",hasError:g,"aria-labelledby":g?"":t,children:[i&&(0,j.jsx)(A,{"data-testid":i,hasError:g,children:(0,j.jsx)(w.A,{type:i})}),(0,j.jsxs)("div",{children:[v&&(0,j.jsx)(p.C,{tracking:_,children:e=>{var{trackRef:t}=e;return(0,j.jsx)(E,{children:(0,j.jsx)(d.A,{emphasis:"low",iconOnly:"true",iconType:"actions:close",onClick:D,cornerFit:!0,children:" ",trackRef:t})})}}),(0,j.jsxs)(k,{hideTitle:!r,children:[(0,j.jsx)(O,{hideTitle:!r,hasError:g,children:r}),h?(0,j.jsx)("p",{"data-testid":g?"error-message":"panel-text",children:h}):m]})]})]})})})};var D=r(61246),N=(0,a.default)("span",{target:"eduo6dj2",label:"IconWrapper"})("display:inline-block;width:16px;height:16px;padding-right:",c.SPACING_2,";min-width:",(0,u.A)(20),";vertical-align:-2px;"),L=(0,a.default)("div",{target:"eduo6dj1",label:"ServiceStyledDiv"})(f.NP," ",b.Vk," ",D.Dx," margin-top:",(e=>{var{reasonShown:t}=e;return t?"0px":"16px"}),";margin-bottom:",(e=>{var{reasonShown:t}=e;return t?"16px":"0px"}),";color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";padding:11px 12px;"),R=(0,a.default)("a",{target:"eduo6dj0",label:"ServiceLinkStyledA"})("&:link{color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";}&:visited{color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";}&:any-link{",f.jG," text-decoration:underline;text-decoration-color:",(e=>{var{theme:t}=e;return t.colourPalette.border}),";text-decoration-thickness:1px;text-decoration-skip-ink:none;text-underline-offset:0.25em;&:hover,&:focus{text-decoration-color:currentcolor;text-decoration-thickness:2px;color:",(e=>{var{theme:t}=e;return t.colourPalette.hyperlink}),";}}");const H=e=>{var{itemUrl:t,service:r,reasonShown:n}=e,o=(e=>{var{service:t}=e;return{sounds:{text:"Go to My Sounds"},iplayer:{text:"Go to Watchlist"}}[t]})({service:r});if(!r)return null;var i="service-identifiers:".concat(r);return(0,j.jsxs)(L,{reasonShown:n,children:[(0,j.jsx)(N,{"data-testid":i,tabIndex:"-1","aria-hidden":"true",children:(0,j.jsx)(w.A,{type:i,children:null==o?void 0:o.text})}),(0,j.jsx)(R,{href:t[r],children:null==o?void 0:o.text})]})};var _=r(14810),W={iplayer:"iPlayer Watchlist",sounds:"My Sounds"},M={iplayer:e=>({success:"".concat(e," has been added to your "),enabled:"".concat(e," has been removed from your ")}),sounds:e=>({success:"".concat(e," has been added to "),enabled:"".concat(e," has been removed from ")})},B=e=>{var{state:t,title:r,service:n,urls:o}=e;return["enabled","success"].includes(t)&&["iplayer","sounds"].includes(n)?(0,j.jsxs)("p",{"data-testid":"panel-content-paragraph",children:[M[n](r)[t],(0,j.jsx)(_.A,{url:o[n],isExternal:!0,children:W[n]})]}):(0,j.jsx)("div",{})};function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U,q=(0,a.default)("div",{target:"e1pi4ty97",label:"ModalWrapper"})("outline:none;user-select:none;width:",(e=>{var{$width:t}=e;return t||"0px"}),";align-self:flex-end;z-index:",s.o.MEDIA_CONTAINER,";@media (max-width: ",l.js,"){width:100%;}"),V=e=>{var t,r,{theme:n}=e;return(0,g.AH)(U||(t=["\n    border-top: "," solid ",";\n  "],r||(r=t.slice(0)),U=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))),(0,u.A)(1),n.colourPalette.divider)},Q=(0,a.default)("div",{target:"e1pi4ty96",label:"UasButtonWrapper"})("padding:",c.SPACING_4," 0 ",(e=>{var{showPanel:t,reasonShown:r}=e;return(e=>{var{showPanel:t,reasonShown:r}=e;return t?c.SPACING_2:r?c.SPACING_4:0})({showPanel:t,reasonShown:r})})," 0;margin:0 0 0 0;min-height:",(e=>{var{minHeight:t}=e;return t||"auto"}),";",(e=>{var{theme:t}=e;return V({theme:t})}),";"),K=(0,a.default)("div",{target:"e1pi4ty95",label:"QuickUserActionsMenuTitleArea"})(f.tc," ",b.cx,";padding-bottom:",c.SPACING_4,";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:",(0,u.A)(297),";color:",(e=>{var{theme:t}=e;return t.colourPalette.secondary}),";@media (max-width: ",l.js,"){",b.cx,";}"),$=(0,a.default)("div",{target:"e1pi4ty94",label:"CloseButtonWrapper"})("position:absolute;right:",(0,u.A)(-6),";top:",(0,u.A)(-6),";padding:",(0,u.A)(6),";margin-left:",c.SPACING_3,";"),Y=(0,a.default)("div",{target:"e1pi4ty93",label:"PanelWrapper"})("padding-top:0;padding-bottom:",(e=>{var{reasonShown:t}=e;return t?c.SPACING_4:0}),";"),X=(0,a.default)("div",{target:"e1pi4ty92",label:"ServiceLinkWrapper"})({name:"1pndkbx",styles:"color:'inherit'"}),J=(0,a.default)("div",{target:"e1pi4ty91",label:"ReasonShownWrapper"})((e=>{var{theme:t,reasonShown:r}=e;return r&&V({theme:t})}),";"),Z=(0,a.default)("span",{target:"e1pi4ty90",label:"RecommendationsHistoryWrapper"})(f.NP,"@media (max-width: ",l.js,"){",b.B3,";}"),ee={iplayer:"https://www.bbc.co.uk/iplayer/watchlist",sounds:"https://www.bbc.co.uk/sounds/my/subscribed"},te="We know this is annoying, but we are working on it.",re=(e,t)=>e?"Sorry, this isnâ€™t working right now":t?"Sorry, something went wrong":null;const ne=e=>{var{title:t,closeButton:r,service:n,minHeight:i,personalisedActions:a,setPersonalisedActionsState:l,width:s,tracking:c}=e,[g,f]=(0,o.useState)(!1),[b,y]=(0,o.useState)(!1),[x,w]=(0,o.useState)(!1),[S,T]=(0,o.useState)({}),[k,O]=(0,o.useState)(""),A=(0,o.useRef)(),E=(0,o.useRef)(),C=(0,o.useRef)(),D=((e,t)=>{var r={sounds:{enabled:{text:"Subscribe",iconType:"content-types:podcast-filled",emphasis:"low",visuallyHiddenText:" to ".concat(t)},enabledHover:{text:"Subscribe",iconType:"content-types:podcast-filled",emphasis:"low",visuallyHiddenText:" to ".concat(t)},enabledActive:{text:"Subscribing",iconType:"playback-avkx:loading",emphasis:"high",visuallyHiddenText:" to ".concat(t)},success:{text:"Subscribed",iconType:"actions:confirm",emphasis:"high",visuallyHiddenText:" to ".concat(t),trackingText:"Unsubscribe"},successHover:{text:"Unsubscribe",iconType:"actions:close",emphasis:"high",visuallyHiddenText:" to ".concat(t)},successActive:{text:"Unsubscribing",iconType:"playback-avkx:loading",emphasis:"high",visuallyHiddenText:" to ".concat(t)}},iplayer:{enabled:{text:"Watchlist",iconType:"actions:add-alt",emphasis:"low",visuallyHiddenText:" to ".concat(t),accessibleText:"Add ".concat(t," to Watchlist")},enabledHover:{text:"Watchlist",iconType:"actions:add-alt",emphasis:"low",visuallyHiddenText:" to ".concat(t)},enabledActive:{text:"Adding",iconType:"playback-avkx:loading",emphasis:"high",visuallyHiddenText:" ".concat(t)},success:{text:"Watchlist",iconType:"actions:confirm",emphasis:"high",visuallyHiddenText:" to ".concat(t),trackingText:"Remove",accessibleText:"Remove ".concat(t," from Watchlist")},successHover:{text:"Remove",iconType:"actions:close",emphasis:"high",visuallyHiddenText:" to ".concat(t)},successActive:{text:"Removing",iconType:"playback-avkx:loading",emphasis:"high",visuallyHiddenText:" ".concat(t)}},default:{enabled:{text:"Subscribe",iconType:"content-types:podcast-filled",emphasis:"low",visuallyHiddenText:" to ".concat(t)},enabledHover:{text:"Subscribe",iconType:"content-types:podcast-filled",emphasis:"low",visuallyHiddenText:" to ".concat(t)},enabledActive:{text:"Subscribing",iconType:"playback-avkx:loading",emphasis:"low",visuallyHiddenText:" to ".concat(t)},success:{text:"Subscribed",iconType:"actions:confirm",emphasis:"low",visuallyHiddenText:" to ".concat(t)},successHover:{text:"Unsubscribe",iconType:"actions:close",emphasis:"low",visuallyHiddenText:" to ".concat(t)},successActive:{text:"Unsubscribing",iconType:"playback-avkx:loading",emphasis:"low",visuallyHiddenText:" to ".concat(t)}}};return r[e]?r[e]:r.default})(n,t),{env:N}=(0,m.i3)(),{resourceType:L,resourceDomain:R,reasonShown:_,tleoId:F,isProgrammeError:G,isActivityError:U,isSupportedUserActionsError:V,isTypeError:ne}=a,oe=G||U||V||ne||b,{groupName:ie,groupType:ae,groupPosition:le,groupItemCount:se}=c,ce=(e=>{var{groupName:t,groupType:r,groupPosition:n,groupItemCount:o,resourceId:i,showError:a,itemUrl:l,itemText:s}=e;return(0,P.D9)({groupName:t,groupType:r,groupPosition:n,groupItemCount:o,itemName:a?"error panel":"success panel",itemType:"quick actions menu",itemUrl:l,headline:s,itemPosition:0,topicId:i,experienceResourceId:i})})({groupName:ie,groupType:ae,groupPosition:le,groupItemCount:se,resourceId:F,showError:oe,itemUrl:ee[n],itemText:k}),ue=(e=>{var{groupName:t,groupType:r,groupPosition:n,groupItemCount:o,resourceId:i}=e;return(0,P.D9)({groupName:t,groupType:r,groupPosition:n,groupItemCount:o,itemName:"quick actions menu close",itemType:"quick actions menu",headline:"close",topicId:i,experienceResourceId:i})})({groupName:ie,groupType:ae,groupPosition:le,groupItemCount:se,resourceId:F}),de=(e=>{var{groupName:t,groupType:r,groupPosition:n,resourceId:o}=e;return{group:{name:t,type:r,position:n+1},item:{name:"uas button",type:"quick actions menu",topic_id:o},experience:{resource_id:o}}})({groupName:ie,groupType:ae,groupPosition:le,resourceId:F}),[pe,he]=(e=>{if(!e)return["",""];var t=null==e?void 0:e.split(" ");if(t.length<3)return[""];var r=t.splice(-2);return[t.join(" "),r.join(" ")]})(_),ge={resourceType:L,resourceDomain:R,resourceId:F,activityType:"follows"},ve={deleteOnSuccess:!0,deletePreviousAction:"follow",globalId:"urn:bbc:".concat(R,":").concat(L,":").concat(F)};(0,o.useEffect)((()=>{oe&&(T(te),O(te)),y(oe),f(oe)}),[oe]);var me=e=>{var r;w(!1),y(!1),f(!0),"success"===e&&(r=!0,((e,t)=>{e(z(z({},t),{},{isFollowing:!0}))})(l,a)),"enabled"===e&&(r=!1,((e,t)=>{e(z(z({},t),{},{isFollowing:!1}))})(l,a)),document.dispatchEvent(new CustomEvent(null==a?void 0:a.tleoId,{detail:{isFollowing:r}})),T(B({state:e,service:n,title:t,urls:ee})),O((e=>{var{state:t,title:r,service:n}=e;return"".concat(M[n](r)[t]).concat(W[n])})({state:e,service:n,title:t}))},fe=(e=>function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||e(!1)})(f),be=()=>{var e=(()=>{var e,t,r=!1;return"undefined"!=typeof window&&(r="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||(null===(e=(t=window).matchMedia)||void 0===e||null===(e=e.call(t,"(pointer: coarse)"))||void 0===e?void 0:e.matches)||/iphone|ipad|ipod|android|webos|blackberry|iemobile|opera mini|mobile|tablet/.test(navigator.userAgent.toLowerCase())),r})(),t=window.innerWidth,r=!0;return e&&t<900&&(r=!1),!e&&t<600&&(r=!1),r};return(0,o.useEffect)((()=>{var e=C.current.firstChild;setTimeout((()=>{e.focus()}),0);var t=t=>{var n=!1,o="Tab"===t.key,i=t.shiftKey,a=t.target===e;if(o){var l,s=null===(l=E.current)||void 0===l?void 0:l.children[E.current.children.length-2];i?a&&(t.preventDefault(),(n=be())||Array.from(null==s?void 0:s.querySelectorAll("input, button, a, [tabindex]")).find((e=>-1!==e.tabIndex)).focus()):(e=>{for(var{childElement:t,parentElement:r,maxSearchLevels:n=7}=e,o=t,i=0;o&&i<n;){if(o===r)return!0;o=o.parentElement,i+=1}return!1})({childElement:t.target,parentElement:s,maxSearchLevels:7})&&(t.preventDefault(),(n=be())||e.focus())}n&&r(t)};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[]),(0,j.jsxs)(q,{$width:s,children:[(0,j.jsx)(p.C,{tracking:ue,children:e=>{var{trackRef:t}=e;return(0,j.jsx)($,{ref:C,children:(0,j.jsx)(d.A,{width:"content-length",emphasis:"low",iconType:"actions:close",iconPosition:"end",iconOnly:"true",name:"quick-user-actions-menu-close","data-testid":"quick-user-actions-menu-close-button",onClick:r,cornerFit:!0,trackRef:t,tabIndex:0,children:"close quick actions menu"})})}}),(0,j.jsx)(K,{id:"menu-title","aria-hidden":!0,children:t}),(0,j.jsx)(Q,{"data-testid":"uasButtonWrapperId",ref:A,minHeight:i,reasonShown:_,showPanel:g,children:(0,j.jsx)(h.A,{states:D,initialState:null!=a&&a.isFollowing?"success":"enabled",activityConfig:ge,deleteActivityConfig:ve,env:N,useFullWidth:!0,alignContent:"start",useThemeStyles:!0,getPanelContent:B,hideTitle:!0,disabled:U,cornerFit:!0,showInformationPanel:!1,onEnabled:me,onSuccess:me,uasErrorCallback:()=>{w(!0),f(!0),y(!0),T("Check your connection, refresh the page and try again."),O("Check your connection, refresh the page and try again.")},tracking:de,onActive:()=>{f(!1)}})}),g&&(0,j.jsx)(p.C,{tracking:ce,trackClicks:!1,trackView:!0,children:e=>{var{trackRef:t}=e;return(0,j.jsx)(Y,{ref:t,reasonShown:_,children:(0,j.jsx)(I,{hasError:b,panelMaxWidthPx:s?"calc(100% - 1px)":(0,u.A)(336),panelText:S,panelTitle:b&&re(oe,x),panelIcon:b&&"labels:warning",id:b?"error-panel-left":"panel-left",expanded:!0,showCloseButton:x,panelStateCallback:fe,tracking:c})})}}),(0,j.jsxs)(X,{"data-testid":"serviceLinkWrapperId",ref:E,children:[(0,j.jsx)(H,{service:n,itemUrl:ee,reasonShown:_,tabindex:"0"}),(0,j.jsx)("button",{"data-testid":"hiddenFocusTrapStyledButtonId",type:"button",tabIndex:"0",style:{position:"absolute",width:"1px",height:"1px",opacity:"0",overflow:"hidden"},onFocus:e=>{var t;null===(t=C.current)||void 0===t||null===(t=t.firstChild)||void 0===t||t.focus(),be()&&r(e)},children:"Focusable Trap will set focus to Close button and get past end of group issue. Had to do this as firefox wouldnt work when I used styled button"})]}),_&&(0,j.jsx)(J,{reasonShown:_,children:(0,j.jsxs)(v.A,{type:"status",hasBackground:!1,isQuickUserActionsMenuInfo:!0,children:[pe,(0,j.jsxs)(Z,{children:[" ",he]})]})})]})};function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var le=(e,t)=>{var r={calcLeft:5,calcBottom:10};return t?e<l.R4?ie({touchModalDesignSmall:!0},r):ie({touchModalDesignLarge:!0},r):e<l._G?ie({nonTouchModalDesignSmall:!0},r):ie({nonTouchModalDesignLarge:!0},r)};const se=e=>{var t,r,n,o,i,a,{isRenderedState:l,element:s,modalElement:c}=e;if(l){var{touchModalDesignSmall:d,nonTouchModalDesignSmall:p,isIdealPositionDesign:h,isLeftHorizOverflowDesign:g,isVerticalOverflowDesign:v,isRightHorizVertOverflowDeisgn:m,carouselWidth:f,leftEdgeFromRight:b,topEdgeFromBottom:y,yPosition:x,xPosition:w,widthOfElement:P}=(e=>{var t,r,{element:n,modalElement:o}=e,i=window.innerWidth,a=window.innerHeight,l="ontouchstart"in window||navigator.maxTouchPoints>0,s=le(i,l),c=Object.keys(s).length>0,{touchModalDesignLarge:u,nonTouchModalDesignLarge:d}=s,p=Boolean(u),h=Boolean(d);if(c&&!p&&!h)return s;var g=document.querySelector('[class*="CarouselRightOverlay"]'),v=n.closest('[class*="CarouselContainer"]'),m=v&&g?parseInt(null===(t=window)||void 0===t||null===(t=t.getComputedStyle(g))||void 0===t?void 0:t.width,10):0,f=null==o||null===(r=o.getBoundingClientRect())||void 0===r?void 0:r.width,b=n.getBoundingClientRect().left,y=n.getBoundingClientRect().bottom,x=n.getBoundingClientRect().width,w=b+x,P=i-b,j=P-m,S=a-y,T=v?j:P,k=l&&i>=900||!l&&i>=600;return{touchModalDesignSmall:!1,nonTouchModalDesignSmall:!1,touchModalDesignLarge:p,nonTouchModalDesignLarge:h,isIdealPositionDesign:k&&S>300&&w>f+16,isLeftHorizOverflowDesign:k&&S>300&&w<=f+16,isVerticalOverflowDesign:k&&S<=300&&T>f,isRightHorizVertOverflowDeisgn:k&&S<=300&&T<=f,carouselWidth:m,leftEdgeFromRight:P,leftEdgeFromTransparency:j,leftEdgeFromRightFinalvalue:T,topEdgeFromBottom:a-n.getBoundingClientRect().top,yPosition:y,xPosition:b,widthOfElement:x}})({element:s,modalElement:c});p?(a="0 auto",n="auto",t="16px",i="16px",o="16px"):d?(a="0 auto",n="auto",t="8px",i="8px",o="8px"):n=(0,u.A)(333),h?(a="".concat(8,"px 0px 0px 0px"),i="".concat(b-P,"px"),r="".concat(x,"px"),o="auto",t="auto"):g?(a="".concat(8,"px 0px 0px 0px"),o="16px",r="".concat(x,"px"),i="auto",t="auto"):v?(t="".concat(y,"px"),r="auto",a="0px 0px 8px 0px",o="".concat(w,"px"),i="auto"):m&&(t="".concat(y,"px"),r="auto",a="0px 0px 8px 0px",o="auto",i=f?"".concat(f,"px"):"16px")}return{bottom:t,top:r,width:n,left:o,right:i,margin:a}},ce=e=>{for(var{startingElement:t,partialClassName:r}=e,n=t;n;){if(n.classList&&Array.from(n.classList).some((e=>e.includes(r))))return n;n=n.parentElement}return null};function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var he=(0,a.default)("div",{target:"e1h1lg0y2",label:"StyledOverlayTouchEnabledLT900"})("display:",(e=>{var{$isTouchEnabledLT900:t}=e;return t?"flex":"none"}),";position:fixed;top:0px;left:0px;height:100%;width:100%;background:rgba(20, 20, 20, 0.6);backdrop-filter:blur(0rem);z-index:999;@media (max-width: ","".concat(l._G-1,"px"),"){display:flex;}"),ge=(0,a.default)("dialog",{target:"e1h1lg0y1",label:"QuickUserActionsMenuDialog"})("display:flex;z-index:",s.o.INFORMATION_PANEL_CONTENT,";position:fixed;padding:",c.SPACING_4,";border:",(e=>{var{theme:t}=e;return"".concat((0,u.A)(1)," solid ").concat(t.colourPalette.border)}),";top:",(e=>{var{top:t}=e;return t||"auto"}),";bottom:",(e=>{var{bottom:t}=e;return t||"auto "}),";left:",(e=>{var{left:t}=e;return t||"0px"}),";right:",(e=>{var{right:t}=e;return t||"auto"}),";width:",(e=>{var{width:t}=e;return t||"0px"}),";margin:",(e=>{var{margin:t}=e;return t||"auto"}),";background:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";outline:2px solid transparent!important;box-shadow:none;user-select:none;"),ve=(0,a.default)("div",{target:"e1h1lg0y0",label:"ButtonWrapperStyledDiv"})("z-index:20;",(e=>{var{isSelected:t}=e;return t&&"\n      outline: 0 solid #000;\n      outline-offset: 0px;\n    "}),";"),me=e=>{var{buttonWrapperStyledDivRef:t,menuRef:r,title:n,buttonHandler:i,service:a,minHeight:l,personalisedActions:s,setPersonalisedActionsState:c,tracking:u}=e,d=(0,o.useRef)(),p=(0,o.useId)(),[h,g]=(0,o.useState)(0),[v,m]=(0,o.useState)(!1),f=t.current,{bottom:b,top:y,width:x,left:w,right:P,margin:S}=se({isRenderedState:v,element:f,modalElement:r.current});return(0,o.useEffect)((()=>{var e=e=>{g(f.getBoundingClientRect().bottom);var t=window.scrollY;return Math.abs(d.current-t)>200&&(d.current=t,i(e)),!1},t=e=>{i(e)},n=e=>{"Escape"===e.key&&i(e)},o=e=>{r.current&&!r.current.contains(e.target)&&f&&!f.contains(e.target)&&(e.preventDefault(),i(e))};document.addEventListener("mousedown",o),window.addEventListener("scroll",e),window.addEventListener("orientationchange",t),window.addEventListener("resize",t);var a=null==r?void 0:r.current;null==a||a.addEventListener("keydown",n),a.focus(),d.current=window.scrollY;var l=e=>{var{scrollLeft:t}=e.target;0!==t&&i(e)},s=f.closest('[role="list"]');return null==s||s.addEventListener("scroll",l),m(!0),()=>{document.removeEventListener("mousedown",o),window.removeEventListener("scroll",e),window.removeEventListener("orientationchange",t),window.removeEventListener("resize",t),null==s||s.removeEventListener("scroll",l),null==a||a.removeEventListener("keydown",n)}}),[]),(0,o.useEffect)((()=>{g(h)}),[h]),(0,o.useEffect)((()=>{g(y)}),[y]),(0,j.jsx)(ge,{ref:r,"data-testid":"quick-user-actions-menu",top:h,bottom:b,left:w,right:P,width:x,margin:S,disabled:!v,"aria-label":"Quick User Actions Menu for ".concat(n),role:"dialog",children:(0,j.jsx)(ne,{title:n,closeButton:i,service:a,minHeight:l,personalisedActions:s,setPersonalisedActionsState:c,width:x,tracking:u,id:p})})};const fe=e=>{var t,r,n,{title:a="Panel title",personalisedActions:l,service:s,bottom:c="0",minHeight:u,tracking:h}=e,g=(0,o.useRef)(null),v=(0,o.useRef)(null),m=(0,o.useRef)(null),f=(0,o.useRef)(null),b=(0,o.useRef)(null),[y,x]=(0,o.useState)(!1),[w,S]=(0,o.useState)(!1),[T,k]=(0,o.useState)(!1),[O,A]=(0,o.useState)(null),{tleoId:E}=l,{groupName:C,groupType:I,groupPosition:D,groupItemCount:N}=h||{groupName:"",groupType:"",groupPosition:"",groupItemCount:0},L={groupName:C,groupType:I,groupPosition:D,groupItemCount:N},R=(e=>{var{groupName:t,groupType:r,groupPosition:n,groupItemCount:o,resourceId:i}=e;return(0,P.D9)({itemName:"more info",groupName:t,groupType:r,groupPosition:n,groupItemCount:o,itemType:"quick actions menu",headline:"more info",topicId:i,experienceResourceId:i})})({groupName:C,groupType:I,groupPosition:D,groupItemCount:N,resourceId:E}),H=e=>{f.current=e.target,x(!y)};return(0,o.useEffect)((()=>{var e=()=>{b.current&&b.current.disconnect(),b.current=(e=>{var t=ce({startingElement:e,partialClassName:"CarouselItem"});if(t){var r=ce({startingElement:t,partialClassName:"CarouselContainer"});if(r){var n=r.querySelector('[class*="CarouselLeftOverlay"]'),o=r.querySelector('[class*="CarouselRightOverlay"]'),i=r.querySelector('[class*="CarouselControls"]'),a=i.children[0],l=i.children[1],s=0,c={root:null,rootMargin:"0px -".concat((null==o?void 0:o.offsetWidth)||0,"px 0px -").concat((null==n?void 0:n.offsetWidth)||0,"px"),threshold:[.1,1]},u=new IntersectionObserver((e=>{e.forEach((e=>{var r=e.boundingClientRect.x;t.contains(document.activeElement)&&(r>s&&(null==a||a.focus()),r<s&&(null==l||l.focus())),s=r}))}),c);return u.observe(t),u}}})(v.current)};e();var t=e=>{var t,r=null==e||null===(t=e.detail)||void 0===t?void 0:t.isFollowing;A((e=>de(de({},e),{},{isFollowing:r})))};return document.addEventListener(E,t),window.addEventListener("resize",e),k(!0),()=>{window.removeEventListener("resize",e),document.removeEventListener(E,t),b.current&&b.current.disconnect()}}),[]),(0,o.useEffect)((()=>{if(!y&&w&&!(e=>{for(var{element:t,elementId:r,ariaLabelText:n,maxSearchLevels:o=7}=e,i=t,a=0;i&&a<o;){if(i.tagName&&"button"===i.tagName.toLowerCase()&&(i.id===r||i.getAttribute("aria-label")===n))return!0;i=i.parentElement,a+=1}return!1})({element:f.current,ariaLabelText:"Quick User Actions Menu for ".concat(a),maxSearchLevels:5})){var e=v.current.querySelector("button");if(!e)return;e.focus()}S(y)}),[y]),(0,o.useEffect)((()=>{A(l)}),[l]),(0,j.jsxs)(ve,{"data-testid":"quick-user-actions-menu-wrapper",isSelected:y,ref:v,bottom:c,children:[(0,j.jsx)(p.C,{tracking:R,trackView:!1,stopPropagation:!0,children:e=>{var{trackRef:t}=e;return(0,j.jsx)("div",{ref:t,children:(0,j.jsx)(d.A,{"aria-label":"Quick User Actions Menu for ".concat(a),width:"content-length",emphasis:"low",children:" ",iconType:"actions:more-horizontal",iconPosition:"end",iconOnly:"true",onClick:H,role:"button",disabled:!T,trackRef:m,cornerFit:!0})})}}),y&&(0,i.createPortal)((0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(he,{$isTouchEnabledLT900:(t=window.innerWidth,r="ontouchstart"in window||navigator.maxTouchPoints>0,n=le(t,r),Boolean(null==n?void 0:n.touchModalDesignSmall))}),(0,j.jsx)(me,{menuRef:g,buttonWrapperStyledDivRef:v,title:a,buttonHandler:H,setUasModalShow:x,service:s,minHeight:u,personalisedActions:O,setPersonalisedActionsState:A,tracking:L})]}),document.getElementById("root"))]})};function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var we=e=>{var{promo:t}=e;return t.personalisedActions?ye(ye({},t),{},{buttonSlot:(0,j.jsx)(fe,{personalisedActions:t.personalisedActions,service:t.service,title:t.headline,tracking:t.tracking})}):t}}}]);