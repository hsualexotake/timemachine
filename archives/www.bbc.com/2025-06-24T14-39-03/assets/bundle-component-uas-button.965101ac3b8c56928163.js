"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9659],{2391:(e,t,n)=>{n.d(t,{A:()=>Q});var r,i,o,a=n(63696),s=n(12180),c=n(59310),l=n(81070),u=n(95584),d=n(98804),v=n(49565),f=n(31602),p=n(54585),b=n(49348),y={follows:{enabled:"followed",success:"unfollowed"},favourites:{enabled:"favourited",success:"unfavourited"}},h=n(25987),g=(e,t)=>{var{activityType:n,resourceType:r,resourceId:i,resourceDomain:o}=e;return(0,h.A)().withAction(y[n][t]).withResourceType(r).withResourceId(i).withResourceDomain(o).build()},m=n(77652),O=n(89958),j=n(91785),P=n(20641),w=n(11545),S=n(468),x=n(74437),A=n(27336),T=n(55522),C=n(62540),E=["states","currentState","onClick","focusRef","touchRef","alignContent","iconOnly","iconPosition","iconSize","useFullWidth","useThemeStyles"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var R=(0,O.default)("div",{target:"e19pe5mb4",label:"ButtonWrapper"})("html.no-js &{display:none;}width:",(e=>{var{useFullWidth:t}=e;return t?"100%":"fit-content"}),";"),_=(0,O.default)("div",{target:"e19pe5mb3",label:"ContentsWrapper"})("display:grid;width:100%;justify-content:",(e=>{var{alignContent:t}=e;return"start"===t?"flex-start":"center"}),";"),z=(0,O.default)("span",{target:"e19pe5mb2",label:"ButtonStyles"})("display:flex;justify-content:",(e=>{var{alignContent:t}=e;return"start"===t?"flex-start":"center"}),";align-items:center;grid-column:1;grid-row:1;",P.NP," ",w.Vk," ",(e=>{var{visible:t}=e;return!t&&(0,j.AH)(r||(r=L(["\n      visibility: hidden;\n    "])))}),";",(e=>{var{reverseOrder:t}=e;return t&&(0,j.AH)(i||(i=L(["\n      flex-direction: row-reverse;\n    "])))}),";"),F=(0,O.default)("span",{target:"e19pe5mb1",label:"IconWrapper"})("width:",(0,S.A)(20),";height:1em;",(e=>{var{iconOnly:t,reverseOrder:n}=e;return t?"":n?"padding-left: ".concat(x.SPACING_2):"padding-right: ".concat(x.SPACING_2,";")})," ",(e=>{var{iconSize:t}=e;return"small"===t&&(0,j.AH)(o||(o=L(["\n      font-size: ",";\n    "])),(0,S.A)(14))}),";"),N=(0,O.default)("span",{target:"e19pe5mb0",label:"ButtonText"})({name:"3abrc0",styles:"width:auto"}),W=e=>{var{iconType:t,iconOnly:n,iconPosition:r,iconSize:i,visible:o,alignContent:a,children:s}=e,c="end"===r;return(0,C.jsxs)(z,{alignContent:a,reverseOrder:c,visible:o,children:[t&&(0,C.jsx)(F,{"data-testid":t,iconPosition:r,iconSize:i,reverseOrder:c,iconOnly:n,children:n?(0,C.jsx)(T.A,{type:t,children:s}):(0,C.jsx)(T.A,{type:t})}),!n&&(0,C.jsx)(N,{children:s})]})},H=e=>Object.entries(e).reduce(((t,n)=>{var[r,{text:i,iconType:o}]=n;return t.some((e=>(null==e?void 0:e.text)===i&&(null==e?void 0:e.iconType)===o))||t.push(D(D({},e[r]),{},{state:r})),t}),[]),U=e=>{var{states:t,iconOnly:n,iconPosition:r}=e;return(0,C.jsx)(C.Fragment,{children:H(t).map((e=>{var{state:t,text:i,iconType:o}=e;return(0,C.jsx)(W,{visible:!1,iconType:o,iconOnly:n,iconPosition:r,children:i},t)}))})},B=e=>{var{states:t,currentState:n,onClick:r,focusRef:i,touchRef:o,alignContent:a,iconOnly:s,iconPosition:l,iconSize:u,useFullWidth:d,useThemeStyles:v}=e,f=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,E),{text:p,emphasis:b,iconType:y,visuallyHiddenText:h}=t[n];return(0,C.jsx)(R,{useFullWidth:d,currentState:n,useThemeStyles:v,children:(0,C.jsx)(A.A,D(D({emphasis:b,onClick:r,width:s&&!d?"content-length":"full",trackRef:(0,m.k)(i,o),cornerFit:v},f),{},{children:(0,C.jsxs)(_,{alignContent:a,children:[(0,C.jsxs)(W,{visible:!0,iconType:y,iconOnly:s,alignContent:a,iconPosition:l,iconSize:u,children:[(0,C.jsx)("span",{"data-testid":"uasButtonText",children:p}),(0,C.jsx)(c.A,{children:h})]}),!s&&(0,C.jsx)(U,{states:t,iconOnly:s,iconPosition:l})]})}))})};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=e=>{var{hasError:t,panelContent:n,getPanelContent:r,state:i}=e;return t?"Check your connection, refresh the page and try again.":r?r(i):n},q=(e,t,n,r)=>t?"Sorry, something went wrong":n?n(e):r,J=(e,t,n,r)=>t?"labels:warning":n?n(e):r;const Q=e=>{var t,{states:n,activityConfig:r,setSignInPrompt:i,env:o,iconOnly:y,iconSize:h,panelTheme:O,panelTitle:j,panelContent:P,getPanelContent:w,withAgeRestriction:S,initialState:x="enabled",alignContent:A="centre",iconPosition:T="start",useFullWidth:E=!1,panelMaxWidthPx:k="336",panelAlignment:D="left",panelExpanded:I=!1,deleteActivityConfig:L={deleteOnSuccess:!1,deletePreviousAction:null,globalId:null},disableViewTracking:R=!1,tracking:_={},experimentTracking:z={},onSuccess:F=()=>!0,disabled:N=!1,showInformationPanel:W=!0,useThemeStyles:H=!1,getPanelTitleForState:U,getPanelIconForState:G,onSignedOut:V=()=>!1,panelIcon:Q="",uasErrorCallback:X,onEnabled:Y=()=>!1,cornerFit:Z=!1,onActive:$=()=>!1}=e,[ee,te]=(0,f.i)(),[ne,re]=(0,p.P)(),[ie,oe]=(0,a.useState)("UNKNOWN"),ae=(0,a.useId)(),se=(0,a.useId)(),[ce,le]=(0,a.useState)(x),[ue,de]=(0,a.useState)(I),[ve,fe]=(0,a.useState)(!1),[pe,be]=(0,a.useState)(x),[ye,he]=(0,a.useState)(""),ge=(0,a.useRef)(null);(0,a.useEffect)((()=>{le(x),be(x)}),[x]);var me=((e,t)=>{var{activityType:n}=e,r="live"===t,i=r?"km5ifdffcjdoc":"19t3g6sdf3o50",o=r?t:"test";return(0,b.A)({apiKey:i,environment:o,activityType:n,tokenRefreshToggle:!0,timeout:3e3})})(r,o),Oe="".concat(ce,"Hover"),je=te&&!re&&n[Oe]&&!N?Oe:ce,Pe=null!==(t=n[ce])&&void 0!==t&&t.accessibleText?"".concat(n[ce].accessibleText):"".concat(n[je].text).concat(n[je].visuallyHiddenText),we=(e,t)=>{var r,i,o,a;return e.subitem?K(K(K({},e),t),{},{event:K(K(K({},e.event),t.event),{},{entity_name:"subitem"}),subitem:K(K(K({},e.subitem),t.subitem),{},{type:"user activity service button",text:null!==(a=n[pe].trackingText)&&void 0!==a?a:n[pe].text})}):K(K(K({},e),t),{},{item:K(K(K({},e.item),t.item),{},{type:null!==(r=null==e||null===(i=e.item)||void 0===i?void 0:i.type)&&void 0!==r?r:"user activity service button",text:null!==(o=n[pe].trackingText)&&void 0!==o?o:n[pe].text})})},Se=we(_,{eventAction:n[pe].statAction}),xe=e=>{if(fe(!0),X&&X(),W&&de(!0),le(e),window.Reverb){var t=we(_,{eventAction:"error",event:{category:"error"},error:{type:n.enabled.statAction,name:"".concat(n[pe].statAction," error"),message:"Sorry, something went wrong. Check your connection, refresh the page and try again."}});window.Reverb.userActionEvent("viewability",void 0,t)}};(0,a.useEffect)((()=>{oe((0,v.A)()?"SIGNED_IN":"SIGNED_OUT")}),[]);var Ae={enabled:()=>{var e=g(r,"enabled"),t=(0,m.u)(1e3),n=me.post(e);le("enabledActive"),$(),Promise.all([t,n]).then((()=>{le("success"),be("success");var e=F("success");W&&de(e)})).catch((e=>(s.z3("Error posting a follow event to UAS",e),xe("enabled"))))},success:()=>{var e=!L.deleteOnSuccess&&g(r,"success"),t=(0,m.u)(1e3),n=L.deleteOnSuccess?me.delete(L.deletePreviousAction,L.globalId):me.post(e);le("successActive"),$(),Promise.all([t,n]).then((()=>{le("enabled"),be("enabled");var e=Y("enabled");de(e)})).catch((e=>(s.z3("Error posting an unfollow or delete event to UAS",e),xe("success"))))},signedOut:()=>{var e=(0,m.u)(100);Promise.all([e]).then((()=>{V()?de(!0):i({show:!0}),le("signedOut"),be("signedOut")}))},error:()=>{var e=(0,m.u)(100);le("enabledActive"),fe(!0),Promise.all([e]).then((()=>xe(x)))}},Te=()=>{fe(!1),de(!1);var e=(0,v.A)();S||"SIGNED_OUT"===ie&&e?Ae.error():e?Ae[ce]&&Ae["signedOut"===ce?x:ce]():Ae.signedOut()};return(0,a.useEffect)((()=>{he(ve?"There was a problem, try again":Pe),ge.current&&clearTimeout(ge.current),ge.current=setTimeout((()=>{he("")}),1e3)}),[ve,Pe]),(0,C.jsx)(l.A,{id:se,expanded:ue,panelStateCallback:de,panelTitle:q(ce,ve,U,j),panelType:ve?"error":"midground",panelIcon:J(ce,ve,G,Q),panelMaxWidthPx:k,horizontalAlignment:D,panelTheme:O,button:(0,C.jsx)(u.C,K(K({tracking:Se,trackView:!R},(0,d.l)(z)),{},{viewKey:pe,stopPropagation:!0,children:e=>{var{trackRef:t}=e;return(0,C.jsxs)("div",{ref:t,children:[(0,C.jsx)(B,{states:n,currentState:je,onClick:Te,focusRef:ee,touchRef:ne,alignContent:A,iconOnly:y,cornerFit:Z,iconPosition:T,iconSize:h,useFullWidth:E,"aria-labelledby":ae,"aria-expanded":ue,disabled:N,useThemeStyles:H,"data-testid":"uas-button"}),(0,C.jsx)(c.A,{"data-testid":"visually-hidden-announcement",as:"p",id:ae,"aria-live":"assertive",children:ye})]})}})),children:(0,C.jsx)(M,{hasError:ve,panelContent:P,getPanelContent:w,state:ce})})}},31602:(e,t,n)=>{n.d(t,{i:()=>i});var r=n(63696),i=()=>{var[e,t]=(0,r.useState)(!1),n=(0,r.useCallback)((()=>t(!0)),[]),i=(0,r.useCallback)((()=>t(!1)),[]),o=(0,r.useCallback)((()=>t(!0)),[]),a=(0,r.useCallback)((()=>t(!1)),[]),s=(0,r.useRef)();return[(0,r.useCallback)((e=>{s.current&&(s.current.removeEventListener("focus",n),s.current.removeEventListener("blur",i),s.current.removeEventListener("mouseover",o),s.current.removeEventListener("mouseout",a)),s.current=e,s.current.addEventListener("focus",n),s.current.addEventListener("blur",i),s.current.addEventListener("mouseover",o),s.current.addEventListener("mouseout",a)}),[n,i,o,a]),e]}},54585:(e,t,n)=>{n.d(t,{P:()=>i});var r=n(63696),i=()=>{var[e,t]=(0,r.useState)(!1),n=(0,r.useCallback)((()=>t(!0)),[]),i=(0,r.useRef)();return[(0,r.useCallback)((e=>{i.current&&(i.current.removeEventListener("touchstart",n,{passive:!0}),i.current.removeEventListener("touchend",n)),i.current=e,i.current.addEventListener("touchstart",n,{passive:!0}),i.current.addEventListener("touchend",n)}),[n]),e]}},77652:(e,t,n)=>{n.d(t,{k:()=>i,u:()=>r});var r=e=>new Promise((t=>setTimeout(t,e))),i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{t&&e&&("function"==typeof t?t(e):t.current=e.current)}))}}}}]);