/*! For license information please see search.js.LICENSE.txt */
define("utils/classes",[],(function(){"use strict";var e={hasClass:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},addClass:function(t,o){e.hasClass(t,o)||(t.className+=(t.className?" ":"")+o)},removeClass:function(e,t){e.className=e.className.replace(new RegExp("(^| )"+t+"( |$)","g")," ").replace(/(^ | $)/g,"")}};return e})),define("modules/overlay",["jssignals-1","utils/classes"],(function(e,t){"use strict";function o(t){this.container=t.container,this.openClass=t.openClass||"open",this.signals={opened:new e.Signal,closed:new e.Signal}}return o.prototype.open=function(){t.hasClass(this.container,this.openClass)||(t.addClass(this.container,this.openClass),this.container.setAttribute("aria-expanded","true"),this.signals.opened.dispatch())},o.prototype.close=function(){t.hasClass(this.container,this.openClass)&&(t.removeClass(this.container,this.openClass),this.container.setAttribute("aria-expanded","false"),this.signals.closed.dispatch())},o})),define("utils/active-element",[],(function(){"use strict";return function(e){setTimeout((function(){var t=document.activeElement;t===document.body&&(t=document.querySelector(":active")),e(t)}),50)}})),define("utils/dom",[],(function(){"use strict";var e=function(){var e=Array.prototype.indexOf;return e?function(t,o){return e.call(t,o)}:function(e,t){var o,i;for(o=0,i=e.length;o<i;o+=1)if(e[o]===t)return o;return-1}}();return{index:function(t,o){return e(o||t.parentNode.children,t)},createElementsFromString:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children&&t.children.length>1?t.children:t.firstChild},isDescendant:function(e,t){var o=e;if(o)for(;o.parentElement;)if((o=o.parentElement)===t)return!0;return!1}}})),define("utils/events",[],(function(){"use strict";var e=Array.prototype.slice;return{trigger:function(e,t,o){var i,n=document.createEvent("HTMLEvents"),a=o||{};for(i in n.initEvent(t,!0,!0),a)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=a[i]);e.dispatchEvent(n)},bindEventToSignal:function(t,o,i){var n=e.call(arguments,3);t&&t.addEventListener(o,(function(e){e.preventDefault(),i.dispatch.apply(i,n)}))}}})),define("modules/overlay-dom",["jssignals-1","utils/active-element","utils/dom","utils/events"],(function(e,t,o,i){"use strict";function n(t){this.searchLink=t.searchLink,this.container=t.container,this.outer=t.outer,this.allowPropagation=t.allowPropagation,this.signals={searchLinkClicked:new e.Signal,userClickedOutsideOverlay:new e.Signal,focusLeftOverlay:new e.Signal},this.init()}var a=document.getElementsByTagName("html")[0];return n.prototype.init=function(){i.bindEventToSignal(this.searchLink,"click",this.signals.searchLinkClicked),i.bindEventToSignal(this.currentLocationLink,"click",this.signals.currentLocationLinkClicked),function(e,t,o,i){o.addEventListener("click",(function(t){1===t.which&&e.signals.userClickedOutsideOverlay.dispatch()})),t.addEventListener("click",(function(e){(!i||i&&!i.contains(e.target))&&e.stopPropagation()}))}(this,this.container,this.outer,this.allowPropagation),function(e,i){i.addEventListener("focusout",(function(){t((function(t){o.isDescendant(t,i)||t===a||t===i||null===t||e.signals.focusLeftOverlay.dispatch()}))}))}(this,this.container,this.outer),function(e){var t=e.container.id;t&&(e.searchLink&&e.searchLink.setAttribute("aria-controls",t),e.currentLocationLink&&e.currentLocationLink.setAttribute("aria-controls",t))}(this)},n})),define("modules/location-redirector",[],(function(){"use strict";function e(e){this.urlTemplate=e}return e.prototype.redirectToLocationId=function(e,t){var o;-1!==this.urlTemplate.indexOf("{{location_id}}")&&(o=this.urlTemplate.replace("{{location_id}}",String(e).toLowerCase()),(t||window).location=o)},e})),define("locservices/ui/mediator/events",[],(function(){"use strict";function e(){}var t={};return e.prototype.on=function(e,o){t[e]=t[e]||[],t[e].push(o)},e.prototype.emit=function(e,o){t[e]=t[e]||[],t[e].forEach((function(e){e(o||{})}))},e.prototype.clear=function(e){if(e)for(var o in t)o.match(e)&&(t[o]=void 0);else t={}},new e})),define("locservices/ui/delegates/delegate",["locservices/ui/mediator/events"],(function(e){"use strict";function t(){this.events=e}return t.prototype.setOptions=function(e){e=e||{},this.delegateId=e.delegateId||"delegate",this.eventNamespaceBase="locservices:ui",e.eventNamespace&&(this.eventNamespaceBase=e.eventNamespace),this.eventNamespace=this.eventNamespaceBase+":delegate:"+this.delegateId},t.prototype.setDeduper=function(e){this.deduper=e},t.prototype.setFilters=function(e){this.filters=e},t.prototype.emit=function(e,t){t=t||[];var o=this.eventNamespace;"error"===e&&(o=this.eventNamespaceBase),this.events.emit(o+":"+e,t)},t.prototype.on=function(e,t){var o=this.eventNamespace;"error"===e&&(o=this.eventNamespaceBase),this.events.on(o+":"+e,t)},t.prototype.getLocationsFromCache=function(){return this._locations||[]},t})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/filter",t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),e.locservices.core.filter=t()}(this,(function(){var e={placeType:"settlement, airport",country:"GB, GG, IM, JE"},t={placeType:"settlement, airport, country"},o=function(e,t){return void 0===t||void 0===e?e:"string"==typeof t.filter?i(e,t):(e=n(e,"placeType",t.placeType),n(e,"country",t.country))},i=function(i,n){if("domestic"!==n.filter&&"international"!==n.filter)return n.filter=void 0,o(i,n);var a="domestic"===n.filter?e:t;return void 0!==n.placeType&&(a.placeType=n.placeType),void 0!==n.country&&(a.country=n.country),o(i,a)},n=function(e,t,o){var i=(o||"").replace(/^\s+|\s+$/g,"");if(""===i)return e;for(var n=[],a=e.length,r=0;r<a;r++){var s=e[r];s.hasOwnProperty(t)&&-1!==i.indexOf(s[t])&&n.push(s)}return n};return o})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/data/tvandradio",t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),void 0===e.locservices.core.data&&(e.locservices.core.data={}),e.locservices.core.data.TvAndRadio=t()}(this,(function(){function e(){}var t=function(e){return{c:"bbc_one_cambridge",ci:"bbc_one_channel_islands",e:"bbc_one_east",em:"bbc_one_east_midlands",l:"bbc_one_london",ne:"bbc_one_north_east",nw:"bbc_one_north_west",ni:"bbc_one_northern_ireland",o:"bbc_one_oxford",sc:"bbc_one_scotland",s:"bbc_one_south",se:"bbc_one_south_east",sw:"bbc_one_south_west",wa:"bbc_one_wales",w:"bbc_one_west",wm:"bbc_one_west_midlands",ey:"bbc_one_east_yorkshire",y:"bbc_one_yorks"}[e]},o=function(e){return{e:"bbc_two_england",n:"bbc_two_northern_ireland_digital",s:"bbc_two_scotland",w:"bbc_two_wales_digital"}[e]},i=function(e){return{e:"bbc_radio_one",n:"bbc_radio_one_northern_ireland",s:"bbc_radio_one_scotland",w:"bbc_radio_one_wales"}[e]},n=function(e){var t={2:"bbc_london",3:"bbc_radio_berkshire",4:"bbc_radio_bristol",5:"bbc_radio_cambridge",6:"bbc_radio_cornwall",7:"bbc_radio_coventry_warwickshire",8:"bbc_radio_cumbria",9:"bbc_radio_cymru",10:"bbc_radio_derby",11:"bbc_radio_devon",12:"bbc_radio_essex",13:"bbc_radio_foyle",14:"bbc_radio_gloucestershire",15:"bbc_radio_guernsey",16:"bbc_radio_hereford_worcester",17:"bbc_radio_humberside",18:"bbc_radio_jersey",19:"bbc_radio_kent",20:"bbc_radio_lancashire",21:"bbc_radio_leeds",22:"bbc_radio_leicester",23:"bbc_radio_lincolnshire",24:"bbc_radio_manchester",25:"bbc_radio_merseyside",26:"bbc_radio_nan_gaidheal",27:"bbc_radio_newcastle",28:"bbc_radio_norfolk",29:"bbc_radio_northampton",30:"bbc_radio_nottingham",31:"bbc_radio_orkney",32:"bbc_radio_oxford",33:"bbc_radio_scotland",34:"bbc_radio_sheffield",35:"bbc_radio_shetland",36:"bbc_radio_shropshire",37:"bbc_radio_solent",38:"bbc_radio_somerset_sound",39:"bbc_radio_stoke",40:"bbc_radio_suffolk",41:"bbc_radio_surrey",42:"bbc_radio_sussex",43:"bbc_radio_ulster",44:"bbc_radio_wales_fm",45:"bbc_radio_wiltshire",46:"bbc_radio_york",47:"bbc_tees",48:"bbc_three_counties_radio",49:"bbc_wm"};if("string"==typeof e){for(var o=e.split("."),i=[],n=0;n<o.length;n++)i.push(t[o[n]]);return i}};return e.prototype.get=function(e){var a,r=!1,s=typeof e;return"object"===s&&null!==e?r={bbc_one:t(e[1]),bbc_two:o(e[2]),bbc_radio_one:i(e[3]),local_radio:n(e[4])}:"string"===s&&4<=(a=e.split(",")).length&&(r={bbc_one:a[0],bbc_two:a[1],bbc_radio_one:a[2],local_radio:a.slice(3)}),r},e.prototype.convertToUASString=function(e){var t,o;return o=function(e,o){"string"==typeof e&&e.length>0&&(t+=e),o&&(t+=",")},t="","object"!=typeof e||(o(e.bbc_one,!0),o(e.bbc_two,!0),o(e.bbc_radio_one,!1),"[object Array]"===Object.prototype.toString.call(e.local_radio)&&0<e.local_radio.length&&(t+=","+e.local_radio.join(","))),t},e})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/data/news",t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),void 0===e.locservices.core.data&&(e.locservices.core.data={}),e.locservices.core.data.News=t()}(this,(function(){function e(){}var t={1:{id:"threecounties",path:"england/beds_bucks_and_herts",name:"Beds Herts &amp; Bucks",locServicesId:"1"},3:{id:"berkshire",path:"england/berkshire",name:"Berkshire",locServicesId:"3"},4:{id:"birmingham",path:"england/birmingham_and_black_country",name:"Birmingham and Black Country",locServicesId:"4"},7:{id:"bristol",path:"england/bristol",name:"Bristol",locServicesId:"7"},8:{id:"cambridgeshire",path:"england/cambridgeshire",name:"Cambridgeshire",locServicesId:"8"},11:{id:"cornwall",path:"england/cornwall",name:"Cornwall",locServicesId:"11"},12:{id:"coventry",path:"england/coventry_and_warwickshire",name:"Coventry &amp; Warwickshire",locServicesId:"12"},13:{id:"cumbria",path:"england/cumbria",name:"Cumbria",locServicesId:"13"},16:{id:"derby",path:"england/derbyshire",name:"Derby",locServicesId:"16"},17:{id:"devon",path:"england/devon",name:"Devon",locServicesId:"17"},18:{id:"dorset",path:"england/dorset",name:"Dorset",locServicesId:"18"},19:{id:"edinburghandeastscotland",path:"scotland/edinburgh_east_and_fife",name:"Edinburgh Fife &amp; East of Scotland",locServicesId:"19"},20:{id:"essex",path:"england/essex",name:"Essex",locServicesId:"20"},21:{id:"northernireland",path:"northern_ireland",name:"Northern Ireland",locServicesId:"21"},22:{id:"glasgowandwestscotland",path:"scotland/glasgow_and_west",name:"Glasgow &amp; West of Scotland",locServicesId:"22"},23:{id:"gloucestershire",path:"england/gloucestershire",name:"Gloucestershire",locServicesId:"23"},26:{id:"guernsey",path:"world/europe/guernsey",name:"Guernsey",locServicesId:"26"},27:{id:"hampshire",path:"england/hampshire",name:"Hampshire &amp; Isle of Wight",locServicesId:"27"},28:{id:"28",path:"england/hereford_and_worcester",name:"Hereford &amp; Worcester",locServicesId:"herefordandworcester"},30:{id:"highlandsandislands",path:"scotland/highlands_and_islands",name:"Highlands &amp; Islands",locServicesId:"30"},31:{id:"humberside",path:"england/humberside",name:"Humberside",locServicesId:"31"},32:{id:"isleofman",path:"world/europe/isle_of_man",name:"Isle of Man",locServicesId:"32"},33:{id:"jersey",path:"world/europe/jersey",name:"Jersey",locServicesId:"33"},34:{id:"kent",path:"england/kent",name:"Kent",locServicesId:"34"},35:{id:"lancashire",path:"england/lancashire",name:"Lancashire",locServicesId:"35"},36:{id:"leeds",path:"england/leeds_and_west_yorkshire",name:"Leeds &amp; West Yorkshire",locServicesId:"36"},37:{id:"leicester",path:"england/leicester",name:"Leicestershire",locServicesId:"37"},38:{id:"lincolnshire",path:"england/lincolnshire",name:"Lincolnshire",locServicesId:"38"},39:{id:"liverpool",path:"england/merseyside",name:"Liverpool",locServicesId:"39"},40:{id:"london",path:"england/london",name:"London",locServicesId:"40"},41:{id:"manchester",path:"england/manchester",name:"Manchester",locServicesId:"41"},42:{id:"midwales",path:"wales/mid_wales",name:"Mid Wales",locServicesId:"midwales"},43:{id:"norfolk",path:"england/norfolk",name:"Norfolk",locServicesId:"43"},44:{id:"northampton",path:"england/northamptonshire",name:"Northampton",locServicesId:"44"},45:{id:"northeastscotlandnorthernisles",path:"scotland/north_east_orkney_and_shetland",name:"North East Scotland Orkney &amp; Shetland",locServicesId:"45"},46:{id:"northeastwales",path:"wales/north_east_wales",name:"North East Wales",locServicesId:"46"},47:{id:"northwestwales",path:"wales/north_west_wales",name:"North West Wales",locServicesId:"47"},48:{id:"york",path:"england/york_and_north_yorkshire",name:"York &amp; North Yorkshire",locServicesId:"48"},49:{id:"nottingham",path:"england/nottingham",name:"Nottinghamshire",locServicesId:"49"},50:{id:"oxford",path:"england/oxford",name:"Oxford",locServicesId:"50"},51:{id:"shropshire",path:"england/shropshire",name:"Shropshire",locServicesId:"51"},52:{id:"somerset",path:"england/somerset",name:"Somerset",locServicesId:"52"},53:{id:"southeastwales",path:"wales/south_east_wales",name:"South East Wales",locServicesId:"53"},55:{id:"southscotland",path:"scotland/south_scotland",name:"South Scotland",locServicesId:"55"},56:{id:"southwestwales",path:"wales/south_west_wales",name:"South West Wales",locServicesId:"56"},57:{id:"sheffield",path:"england/south_yorkshire",name:"Sheffield &amp; South Yorkshire",locServicesId:"57"},58:{id:"stoke",path:"england/stoke_and_staffordshire",name:"Stoke &amp; Staffordshire",locServicesId:"58"},59:{id:"suffolk",path:"england/suffolk",name:"Suffolk",locServicesId:"59"},60:{id:"sussex",path:"england/sussex",name:"Sussex",locServicesId:"60"},61:{id:"taysideandcentralscotland",path:"scotland/tayside_and_central",name:"Tayside &amp; Central Scotland",locServicesId:"61"},62:{id:"tees",path:"england/tees",name:"Tees",locServicesId:"62"},63:{id:"tyne",path:"england/tyne_and_wear",name:"Tyne and Wear",locServicesId:"63"},65:{id:"wiltshire",path:"england/wiltshire",name:"Wiltshire",locServicesId:"65"},66:{id:"surrey",path:"england/surrey",name:"Surrey",locServicesId:"66"},67:{id:"leeds",path:"england/leeds_and_west_yorkshire",name:"Leeds &amp; West Yorkshire",locServicesId:"67"},68:{id:"cambridgeshire",path:"england/cambridgeshire",name:"Cambridgeshire",locServicesId:"68"},69:{id:"tyne",path:"england/tyne_and_wear",name:"Tyne and Wear",locServicesId:"69"},70:{id:"birmingham",path:"england/birmingham_and_black_country",name:"Birmingham and Black Country",locServicesId:"70"}};return e.prototype.get=function(e){var o,i,n=[],a=typeof e;if("number"===a)e=[e];else{if("string"!==a)return!1;e=e.split(/[,.]+/g)}for(o=0;o<e.length;o++)i=e[o],void 0!==t[i]&&n.push(t[i]);return n},e.prototype.convertToUASString=function(e){var t,o,i;if(void 0===e||"[object Array]"!==Object.prototype.toString.call(e)||0===e.length)return"";for(o=[],t=0;t<e.length;t++)"string"!=typeof(i=e[t].locServicesId)&&"number"!=typeof i||o.push(i);return o.join(",")},e})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/data/weather",t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),void 0===e.locservices.core.data&&(e.locservices.core.data={}),e.locservices.core.data.Weather=t()}(this,(function(){function e(){}return e.prototype.get=function(e){var t={},o=typeof e;if("string"===o){if(2!==(e=e.split(",")).length)return!1;t.id=e[0],t.name=e[1]}else{if("object"!==o||null===e||void 0===e.i||void 0===e.p)return!1;t.id=String(e.i),t.name=e.p}return t},e.prototype.convertToUASString=function(e){var t;return t="","object"!=typeof e||null===e||void 0===e.id||void 0===e.name?t:t=e.id+","+e.name},e})),define("locservices/core/metadata_parser",[],(function(){return{parse:function(e){e.version="0.1";for(var t=["latitude","longitude","timezone"],o=t.length,i=0;i<o;i++){var n=t[i];e[n]&&delete e[n]}return e.details&&(e.details,delete e.details),e}}})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/uas_locations",["uasclient","./data/tvandradio","./data/news","./data/weather","./metadata_parser"],t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),e.locservices.core.UASLocations=t(e.locservices.core.data.TvAndRadio,e.locservices.core.data.News,e.locservices.core.data.Weather)}(this,(function(e,t,o,i,n){"use strict";function a(t,o,i){var n;if(o=o||{},this._isSupported=!1,this.debug="object"==typeof o&&!0===o.debug,r=o.uasClient||e,this.idcta=i,r&&"object"==typeof t&&"co.uk"===t.domainSuffix){try{null===r.getObj&&r.init(t)}catch(e){this._handleUASClientException(e),n=!0}n||!0!==r.userSignedIn||(this._isSupported=!0)}this._uasFavouritesRequestObject={resourceDomain:"profile",resourceType:s,activityType:"favourites",action:"favourited"},this._uasFollowsRequestObject={resourceDomain:"location",resourceType:s,activityType:"favourites",action:"favourited"},this._uasRequestObject={resourceDomain:"location",activityType:"favourites",action:"favourited"}}var r,s="geonameid",c=["postcodedistrict",s],l=function(e){e&&"function"==typeof e.error&&e.error()},d=function(e,t){e&&"function"==typeof e.success&&e.success(t)};return a.prototype._handleUASClientException=function(e){if(this.debug)throw e},a.prototype.isSupported=function(){return this._isSupported},a.prototype.getUASClient=function(e){return r},a.prototype.getPreferred=function(e){!1!==this._isSupported?this.get({success:function(t){var o,i;for(i=0;i<t.length;i++)if("object"==typeof(o=t[i])&&"preferred"===o.locationType)return void d(e,o);d(e)},error:function(){l(e)}}):l(e)},a.prototype.setPreferred=function(e,t){var o;o=this,!1!==this._isSupported&&"object"==typeof e?this.removePreferred({success:function(){e.locationType="preferred",o.create(e,t)},error:function(){l(t)}}):l(t)},a.prototype.removePreferred=function(e){var t;t=this,!1!==this._isSupported?this.getPreferred({success:function(o){"object"==typeof o?t.remove(o.id,e):d(e)},error:function(){l(e)}}):l(e)},a.prototype.all=function(e){!1!==this._isSupported?this.get({success:function(t){this.getPreferred({success:function(o){if(o&&"object"==typeof o){for(var i=String(o.id),n=!1,a=0;a<t.length;a++)i===String(t[a].id)&&(n=!0);!1===n&&(t.unshift(o),this.createFollow(o,(function(){}),(function(){})))}d(e,t)}.bind(this),error:function(){d(e,t)}})}.bind(this),error:function(){l(e)}},this._uasRequestObject):l(e)},a.prototype.get=function(e,n){var a,s,u,h,p,m,f=new o,g=new t,v=new i;if(n=n||this._uasFavouritesRequestObject,a=function(t){var o,i,n,a;try{o=JSON.parse(t.responseText)}catch(t){return this._handleUASClientException(t),void l(e)}if(o&&o.items instanceof Array){for(i=[],n=0;n<o.items.length;n++)s=o.items[n].metaData,(a=o.items[n].resourceType)&&!c.includes(a)&&(s.legacyResourceType=o.items[n].resourceType),u=f.get(s.news),h=g.get(s.tvandradio),p=v.get(s.weather),!0===u&&delete s.news,!0===h&&delete s.tvandradio,!0===p&&delete s.weather,i.push(s);d(e,i)}else d(e,[])},m=function(e,t){t.initiateTokenRefresh();try{return void console.log("token refresh successful!")}catch(e){console.log("token refresh failed!",e)}},!1!==this._isSupported)try{r.get(n,function(t,o){if(t){if("object"==typeof t&&408===t.status)return;if("object"==typeof t&&401===t.status)return void m(e,this.idcta);l(e)}else"object"!=typeof o||200!==o.status&&202!==o.status?l(e):a(o)}.bind(this))}catch(t){this._handleUASClientException(t),l(e)}else l(e)},a.prototype.remove=function(e,t,o,i,n){var a;if(!1===this._isSupported||"string"!=typeof e&&"number"!=typeof e)l(t);else{o=o||this._uasFavouritesRequestObject.activityType,i=i||this._uasFavouritesRequestObject.resourceDomain,n=n||function(e){return/^[0-9]*$/.test(e)?s:"postcodedistrict"}(e),a="urn:bbc:"+i+":"+n+":"+String(e);try{r.remove({activityType:o,globalId:a},(function(e,o){e?l(t):"object"==typeof o&&202===o.status?d(t):l(t)}))}catch(e){this._handleUASClientException(e),l(t)}}},a.prototype.create=function(e,t,o){if(o=o||this._uasFavouritesRequestObject,!1!==this._isSupported&&"object"==typeof e&&void 0!==e.id){"object"==typeof e.details&&void 0!==e.details?e=n.parse(e):(void 0!==e.news&&delete e.news,void 0!==e.tvandradio&&delete e.tvandradio,void 0!==e.weather&&delete e.weather);try{this.setResourceType(o,e.placeType);var i=o;i.resourceId=e.id||"",i.resourceTitle=e.name||"",i.url=void 0!==typeof window?window.location.href:"",i.metaData=JSON.stringify(e)||{},r.create(i,(function(e,o){e?l(t):d(t)}))}catch(e){this._handleUASClientException(e),l(t)}}else l(t)},a.prototype.createFollow=function(e,t){this.create(e,t,this._uasFollowsRequestObject)},a.prototype.removeFollow=function(e,t,o){this.remove(e,t,this._uasFollowsRequestObject.activityType,this._uasFollowsRequestObject.resourceDomain,o)},a.prototype.setResourceType=function(e,t){t&&"district"===t&&(e.resourceType="postcodedistrict")},a})),define("locservices/ui/utils/utils",[],(function(){return{findLocationById:function(e,t){for(var o=String(e),i=0;i<t.length;i++)if(String(t[i].id)===o)return t[i];return!1},locationInArrayById:function(e,t){for(var o=String(e,10),i=0;i<t.length;i++)if(String(t[i].id,10)===o)return!0;return!1},debounce:function(e,t,o){var i;return function(){var n=this,a=arguments,r=o&&!i;clearTimeout(i),i=setTimeout((function(){i=null,o||e.apply(n,a)}),t),r&&e.apply(n,a)}},createElement:function(e,t){var o=document.createElement(e);return null!==t&&(void 0!==t&&"#"===t.charAt(0)?o.id=t.slice(1):this.addClass(o,t)),o},addClass:function(e,t){if(e&&t){var o=-1!==t.search(" "),i=""!==e.className;if(void 0===e.classList||""===e.classList||""===t||o){var n=i?" ":"";e.className+=n+t}else e.classList.add(t)}},removeClass:function(e,t){e&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},hasClass:function(e,t){try{return null!==e&&(e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className))}catch(e){return!1}},trigger:function(e,t,o){var i;"function"==typeof CustomEvent?i=new CustomEvent(t,{detail:o,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,o),e.dispatchEvent(i)},click:function(e){var t=document.createEvent("MouseEvent");t.initMouseEvent("click",!0,!0,window,null,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}})),define("locservices/ui/delegates/my_locations_delegate",["locservices/ui/delegates/delegate","locservices/core/filter","locservices/core/uas_locations","idcta/idcta-1","locservices/ui/utils/utils"],(function(e,t,o,i,n){function a(e){if(a._instance)return a._instance;if(void 0===e.config&&"object"!==e.config)throw Error("Please provide UAS Configuration");return r=this,a._instance=r,r.uasLocations=e.uasLocation||new o(e.config,e,i),r._locations=[],(e=e||{}).delegateId="my_locations",r.setOptions(e),r.on("location",(function(e){r.isSupported()&&(Array.isArray(e)&&(e=e[0]),r.uasLocations.createFollow(e))})),a._instance}var r;return a.prototype=new e,a.prototype.constructor=a,a.prototype.isSupported=function(){return this.uasLocations.isSupported()},a.prototype.getLocations=function(e,o){if(!this.isSupported())return o("Not supported");var i={success:function(o){r._locations=o,e(t(r._locations,r.filters))},error:function(e){o(e)}};this.uasLocations.all(i)},a.prototype.add=function(e,t,o){if(!this.isSupported())return o("Not supported");if(r.isAlreadyExist(e))return o("Location already in list");if(r.isAlreadyFull())return o("Your list of locations is full");var i={success:function(o){r._locations.unshift(e),r.deduper&&r.deduper.removeLocationFromDelegate(e,(function(){}),(function(){})),r.emit("location_added",[r._locations]),t(o)},error:o};this.uasLocations.createFollow(e,i)},a.prototype.isAlreadyExist=function(e){return n.locationInArrayById(e.id,this.getLocationsFromCache())},a.prototype.isAlreadyFull=function(){return this.getLocationsFromCache().length>=10},a.prototype.remove=function(e,t,o){this._removeLocation(e,"location_removed",t,o)},a.prototype.removeLocationFromLocationsList=function(e,t,o){this._removeLocation(e,"location_removed:from-list",t,o)},a.prototype._removeLocation=function(e,t,o,i){var a,s,c={success:function(i){var a=n.findLocationById(e,r.getLocationsFromCache());a&&r._locations.splice(r._locations.indexOf(a),1),r.emit(t,[r._locations,a]),o(i)},error:i};s=(a=n.findLocationById(e,this.getLocationsFromCache()))&&a.legacyResourceType||void 0,this.uasLocations.removeFollow(e,c,s)},a.prototype.selectLocationById=function(e){for(var t,o=0;o<r._locations.length;o++)if(r._locations[o].id.toString()===e.toString()){t=r._locations[o];break}return t&&this.emit("location",[t]),t},a})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/recent_locations",t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),e.locservices.core.RecentLocations=t()}(this,(function(){function e(){this._prefix="locservices-recent-locations"}function t(t){if(this.isSupported()&&(this._storageAdapter=new e),t=t||{},this.MAX_LOCATIONS=t.maxLocations||4,isNaN(this.MAX_LOCATIONS)||this.MAX_LOCATIONS<0)throw new Error("Invalid max location value")}var o=function(){var e="bbc-locservices-core-js";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}(),i=o?localStorage:{},n="object"==typeof window.JSON&&o;return e.prototype.get=function(){var e=[];if(!i[this._prefix])return e;try{e=JSON.parse(i[this._prefix])}catch(e){}return e},e.prototype.set=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return!1;i[this._prefix]=JSON.stringify(e)},t.prototype.isSupported=function(){return n},t.prototype.all=function(){return void 0===this._storageAdapter?[]:this._storageAdapter.get()},t.prototype.add=function(e){if(void 0===this._storageAdapter||(!(t=(t=e)||{}).hasOwnProperty("placeType")||"postcode"!==t.placeType&&"district"!==t.placeType&&!t.hasOwnProperty("container")||!t.id||"string"!=typeof t.id||!t.name))return!1;var t;if(this.contains(e.id))return this.remove(e.id),this.add(e),!0;var o=this._storageAdapter.get();return o.unshift(e),this.MAX_LOCATIONS<o.length&&(o=o.slice(0,this.MAX_LOCATIONS)),this._storageAdapter.set(o),!0},t.prototype.remove=function(e){var t,o,i=[];if(void 0===this._storageAdapter)return!1;for(o in t=this._storageAdapter.get())t.hasOwnProperty(o)&&t[o].id.toString()!==e.toString()&&i.push(t[o]);this._storageAdapter.set(i)},t.prototype.clear=function(){return void 0!==this._storageAdapter&&(this._storageAdapter.set([]),!0)},t.prototype.contains=function(e){var t,o,i=!1;if(void 0===this._storageAdapter)return!1;for(o in t=this._storageAdapter.get())t.hasOwnProperty(o)&&t[o].id===e&&(i=!0);return i},t})),define("locservices/ui/delegates/recent_locations_delegate",["locservices/ui/delegates/delegate","locservices/core/recent_locations","locservices/core/filter","locservices/ui/utils/utils"],(function(e,t,o,i){"use strict";function n(e){return n._instance||(a=this,n._instance=a,(e=e||{}).delegateId="recent_locations",a.setOptions(e),a.filters=e.filters,a.recents=e.recents||new t({maxLocations:5}),a._locations=[],this.events.on(e.eventNamespace+":component:search_results:location",a.add.bind(a)),this.events.on(e.eventNamespace+":component:geolocation:location",a.add.bind(a)),this.events.on(e.eventNamespace+":component:auto_complete:location",a.add.bind(a))),n._instance}var a;return n.prototype=new e,n.prototype.constructor=n,n.prototype.isSupported=function(){return this.recents.isSupported()},n.prototype.getLocations=function(e,t){if(!this.isSupported())return t("Not supported");this._locations=o(this.recents.all(),this.filters),e&&e(this._locations)},n.prototype.selectLocationById=function(e){var t=i.findLocationById(e,a.getLocationsFromCache());return t&&a.emit("location",[t]),t},n.prototype.add=function(e,t,o){if(!this.isSupported())return o("Not supported");Array.isArray(e)&&(e=e[0]),-1===this.getLocationsFromCache().indexOf(e)&&(a.deduper&&a.deduper.locationInUse(e)||(this.recents.add(e),this._locations.unshift(e),this._locations.length>5&&this._locations.pop(),this.emit("location_added",[this._locations]),t&&"function"==typeof x&&t(this._locations)))},n.prototype.removeLocationFromLocationsList=function(e,t,o){if(!this.isSupported())return o("Not supported");var n=i.findLocationById(e,a.getLocationsFromCache());n&&(this.recents.remove(e,(function(){}),(function(){})),this._locations.splice(this._locations.indexOf(n),1),this.emit("location_removed",[this._locations]),t&&"function"==typeof x&&t(this._locations))},n})),define("locservices/ui/utils/deduper",["locservices/ui/utils/utils"],(function(e){function t(e,t){if(void 0===e)throw new Error("No delegate defined");this.delegate=e,this.registrationLocation=t}return t.prototype.removeLocationFromDelegate=function(t,o,i){try{var n=this.delegate.getLocationsFromCache();e.locationInArrayById(t.id,n)||this.locationIsRegistrationLocation(t)?this.delegate.remove(t.id,o,i):o(n)}catch(e){i(e.message)}},t.prototype.locationInUse=function(e){return this.locationInDelegate(e)||this.locationIsRegistrationLocation(e)},t.prototype.locationInDelegate=function(t){var o=this.delegate.getLocationsFromCache();return e.locationInArrayById(t.id,o)},t.prototype.locationIsRegistrationLocation=function(e){return"object"==typeof e&&"id"in e&&"object"==typeof this.registrationLocation&&"id"in this.registrationLocation&&String(e.id)===String(this.registrationLocation.id)},t})),define("locservices/ui/factory/delegates_factory",["locservices/ui/delegates/my_locations_delegate","locservices/ui/delegates/recent_locations_delegate","locservices/ui/utils/deduper"],(function(e,t,o){function i(e){a(e),(n=this).options=e,n.myLocationsDelegate,n.recentLocationsDelegate}var n,a=function(e){for(var t=["apiKey","namespace","env","domainSuffix"],o=t.length,i=0;i<o;i++){var n=t[i];if(!e[n])throw new Error("Delegate Factory requires an "+n+" option.")}};return i.prototype.createDelegates=function(){var i=n.options;return n.myLocationsDelegate=new e({eventNamespace:i.namespace,config:{apiKey:i.apiKey,env:i.env,domainSuffix:i.domainSuffix||"co.uk"}}),n.recentLocationsDelegate=new t({eventNamespace:i.namespace}),n.recentLocationsDelegate.setDeduper(new o(n.myLocationsDelegate)),n.myLocationsDelegate.setDeduper(new o(n.recentLocationsDelegate)),{myLocationsDelegate:n.myLocationsDelegate,recentLocationsDelegate:n.recentLocationsDelegate}},i})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/api",t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),e.locservices.core.API=t()}(this,(function(){"use strict";function e(e,t){var o;for(o in e)e.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=e[o]);return t}function t(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}function o(t){var o,n="";this._defaultParams={},this.apiKey="",this._options=e({env:"live",protocol:"http"},t||{});var a=i(this._options);for(o in a)a.hasOwnProperty(o)&&"env"!==o&&"protocol"!==o&&(this._defaultParams[o]=a[o]);"live"!==this._options.env&&(n="."+this._options.env),void 0!==this._options.api_key&&(this.apiKey=this._options.api_key),this.setLocatorEndpoint(this._options,n),this._hasXHR=void 0!==window.XMLHttpRequest}function i(e){var t,o={};for(t in e)e.hasOwnProperty(t)&&((typeof e[t]).match(/string|number/)?o[t]=e[t]:"[object Array]"===Object.prototype.toString.call(e[t])&&(o[t]=e[t].join(",")));return o}o.prototype.setLocatorEndpoint=function(e,t){".live"!==t&&"."!==t||(t=""),this._apiBaseUri=e.protocol+"://locator-service"+t+".api.bbci.co.uk",this._baseUri=e.protocol+"://www"+t+".bbc.co.uk/locator/default"},o.prototype.getDefaultQueryParameters=function(){return this._defaultParams},o.prototype.getLocation=function(t,o){var n="",a="location";o.params=e(this._defaultParams,i(o||{})),o.detailTypes&&"[object Array]"===Object.prototype.toString.call(o.detailTypes)&&(a="details",n="/details/"+o.detailTypes.join(","),o.params.vv=2);var r="/locations/"+encodeURIComponent(t)+n;this.request(r,o,a)},o.prototype.search=function(t,o){o.params=e(this._defaultParams,i(o||{})),o.params.s=t,o.success=function(){var e=o.success,i=t,n=o.params.start;return function(t){t.metadata.search=i,n&&(t.metadata.start=n),e(t)}}(),this.request("/locations",o,"search")},o.prototype.autoComplete=function(t,o){o.params=e(this._defaultParams,i(o||{})),o.params.s=t,o.params.a="true",this.request("/locations",o,"autoComplete")},o.prototype.reverseGeocode=function(o,n,a){a.params=e(this._defaultParams,i(a||{})),a.params.la=t(o,3),a.params.lo=t(n,3),this.request("/locations",a,"reverseGeocode")},o.prototype.getCookie=function(e,t){"object"!=typeof e?t.error("API.prototype.getCookie now requires a full location search result object to be passed as an argument instead of a location id"):t.success(this.generateCookieResponse(e,t))},o.prototype.generateCookieResponse=function(e,t){var o=new Date;return o.setFullYear(o.getFullYear()+1),{cookie:this.formulateCookieFromLocation(e,t),expires:o.getTime()/1e3,id:e.id,name:e.name,news:[],type:"location"}},o.prototype.formulateCookieFromLocation=function(e,t){var o,i=encodeURIComponent(e.name);i=i.replace(/%20/g,"+"),t&&t.params&&t.params.news_region_id&&(o=t.params.news_region_id);var n=encodeURIComponent(e.container);return n=n.replace(/\%20/g,"+"),"3#l1#i="+e.id+":n="+i+":h=0:c="+n+":p="+e.placeType+":y="+e.country+function(e){return"@w1#i=0:p="+e}(i)+"@d1#1=0:2=0:3=0:4=0@n1#r="+(o||0)},o.prototype.request=function(e,t,o,i){t.params.format="json",t.params.api_key=i||this.apiKey;var s,c="function"==typeof window.addEventListener?window.addEventListener:window.attachEvent,l="function"==typeof window.removeEventListener?window.removeEventListener:window.detachEvent,d=e+r(t.params),u=this,h=!1,p=function(){window.ActiveXObject&&l("onunload",v)},m=function(e){var i;try{i=b(e.responseText),setTimeout((function(){t.success(a(i,o))}))}catch(o){t.error&&t.error(e.status)}},f=function(e){e.onreadystatechange=function(o){4===e.readyState&&(t.success&&e.status<400&&null!==e.responseText?m(e):t.error&&t.error(e.status),p())}},g=function(e){e.onload=function(){t.success&&(void 0===e.status||e.status<400)&&null!==e.responseText?m(e):t.error&&t.error(e.status),p()},e.onerror=function(){t.error&&t.error(e.status),p()}},v=function(){h=!0,s.onload=s.onerror=s.onreadystatechange=null,s.abort()},_=function(e){h||"function"!=typeof t.error||t.error(e)};window.ActiveXObject&&c("onunload",v);var y=function(e){return"cookie"===o||"api"!==e?u._baseUri+d:u._apiBaseUri+d},b=function(e){if(window.JSON&&window.JSON.parse)try{return window.JSON.parse(e)}catch(e){return null}return"string"==typeof e?new Function("return "+e)():null};if(this._hasXHR&&(s=new XMLHttpRequest),s&&"withCredentials"in s)try{s.open("GET",y("api"),!0),g(s)}catch(e){_(e)}else if(void 0!==window.XDomainRequest)(s=new XDomainRequest).open("GET",y("api")),g(s);else if(s)try{s.open("GET",y("")),f(s)}catch(e){_(e)}else void 0!==window.ActiveXObject?((s=new ActiveXObject("Microsoft.XMLHTTP")).open("GET",y(""),!0),f(s)):n(y("api"),t,o);if(void 0!==s)try{s.send(null)}catch(e){v(),p(),t.error&&t.error(400)}};var n=function(e,t,o){var i,n;n="_locservices_core_api_cb_"+(new Date).getTime()+Math.round(1e5*Math.random()),t.params.format="jsonp",t.params.jsonp=n,window[n]=function(e){try{delete window[n]}catch(e){window[n]=void 0}document.body.removeChild(i),t.success&&t.success(a(e,o))},(i=document.createElement("script")).src=e+r(t.params),"function"==typeof t.error&&(i.onerror=t.error),document.body.appendChild(i)},a=function(e,t){var o={};switch(t){case"cookie":o=e;break;case"location":o.location=e.response;break;case"details":o.location=e.response.metadata.location,o.details=e.response.content.details.details;break;case"search":o.results=e.response.locations,o.metadata={totalResults:e.response.totalResults};break;case"autoComplete":o.results=e.response.results.results,o.metadata={totalResults:e.response.results.totalResults};break;case"reverseGeocode":o.results=e.response.results.results}return o},r=function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o+"="+encodeURIComponent(e[o]));return"?"+t.join("&")};return o})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/preferred_location",["./recent_locations","./data/tvandradio","./data/news","./data/weather","./uas_locations"],t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),e.locservices.core.PreferredLocation=t(e.locservices.core.RecentLocations,e.locservices.core.data.TvAndRadio,e.locservices.core.data.News,e.locservices.core.data.Weather)}(this,(function(e,t,o,i,n){"use strict";function a(t,o){o=o||{},this.api=t,this.isUASSupported=!1,this.recentLocations=new e,this.isUASReadEnabled=!1,this.isUASWriteEnabled=!1,"function"==typeof n&&(window.location.hostname.indexOf("bbc.com"),location.hostname.length,o.uasConfig&&(this.uasLocations=new n(o.uasConfig),this.isUASSupported=this.uasLocations.isSupported())),"object"==typeof o&&(this.isUASReadEnabled=!0===o.isUASReadEnabled,this.isUASWriteEnabled=!0===o.isUASWriteEnabled)}var r={e:"england",n:"northernireland",s:"scotland",w:"wales"},s=!1,c=!1,l=[],d=function(e,t){e&&"function"==typeof e.error&&e.error(t)},u=function(e,t){e&&"function"==typeof e.success&&e.success(t)};return a.prototype._resetUASState=function(){s=!1,c=!1,l=[]},a.prototype.isValidLocation=function(e){var t,o;return"object"==typeof e&&(t=e.placeType,o=e.country,!("settlement"!==t&&"airport"!==t&&"district"!==t||"GB"!==o&&"GG"!==o&&"IM"!==o&&"JE"!==o))},a.prototype.isLocServCookieSet=function(){return null!==this.getLocServCookie()},a.prototype.unset=function(e){this.unsetLocServCookie(),this.isUASSupported&&this.isUASWriteEnabled?this.uasLocations.removePreferred(e):u(e)},a.prototype.unsetLocServCookie=function(){var e=this.getCookieDomain();return!1!==e&&(this.setDocumentCookie("locserv=; expires=Thu, 01 Jan 1970 00:00:01 GMT; Path=/; domain="+e+";"),!0)},a.prototype.isValidLocationId=function(e){return"string"==typeof e&&""!==e.replace(/^\s+|\s+$/g,"")},a.prototype.getHostname=function(){return window.location.hostname},a.prototype.getDocumentCookie=function(){return window.document.cookie},a.prototype.setDocumentCookie=function(e){window.document.cookie=e},a.prototype.getCookieDomain=function(){var e,t;return this.cookieDomain?this.cookieDomain:"string"==typeof(t=this.getHostname())&&((e=t.match(/bbc\.co(\.uk|m)$/))&&2===e.length?this.cookieDomain="."+e[0]:this.cookieDomain=!1,this.cookieDomain)},a.prototype.getLocServCookie=function(){var e;return!(e=this.getDocumentCookie().match(new RegExp("locserv=(.*?)(;|$)")))||e.length<2?null:e[1]},a.prototype.getLocServCookieLocation=function(e){var n,a,s,c,l,d,u,h,p,m;if(l=function(e){var t,o,i,n,a={},r=!1;if(!(e.length<3)){for(o=e.substr(0,1),i=(e=e.substr(3)).split(":"),t=0;t<i.length;t++)2===(n=i[t].split("=")).length&&(r=!0,n[1]=n[1].replace(/\+/g,"%20"),a[n[0]]=decodeURIComponent(n[1]));return!1===r&&(a=!1),{name:o,data:a}}},!(a=this.getLocServCookie()))return null;for(n={id:null,name:null,nation:null,news:null,weather:null,tvandradio:null},m=!1,s=a.substr(2).split("@"),d=0;d<s.length;d++)(c=l(s[d]))&&!1!==c.data&&("l"===c.name?(m=!0,n.id=c.data.i,n.name=c.data.n,c.data.c&&(n.container=c.data.c),c.data.y&&(n.country=c.data.y),c.data.p&&(n.placeType=c.data.p),c.data.h&&(n.nation=r[c.data.h])):"w"===c.name?!1!==(p=(new i).get(c.data))&&(n.weather=p):"n"===c.name?!1!==(h=(new o).get(c.data.r||e))&&(n.news=h):"d"===c.name&&!1!==(u=(new t).get(c.data))&&(n.tvandradio=u));return m||(n=null),n},a.prototype.setLocServCookieLocation=function(e,t){var o,i,n,a;return o=this,"object"!=typeof e?void(t&&t.error&&d(t,"PreferredLocation.setLocServCookieLocation() must now be called with a location search result object")):void 0===this.api||!1===this.isValidLocationId(e.id)?void d(t):(this.cookieLocation=void 0,!1===(n=o.getCookieDomain())?void d(t):(i={params:{},success:function(e){var i,r;r=new Date(1e3*e.expires).toUTCString(),i="locserv="+e.cookie+"; ",i+="expires="+r+"; ",i+="domain="+n+"; ",i+="path=/;",t&&t.newsRegionId&&(a=t.newsRegionId),o.setDocumentCookie(i),u(t,o.getLocServCookieLocation(a))},error:function(e){d(t,e)}},t&&t.newsRegionId&&(i.params.news_region_id=t.newsRegionId),void this.api.getCookie(e,i)))},a.prototype.get=function(e){var t,o;t=this;var i=function(e){var t;for(c=!1,s=!0,t=0;t<l.length;t++)u(l[t],e);l=[]},n=function(){var e,t;for(c=!1,t=l,l=[],e=0;e<t.length;e++)o?u(t[e],o):d(t[e])};o=this.getLocServCookieLocation(),this.isUASSupported&&this.isUASReadEnabled&&!s?("object"==typeof e&&l.push(e),c||(c=!0,this.uasLocations.getPreferred({success:function(e){void 0===e||null!==o&&o.id===e.id?e?i(e):o?i(o):i():function(e){var o;e&&e.news&&1===e.news.length&&(o=e.news[0].id),t.setLocServCookieLocation(e.id,{newsRegionId:o,success:function(t){i(e)},error:function(){n()}})}(e)},error:function(){n()}}))):u(e,o)},a.prototype.set=function(e,t){var o,i;"object"==typeof e?(o=this,t=t||{},i=this.getLocServCookieLocation(),this.setLocServCookieLocation(e,{newsRegionId:t.newsRegionId,success:function(n){o.recentLocations.isSupported()&&(o.recentLocations.remove(e.id),i&&e.id!==i.id&&o.recentLocations.add(i)),o.isUASSupported&&o.isUASWriteEnabled?function(e){o.uasLocations.setPreferred(e,{success:function(){u(t,e)},error:function(){d(t)}})}(n):u(t,n)},error:function(){d(t)}})):t&&t.error&&d(t,"PreferredLocation.set() must now be called with a location search result object")},a})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/registration_postcode",["idcta/config"],t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),e.locservices.core.RegistrationPostcode=t()}(this,(function(e){"use strict";function t(t){var o=t.getUserDetailsFromCookie();this._postcode=void 0,this._isAvailable=function(o){var i="GREEN"===e["bbcid-v5"];return!(!t.hasCookie()||!i||null===o)&&"ep"in o&&"pa"in o}(o),this._isAvailable&&(this._postcode=o.pa)}return t.prototype.isAvailable=function(){return this._isAvailable},t.prototype.get=function(){return this._postcode},t})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/bbc_cookies",t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),e.locservices.core.BBCCookies=t()}(this,(function(){function e(){this._isSupported="object"==typeof window.bbccookies,this._isSupported&&(this._policy=window.bbccookies.readPolicy())}return e.prototype.isSupported=function(){return this._isSupported},e.prototype.readPolicy=function(){return!!this._isSupported&&this._policy},e.prototype.isPersonalisationDisabled=function(){return!!this._isSupported&&!1===this._policy.personalisation},e})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/cookies",t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),e.locservices.core.Cookies=t()}(this,(function(){function e(){}return e.prototype.isSupported=function(){var e="locservices_ui_test_cookie",t=!1;return this.set(e,"test"),"test"===this.get(e)&&(t=!0),this.unset(e),t},e.prototype.hasItem=function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},e.prototype.get=function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},e.prototype.set=function(e,t,o,i,n){var a;return!(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))&&(o&&"string"!=typeof o&&(o=void 0),a=encodeURIComponent(e)+"="+encodeURIComponent(t)+(o?"; expires="+o:"")+(n?"; domain="+n:"")+(i?"; path="+i:""),document.cookie=a,a)},e.prototype.unset=function(e,t,o){var i;return!(!e||!this.hasItem(e))&&(i=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:"")+(t?"; path="+t:""),document.cookie=i,i)},e})),define("locservices/ui/component/component",["locservices/ui/mediator/events"],(function(e){"use strict";function t(){this.events=e}return t.prototype.setComponentOptions=function(e){if(void 0===(e=e||{}).translations)throw new Error("Component requires a translations parameter.");if(this.translations=e.translations,void 0===e.container)throw new Error("Component requires container parameter.");this.container=e.container,this.componentId=e.componentId||"component",this.eventNamespaceBase="locservices:ui",e.eventNamespace&&(this.eventNamespaceBase=e.eventNamespace),this.eventNamespace=this.eventNamespaceBase+":component:"+this.componentId},t.prototype.emit=function(e,t){t=t||[];var o=this.eventNamespace;"error"===e&&(o=this.eventNamespaceBase),this.events.emit(o+":"+e,t)},t.prototype.on=function(e,t){var o=this.eventNamespace;"error"===e&&(o=this.eventNamespaceBase),this.events.on(o+":"+e,t)},t.prototype.listenTo=function(e,t,o){var i=[this.eventNamespaceBase,"component",e,t];this.events.on(i.join(":"),o)},t})),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("mustache",t):(e=e||self).Mustache=t()}(this,(function(){"use strict";function e(e){return"function"==typeof e}function t(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}function i(e,t){return null!=e&&"object"!=typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}function n(e){return!function(e,t){return u.call(e,t)}(h,e)}function a(e,o){function i(){if(w&&!L)for(;b.length;)delete p[b.pop()];else b=[];w=!1,L=!1}function a(e){if("string"==typeof e&&(e=e.split(f,2)),!d(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(t(e[0])+"\\s*"),c=new RegExp("\\s*"+t(e[1])),l=new RegExp("\\s*"+t("}"+e[1]))}if(!e)return[];var s,c,l,u=!1,h=[],p=[],b=[],w=!1,L=!1,S="",C=0;a(o||y.tags);for(var A,k,T,E,D,I,B=new r(e);!B.eos();){if(A=B.pos,T=B.scanUntil(s))for(var R=0,x=T.length;R<x;++R)n(E=T.charAt(R))?(b.push(p.length),S+=E):(L=!0,u=!0,S+=" "),p.push(["text",E,A,A+1]),A+=1,"\n"===E&&(i(),S="",C=0,u=!1);if(!B.scan(s))break;if(w=!0,k=B.scan(_)||"name",B.scan(m),"="===k?(T=B.scanUntil(g),B.scan(g),B.scanUntil(c)):"{"===k?(T=B.scanUntil(l),B.scan(v),B.scanUntil(c),k="&"):T=B.scanUntil(c),!B.scan(c))throw new Error("Unclosed tag at "+B.pos);if(D=">"==k?[k,T,A,B.pos,S,C,u]:[k,T,A,B.pos],C++,p.push(D),"#"===k||"^"===k)h.push(D);else if("/"===k){if(!(I=h.pop()))throw new Error('Unopened section "'+T+'" at '+A);if(I[1]!==T)throw new Error('Unclosed section "'+I[1]+'" at '+A)}else"name"===k||"{"===k||"&"===k?L=!0:"="===k&&a(T)}if(i(),I=h.pop())throw new Error('Unclosed section "'+I[1]+'" at '+B.pos);return function(e){for(var t,o=[],i=o,n=[],a=0,r=e.length;a<r;++a)switch(t=e[a],t[0]){case"#":case"^":i.push(t),n.push(t),i=t[4]=[];break;case"/":n.pop()[5]=t[2],i=n.length>0?n[n.length-1][4]:o;break;default:i.push(t)}return o}(function(e){for(var t,o,i=[],n=0,a=e.length;n<a;++n)(t=e[n])&&("text"===t[0]&&o&&"text"===o[0]?(o[1]+=t[1],o[3]=t[3]):(i.push(t),o=t));return i}(p))}function r(e){this.string=e,this.tail=e,this.pos=0}function s(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function c(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}var l=Object.prototype.toString,d=Array.isArray||function(e){return"[object Array]"===l.call(e)},u=RegExp.prototype.test,h=/\S/,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},m=/\s*/,f=/\s+/,g=/\s*=/,v=/\s*\}/,_=/#|\^|\/|>|\{|&|=|!/;r.prototype.eos=function(){return""===this.tail},r.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var o=t[0];return this.tail=this.tail.substring(o.length),this.pos+=o.length,o},r.prototype.scanUntil=function(e){var t,o=this.tail.search(e);switch(o){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,o),this.tail=this.tail.substring(o)}return this.pos+=t.length,t},s.prototype.push=function(e){return new s(e,this)},s.prototype.lookup=function(t){var n,a=this.cache;if(a.hasOwnProperty(t))n=a[t];else{for(var r,s,c,l=this,d=!1;l;){if(t.indexOf(".")>0)for(r=l.view,s=t.split("."),c=0;null!=r&&c<s.length;)c===s.length-1&&(d=o(r,s[c])||i(r,s[c])),r=r[s[c++]];else r=l.view[t],d=o(l.view,t);if(d){n=r;break}l=l.parent}a[t]=n}return e(n)&&(n=n.call(this.view)),n},c.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},c.prototype.parse=function(e,t){var o=this.templateCache,i=e+":"+(t||y.tags).join(":"),n=void 0!==o,r=n?o.get(i):void 0;return null==r&&(r=a(e,t),n&&o.set(i,r)),r},c.prototype.render=function(e,t,o,i){var n=this.getConfigTags(i),a=this.parse(e,n),r=t instanceof s?t:new s(t,void 0);return this.renderTokens(a,r,o,e,i)},c.prototype.renderTokens=function(e,t,o,i,n){for(var a,r,s,c="",l=0,d=e.length;l<d;++l)s=void 0,"#"===(r=(a=e[l])[0])?s=this.renderSection(a,t,o,i,n):"^"===r?s=this.renderInverted(a,t,o,i,n):">"===r?s=this.renderPartial(a,t,o,n):"&"===r?s=this.unescapedValue(a,t):"name"===r?s=this.escapedValue(a,t,n):"text"===r&&(s=this.rawValue(a)),void 0!==s&&(c+=s);return c},c.prototype.renderSection=function(t,o,i,n,a){var r=this,s="",c=o.lookup(t[1]);if(c){if(d(c))for(var l=0,u=c.length;l<u;++l)s+=this.renderTokens(t[4],o.push(c[l]),i,n,a);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)s+=this.renderTokens(t[4],o.push(c),i,n,a);else if(e(c)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");c=c.call(o.view,n.slice(t[3],t[5]),(function(e){return r.render(e,o,i,a)})),null!=c&&(s+=c)}else s+=this.renderTokens(t[4],o,i,n,a);return s}},c.prototype.renderInverted=function(e,t,o,i,n){var a=t.lookup(e[1]);if(!a||d(a)&&0===a.length)return this.renderTokens(e[4],t,o,i,n)},c.prototype.indentPartial=function(e,t,o){for(var i=t.replace(/[^ \t]/g,""),n=e.split("\n"),a=0;a<n.length;a++)n[a].length&&(a>0||!o)&&(n[a]=i+n[a]);return n.join("\n")},c.prototype.renderPartial=function(t,o,i,n){if(i){var a=this.getConfigTags(n),r=e(i)?i(t[1]):i[t[1]];if(null!=r){var s=t[6],c=t[5],l=t[4],d=r;0==c&&l&&(d=this.indentPartial(r,l,s));var u=this.parse(d,a);return this.renderTokens(u,o,i,d,n)}}},c.prototype.unescapedValue=function(e,t){var o=t.lookup(e[1]);if(null!=o)return o},c.prototype.escapedValue=function(e,t,o){var i=this.getConfigEscape(o)||y.escape,n=t.lookup(e[1]);if(null!=n)return"number"==typeof n&&i===y.escape?String(n):i(n)},c.prototype.rawValue=function(e){return e[1]},c.prototype.getConfigTags=function(e){return d(e)?e:e&&"object"==typeof e?e.tags:void 0},c.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!d(e)?e.escape:void 0};var y={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){b.templateCache=e},get templateCache(){return b.templateCache}},b=new c;return y.clearCache=function(){return b.clearCache()},y.parse=function(e,t){return b.parse(e,t)},y.render=function(e,t,o,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+function(e){return d(e)?"array":typeof e}(e)+'" was given as the first argument for mustache#render(template, view, partials)');return b.render(e,t,o,i)},y.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return p[e]}))},y.Scanner=r,y.Context=s,y.Writer=c,y})),define("stache",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("stache!locservices/ui/auto-generated/templates/search",["mustache"],(function(e){var t='<div class="ls-c-search ls-c-search">\n\n  <div class="ls-c-search__container" aria-autocomplete="list" role="combobox">\n    <input id="ls-c-search__input-label" type="text" class="ls-c-search__input gel-pica" placeholder="{{ placeholder }}" autocomplete="off" aria-owns="location-list" aria-description="{{ placeholder }}" aria-expanded="false" aria-autocomplete="list" role="combobox">\n  </div>\n\n  <button class="ls-c-search__submit ls-o-btn--right" title="{{ title }}">\n    <span class="ls-u-hidden">{{ submit }}</span>\n    <svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="M19.2 23.2c-1.9 1.1-4 1.6-6.2 1.6C6.2 24.8.9 19.5.9 12.7.9 5.7 6.1.5 13 .5c7 0 12.2 5.2 12.2 12.1 0 2.6-.8 5.1-2.3 7.1l8.4 8.4-3.6 3.6-8.5-8.5zM13 4c-4.8 0-8.5 3.7-8.5 8.6s3.7 8.6 8.5 8.6 8.5-3.7 8.5-8.6S17.8 4 13 4z"/></svg>\n  </button>\n\n  {{#hasClearButton}}\n    <button type="button" class="ls-c-search__clear-button">\n      <span class="ls-u-hidden">{{ clear }}</span>\n      <svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="m30 4.6-2.8-2.8L2 27.4l2.8 2.8L30 4.6zM4.8 1.8 1.9 4.7l25.2 25.5 2.9-2.9L4.8 1.8z"/></svg>\n    </button>\n  {{/hasClearButton}}\n\n</div>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("stache!locservices/ui/auto-generated/templates/search_form",["mustache"],(function(e){var t='<form method="post" action="#" class="ls-o-form">\n  {{{ searchHtml }}}\n</form>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/search",["locservices/ui/component/component","locservices/ui/utils/utils","stache!locservices/ui/auto-generated/templates/search","stache!locservices/ui/auto-generated/templates/search_form"],(function(e,t,o,i){"use strict";function n(e){var o,i=this;if((e=e||{}).componentId="search",i.hasForm=void 0===e.hasForm||e.hasForm,void 0===e.api)throw new Error("Search requires api parameter");i.api=e.api,i.setComponentOptions(e),i.isSearching=!1,i.hasAValidSearchTerm=!1,i.locationName=e.locationName,o="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,a(i.translations,i.container,o,i.hasForm),i.input=i.container.querySelector("input[type=text]"),i.input.addEventListener("input",(function(){i.input.value===i.locationName&&(i.input.value=""),i.checkInput()})),"string"==typeof i.locationName&&(i.input.value=i.locationName),o&&(this.hasClearControl=!0,i.container.querySelector(".ls-c-search__clear-button").addEventListener("click",(function(){i.clear()}))),i.componentWrapper=i.container.querySelector(".ls-c-search"),i.formWrapper=i.container.querySelector("form"),i.searchButton=i.container.querySelector(".ls-c-search__submit"),i.hasForm?i.formWrapper.addEventListener("submit",(function(e){e.preventDefault(),i.search(i.input.value)})):(i.input.addEventListener("keydown",(function(e){var t="which"in e?e.which:e.keyCode;13!==t&&10!==t||i.search(i.input.value)})),i.searchButton.addEventListener("click",(function(){i.search(i.input.value)}))),i.input.addEventListener("focus",(function(){i.input.value===i.locationName&&(i.input.value=""),i.emit("focus")})),i.container.querySelector(".ls-c-search__submit").addEventListener("click",(function(){t.trigger(i.input,"submit")})),this.events.on(i.eventNamespaceBase+":component:auto_complete:results",(function(){i.input.setAttribute("aria-expanded",!0)})),this.events.on(i.eventNamespaceBase+":component:search_results:results",(function(){i.input.setAttribute("aria-expanded",!0)})),this.events.on(i.eventNamespaceBase+":controller:inactive",(function(){void 0!==i.locationName&&(i.input.value=i.locationName)}))}n.prototype=new e,n.prototype.constructor=n,n.prototype.clear=function(){this.input.value="",this.input.setAttribute("aria-expanded",!1),this.hasAValidSearchTerm=!1,t.removeClass(this.componentWrapper,"ls-c-search--term"),this.hasClearControl&&t.removeClass(this.componentWrapper,"ls-c-search--clear"),this.emit("clear")},n.prototype.checkInput=function(){0<this.input.value.length?!1===this.hasAValidSearchTerm&&(this.hasAValidSearchTerm=!0,t.addClass(this.componentWrapper,"ls-c-search--term"),this.hasClearControl&&t.addClass(this.componentWrapper,"ls-c-search--clear")):this.hasAValidSearchTerm&&this.clear()},n.prototype.search=function(e){var t=this;(e=(e||"").replace(/^\s+|\s+$/g,""))&&!0!==t.isSearching&&(t.emit("start",[e]),t.isSearching=!0,t.api.search(e,{success:function(e){t.emit("end"),t.isSearching=!1,t.emit("results",[e.results,e.metadata])},error:function(){t.emit("end"),t.isSearching=!1,t.emit("error",[{code:"search.error.search",message:"There was an API error searching for "+e}])}}))};var a=function(e,t,n,a){var r;r=o(function(e){return{placeholder:e.get("search.placeholder"),submit:e.get("search.submit"),title:e.get("search.submit.title"),clear:e.get("search.clear"),hasClearButton:n}}(e)),a&&(r=i({searchHtml:r})),t.innerHTML=r};return n})),define("stache!locservices/ui/auto-generated/templates/message",["mustache"],(function(e){var t='<div class="ls-c-message{{#isCloseable}} ls-c-message--closeable{{/isCloseable}}">\n  <div class="ls-c-message__container">\n    <p class="gel-long-primer ls-c-message__content{{#isActive}} ls-c-message__content--active{{/isActive}}" aria-live="polite">{{&message}}</p>\n    {{#isCloseable}}\n    <button type="button" class="ls-c-message__close-btn ls-o-btn--icon-inline ls-o-btn--right ls-c-message-button">\n      <span class="ls-u-hidden">{{ translations.close }}</span>\n      <svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="m30 4.6-2.8-2.8L2 27.4l2.8 2.8L30 4.6zM4.8 1.8 1.9 4.7l25.2 25.5 2.9-2.9L4.8 1.8z"/></svg>\n    </button>\n    {{/isCloseable}}\n  </div>\n</div>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/message",["locservices/ui/component/component","locservices/ui/utils/utils","stache!locservices/ui/auto-generated/templates/message"],(function(e,t,o){"use strict";function i(e){n=this,(e=e||{}).componentId="message",n.outerDiv=e.outerDiv,n.state={active:!1,closeable:!1,sticky:!1,mylocation:!1},n.setComponentOptions(e),n.clear(),n.on("error",(function(e){"object"==typeof e&&(Array.isArray(e)&&(e=e[0]),e.code===a&&(n.state.mylocation=!0),n.state.closeable=e.closeable,e=void 0!==e.code?n.translations.get(e.code):e.message),n.set(e)})),n.listenTo("search","clear",(function(){n.clear()})),n.listenTo("search","start",(function(){n.clear()})),n.listenTo("geolocation","click",(function(){n.clear()})),n.listenTo("search_results","results",(function(e){if(Array.isArray(e)&&(e=e[0]),0!==e.totalResults||void 0===e.searchTerm){var t=e.offset+10;t=t>e.totalResults?e.totalResults:t,n.set("<strong>"+n.translations.get("message.total_results.formatted",{current:t,total:e.totalResults})+"</strong>")}else{var o=n.translations.get("search.error.no_results",{searchTerm:e.searchTerm});n.set(o)}}))}var n,a="user_locations.error.preferred_location",r=function(e,i,n,a,r){var s=document.querySelector(".li-c-user-profile-location"),c={message:a,isCloseable:n.active&&n.closeable,isActive:n.active,isSticky:n.sticky,isMyLocation:n.mylocation,translations:{close:i.get("message.action.close")}};if(!0===n.closeable&&!0===n.active)n.sticky||null===r||n.mylocation||r.insertAdjacentHTML("beforebegin",o(c)),n.mylocation&&s&&s.insertAdjacentHTML("beforebegin",o(c)),n.sticky=!0;else{e.innerHTML=o(c);var l=document.querySelector(".ls-c-message--closeable");l&&l.remove()}t.addClass(e,"gs-u-display-none")};return i.prototype=new e,i.prototype.constructor=i,i.prototype.clear=function(){this.state.active=!1,this.state.closeable=!1,this.state.sticky=!1,this.state.mylocation=!1,r(this.container,this.translations,this.state,"",this.outerDiv)},i.prototype.escape=function(e){return String(e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},i.prototype.unescape=function(e){return String(e).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")},i.prototype.unescapeWhitelist=function(e){for(var t=["strong"],o=new RegExp("&lt;(.*?)&gt;"),i=new RegExp("&lt;/(.*?)&gt;"),n=0;n<t.length;n++){var a=t[n],r=o.exec(e),s=i.exec(e);r&&r[1]===a&&(e=e.replace(new RegExp(r[0],"g"),this.unescape(r[0]))),s&&s[1]===a&&(e=e.replace(new RegExp(s[0],"g"),this.unescape(s[0])))}return e},i.prototype.set=function(e){if("string"!=typeof e)return!1;this.state.active=!0;var o=this.unescapeWhitelist(this.escape(e));r(this.container,this.translations,this.state,o,this.outerDiv),t.removeClass(this.container,"gs-u-display-none");var i=document.querySelector(".ls-c-message--closeable")||this.outerDiv.parentElement.querySelector(".ls-c-message--closeable"),a=i?i.querySelector(".ls-c-message__close-btn"):null;return null===a||(a.addEventListener("click",(function(e){e.preventDefault(),n.clear()})),!0)},i})),function(e,t){if("function"==typeof define&&define.amd)return define("locservices/core/geolocation",t);void 0===e.locservices&&(e.locservices={}),void 0===e.locservices.core&&(e.locservices.core={}),e.locservices.core.geolocation=t()}(this,(function(){function e(){return"geolocation"in navigator}return{isSupported:e(),getCurrentPosition:function(t,o,i){return i=i||{timeout:1e4,maximumAge:60,enableHighAccuracy:!0},!!e()&&(navigator.geolocation.getCurrentPosition(t,o,i),!0)}}})),define("stache!locservices/ui/auto-generated/templates/geolocation",["mustache"],(function(e){var t='<button type="button" title="{{ label }}" class="ls-ui-comp ls-c-geolocation gel-pica {{#wide}}ls-c-geolocation--wide{{/wide}}">\n  <span class="ls-u-hidden">{{ label }}</span>\n  <span aria-hidden="true" class="ls-c-geolocation__label">{{ label }}</span>\n  <svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="M16 31c8.5 0 15-6.5 15-15S24.5 1 16 1 1 7.5 1 16s6.5 15 15 15zm0-2.8C9.1 28.2 3.9 22.9 3.9 16S9.1 3.8 16 3.8c6.9 0 12.1 5.3 12.1 12.2S22.9 28.2 16 28.2zm-1.3.3h2.7l-.2-7.4h-2.3l-.2 7.4zM3.5 17.4l7.4-.2v-2.3l-7.4-.2v2.7zm11.4-6.6h2.3l.2-7.4h-2.7l.2 7.4zm13.7 6.6v-2.7l-7.4.2v2.3l7.4.2z"/></svg>\n</button>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/geolocation",["locservices/ui/component/component","locservices/core/geolocation","stache!locservices/ui/auto-generated/templates/geolocation"],(function(e,t,o){function i(e,t){return function(){return e.apply(t,arguments)}}function n(e){if(this.isSupported=t.isSupported,!1!==this.isSupported){if((e=e||{}).componentId="geolocation","object"!=typeof e.api)throw new Error("Gelocation requires an API option.");this.api=e.api;var i=this;this.setComponentOptions(e),this.emit("available");var n=this.translations.get("geolocation.button.label"),a={wide:e.wide,label:n};this.container.innerHTML=o(a),this._button=this.container.querySelector(".ls-c-geolocation"),this._button.addEventListener("click",(function(e){e.preventDefault(),i.emit("click"),i.reverseGeocode()}))}}return n.prototype=new e,n.prototype.constructor=n,n.prototype.reverseGeocode=function(){var e=this;this._button.setAttribute("aria-disabled","true"),this.emit("start"),t.getCurrentPosition(i((function(t){var o=t.coords.longitude,i=t.coords.latitude;e.api.reverseGeocode(i,o,{success:function(t){var o=t.results[0];o.isWithinContext?(e._button.removeAttribute("aria-disabled"),e.emit("location",[o])):e.emit("error",[{code:"geolocation.error.outsideContext",message:"Your location is not currently supported by this application"}])},error:function(){e.emit("error",[{code:"geolocation.error.http",message:"We were unable to make a location api request"}])}})}),this),i((function(e){var t="geolocation.error.browser",o="An error occurred obtaining the browsers position. Error code "+e.code;e.code===e.PERMISSION_DENIED&&(t+=".permission",~e.message.indexOf("secure origin")&&(t+=".insecure_origin")),this.emit("error",[{code:t,message:o}])}),this))},n})),define("stache!locservices/ui/auto-generated/templates/header",["mustache"],(function(e){var t='<div class="ls-o-header">\n  <p id="{{id}}" class="gel-long-primer">{{text}}</p>\n</div>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/header",["locservices/ui/component/component","stache!locservices/ui/auto-generated/templates/header"],(function(e,t){"use strict";function o(e){var t=this;(e=e||{}).componentId="header",t.setComponentOptions(e),t.id=e.id,t.title=e.title,t.render()}return o.prototype=new e,o.prototype.constructor=o,o.prototype.render=function(){this.container.innerHTML=t({id:this.id,text:this.title})},o})),define("stache!locservices/ui/auto-generated/templates/auto_complete",["mustache"],(function(e){var t='<div data-testid="auto-complete-list" class="ls-c-auto_complete ls-c-locations-list">\n<ul class="ls-c-locations-list-list" role="list" id="location-list">\n\t{{#locations}}\n\t<li class="ls-c-locations-list-item" aria-selected="false">\n\t\t<a class="ls-o-location ls-o-location--dark gel-pica" href="" data-id="{{ id }}">\n\t\t\t<span class="gel-long-primer" aria-hidden="true">{{&formattedName}}{{#container}}, {{container}}{{/container}}</span>\n\t\t\t<span class="ls-u-hidden">{{name}}{{#container}}, {{container}}{{/container}}</span>\n\t\t</a>\n\t</li>\n\t{{/locations}}\n</ul>\n</div>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/auto_complete",["locservices/ui/component/component","locservices/ui/utils/utils","stache!locservices/ui/auto-generated/templates/auto_complete"],(function(e,t,o){function i(e){var o=this;if((e=e||{}).componentId="auto_complete","object"!=typeof e.api)throw new Error("AutoComplete requires an api option");if(!(e.element instanceof HTMLElement))throw new Error("AutoComplete requires an element option");o._waitingForResults=!1,o._searchSubmitted=!1,o._timeoutId=void 0,o._highlightedSearchResultIndex=null,o._api=e.api,o.input=e.element,o.searchResultsData=[],o.currentSearchTerm="",o.registrationPostcode=null,o.delegates=e.delegates||null,o.setComponentOptions(e),function(e){e.on("results",(function(t){e.render(t.results,e.currentSearchTerm)}))}(o),function(e){e.listenTo("search","start",(function(){e._searchSubmitted=!0,e.requestedSearchTerm=void 0,e.currentSearchTerm=e.prepareSearchTerm(e.input.value)}))}(o),function(e){e.listenTo("search","clear",(function(){e.requestedSearchTerm=void 0,e.currentSearchTerm="",e.clear()}))}(o),function(e){e.input.addEventListener("keydown",(function(t){var o=t.keyCode;(o===n.escape||o===n.enter||o===n.downArrow||o===n.tab)&&e.verifyKey.call(e,t)}))}(o),function(e){e.input.addEventListener("keyup",(function(t){var o=t.keyCode;o===n.escape||o===n.enter||o===n.downArrow||o===n.tab||e.autoComplete()}))}(o),function(e){e.input.addEventListener("blur",(function(){for(var o=e.container.querySelectorAll("li"),i=0;i<o.length;i++){var n=o[i].querySelector("a");n&&t.removeClass(n,"ls-o-location--active")}}))}(o),o.input.setAttribute("autocomplete","off")}var n={enter:13,escape:27,upArrow:38,downArrow:40,tab:9},a=function(e){e.stopPropagation(),e.preventDefault()},r=function(e){var t=e.currentTarget,o=t.parentNode,i=Array.prototype.indexOf.call(o.children,t);this.highlightSearchResultByIndex(e,i,!1)},s=function(e){var o=e.currentTarget;t.removeClass(o.querySelector("a"),"ls-o-location--active")},c=function(e){var t=e.currentTarget,o=t.parentNode,i=Array.prototype.indexOf.call(o.children,t),n=this.searchResultsData[i];this.emit("location",[n,this.currentSearchTerm]),this.clear()},l=function(e){var t=e.keyCode,o=e.target.parentElement.parentElement,i=o.lastElementChild.querySelector("a"),a=o.length,r=o.firstElementChild.querySelector("a"),s=t===n.escape||t===n.enter||t===n.upArrow||t===n.downArrow||t===n.tab;if(e.target===i&&t===n.downArrow)return this.highlightSearchResultByIndex(e,a,!0),!1;e.target===r&&t===n.upArrow&&this.input.focus(),s&&this.verifyKey.call(this,e)};return i.prototype=new e,i.prototype.constructor=i,i.prototype.verifyKey=function(e){var t,o=this;if(window.event?t=window.event.keyCode:e&&(t=e.which),e.shiftKey&&t===n.tab)o.highlightPrevSearchResult(e);else switch(t){case n.escape:o.escapeKeyHandler();break;case n.enter:o.enterKeyHandler(e);break;case n.upArrow:o.highlightPrevSearchResult(e);break;case n.downArrow:case n.tab:o.highlightNextSearchResult(e)}},i.prototype.autoComplete=function(){var e=this,t=this.prepareSearchTerm(e.input.value),o=t.length<2;this._waitingForResults||o||t===e.currentSearchTerm?o&&e.currentSearchTerm&&(e.clear(!0),e.currentSearchTerm=""):(e.currentSearchTerm=t,clearTimeout(this._timeoutId),this._timeoutId=setTimeout((function(){!0!==e._searchSubmitted&&t!==e.requestedSearchTerm&&(e._waitingForResults=!0,e.requestedSearchTerm=t,e._api.autoComplete(t,{success:function(o){if(e._waitingForResults=!1,!1===e._searchSubmitted&&e.currentSearchTerm===e.requestedSearchTerm){var i=e.combineResultsWithDelegateData.call(e,t,o);e.emit("results",{results:i.results,metadata:i.metadata,searchTerm:t})}e.requestedSearchTerm=void 0},error:function(){e._waitingForResults=!1,!1===e._searchSubmitted&&e.currentSearchTerm===e.requestedSearchTerm&&e.emit("error",[{code:"auto_complete.error.search",message:"There was a problem searching for the search term"}]),e.requestedSearchTerm=void 0}}))}),500),this._searchSubmitted=!1)},i.prototype.setRegistrationPostcode=function(e){"object"==typeof e&&"name"in e&&"id"in e&&(e.name=e.name.slice(0,4),this.registrationPostcode=e),"string"==typeof e&&(this.registrationPostcode={id:e.slice(0,4),name:e.slice(0,4)})},i.prototype.getRegistrationPostcode=function(){return this.registrationPostcode},i.prototype.getMyLocationsDelegate=function(){return this.delegates&&"myLocationsDelegate"in this.delegates?this.delegates.myLocationsDelegate:null},i.prototype.getRecentLocationsDelegate=function(){return this.delegates&&"recentLocationsDelegate"in this.delegates?this.delegates.recentLocationsDelegate:null},i.prototype.combineResultsWithDelegateData=function(e,t){var o=this.getMyLocationsDelegate(),i=this.getRecentLocationsDelegate(),n=[],a=[],r=[],s=this.getRegistrationPostcode();if(null===this.delegates)return t;o&&(n=o.getLocationsFromCache(),null!==s&&(n=[s].concat(n)),a=this.searchLocationsArray(n,e,"myLocations")),i&&(n=i.getLocationsFromCache(),r=this.searchLocationsArray(n,e,"recentLocations"));for(var c=a.concat(r),l=[],d=0;d<c.length;d++)for(var u=c[d],h=0;h<t.results.length;h++)t.results[h].id===u.id&&l.push(h);for(var p=0;p<l.length;p++)t.results.splice(l[p],1);return t.results=a.concat(r,t.results),t},i.prototype.searchLocationsArray=function(e,t,o){for(var i=[],n=0;n<e.length;n++)e[n].name.slice(0,t.length).toLowerCase()===t.toLowerCase()&&(e[n].type=o,i.push(e[n]));return i.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),i},i.prototype.clear=function(e){this.searchResultsData=[],this._highlightedSearchResultIndex=null,this.container.innerHTML="",e&&this.emit("clear")},i.prototype.render=function(e,t){if(0!==e.length){this.searchResultsData=e,this.emit("render"),e=this.emboldenSearchTermInResults(t,e);var i=o({locations:e});this.container.innerHTML=i;for(var n=this.container.querySelectorAll("li"),d=0;d<n.length;d++){var u=n[d];u.querySelector("a").addEventListener("click",a),u.addEventListener("mouseover",r.bind(this)),u.addEventListener("mouseout",s.bind(this)),u.addEventListener("mousedown",c.bind(this)),u.addEventListener("keydown",l.bind(this))}}else this.clear()},i.prototype.emboldenSearchTermInResults=function(e,t){for(var o=e.toLowerCase().replace(/\b[a-z]/g,(function(e){return e.toUpperCase()})),i=0;i<t.length;i++)t[i].name&&(t[i].formattedName=t[i].name.replace(o,'<span class="gel-long-primer-bold">'+o+"</span>"));return t},i.prototype.escapeKeyHandler=function(){this.searchResultsData&&(null!==this._highlightedSearchResultIndex&&this.input.setAttribute("value",this.currentSearchTerm),this.clear(!0))},i.prototype.enterKeyHandler=function(e){if(null!==this._highlightedSearchResultIndex){e.preventDefault();var t=this.searchResultsData[this._highlightedSearchResultIndex];this.emit("location",[t,this.currentSearchTerm])}this.clear()},i.prototype.prepareSearchTerm=function(e){if("number"==typeof e)e=String(e);else if("string"!=typeof e)return"";return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},i.prototype.highlightNextSearchResult=function(e){if(0!==this.searchResultsData.length){var t=this._highlightedSearchResultIndex;if(null===t)t=0;else if(t++,this.searchResultsData.length<=t)return void this.removeSearchResultHighlight(!0);this.highlightSearchResultByIndex(e,t,!0)}},i.prototype.highlightPrevSearchResult=function(e){if(0!==this.searchResultsData.length){var t=this._highlightedSearchResultIndex;if(null===t)t=this.searchResultsData.length-1;else if(0>--t)return void this.removeSearchResultHighlight(!0);this.highlightSearchResultByIndex(e,t,!0)}},i.prototype.highlightSearchResultByIndex=function(e,o,i){e.preventDefault(),e.stopPropagation();var n=o+1,a=this.searchResultsData[o];if(void 0===a)return!1;var r=a.name;a.container&&(r+=", "+a.container),this.removeSearchResultHighlight(),this._highlightedSearchResultIndex=o,t.addClass(this.container.querySelector("li:nth-child("+n+") a"),"ls-o-location--active"),this.container.querySelector("li:nth-child("+n+") a").focus(),this.container.querySelector("li:nth-child("+n+")").setAttribute("aria-selected",!0),i&&(this.input.value=r)},i.prototype.removeSearchResultHighlight=function(e){var o=this.container.querySelector(".ls-o-location--active");o&&(this._highlightedSearchResultIndex=null,o.parentNode.setAttribute("aria-selected",!1),t.removeClass(o,"ls-o-location--active")),e&&(this.input.value=this.currentSearchTerm)},i})),define("stache!locservices/ui/auto-generated/templates/search_results",["mustache"],(function(e){var t='<div data-testid="search-results-list" class="ls-c-search_results ls-c-locations-list{{#isActive}} ls-c-locations-list--hidden{{/isActive}}">\n  <ul class="ls-c-locations-list-list" role="listbox" id="location-list" aria-expanded="{{expanded}}">\n    {{#locations}}\n    <li class="ls-c-locations-list-item" role="option">\n      <a class="ls-o-location ls-o-location--dark gel-pica" href="" data-id="{{ id }}">\n        <span class="gel-long-primer">{{name}}{{#container}}, {{container}}{{/container}}</span>\n      </a>\n    </li>\n    {{/locations}}\n  </ul>\n  {{#hasMoreResults}}\n    <button type="button" class="ls-o-toggle ls-o-toggle--down ls-o-location-more gel-long-primer-bold" title="{{ translations.show_more_title }}">\n      <span aria-hidden="true" class="ls-o-toggle__label">{{ translations.show_more }}</span>\n      <span class="gs-u-vh ls-u-hidden">{{ translations.show_more_title }}</span>\n      <span class="ls-o-toggle__icon"><svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="M17.7 22.6.9 4.2v6.7L16 27.8 31.1 11V4.3L14.3 22.6h3.4zm0 0L.9 4.2v6.7L16 27.8 31.1 11V4.3L14.3 22.6h3.4z"/></svg></span>\n    </button>\n  {{/hasMoreResults}}\n</div>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/search_results",["locservices/ui/component/component","stache!locservices/ui/auto-generated/templates/search_results"],(function(e,t){"use strict";function o(e){if((e=e||{}).componentId="search_results",this.persistResultsOnClick=!0===e.persistResultsOnClick,void 0===e.api)throw new Error("SearchResults requires api parameter");this.api=e.api,this.setComponentOptions(e),this._locations=[],this.offset=0,this._waitingForSearchResults=!1,this.listenTo("search","results",i.bind(this)),this.listenTo("search","clear",function(){this.clear()}.bind(this)),this.listenTo("search","start",function(){this.clear()}.bind(this)),this.render()}var i=function(e){if(this._waitingForSearchResults=!1,Array.isArray(e)&&(e={metadata:e[1],results:e[0]}),1===e.metadata.totalResults){var t=e.results[0];return this.emit("location",[t]),void this.emit("result-single",{searchTerm:e.metadata.search})}this.offset=e.metadata.start||0,this.searchTerm=e.metadata.search,this._locations=this._locations.concat(e.results),this.render(e.metadata.totalResults>10&&this.offset+10<e.metadata.totalResults),this.emit("results",{searchTerm:this.searchTerm,offset:this.offset,totalResults:e.metadata.totalResults})},n=function(e){this.emit("show_more:clicked"),e.preventDefault(),!0!==this._waitingForSearchResults&&(this._waitingForSearchResults=!0,this.api.search(this.searchTerm,{start:this.offset+10,success:i.bind(this)}))},a=function(e){e.preventDefault();var t=e.currentTarget.querySelector(".ls-o-location").getAttribute("data-id"),o=this._locations.filter((function(e){return e.id===t}))[0];this.emit("location:clicked",o);var i=this._locations.indexOf(o);return!0!==this.persistResultsOnClick&&this.clear(),this.emit("location",[o,i]),!1};return o.prototype=new e,o.prototype.constructor=o,o.prototype.render=function(e){e=e||!1,this.container.innerHTML=t({locations:this._locations,isActive:0===this._locations.length,hasMoreResults:e,translations:{show_more:this.translations.get("search_results.more"),show_more_title:this.translations.get("search_results.more_title")}});var o=this.container.querySelector(".ls-o-location-more");null!==o&&o.addEventListener("click",n.bind(this));for(var i=this.container.querySelector(".ls-c-locations-list-list"),r=i.querySelectorAll("li"),s=i.querySelector("li:nth-child("+(this.offset+1)+") a"),c=0;c<r.length;c++)r[c].addEventListener("click",a.bind(this),!1);null!==s&&s.focus()},o.prototype.clear=function(){this._locations=[],this._waitingForSearchResults=!1,this.render()},o})),define("stache!locservices/ui/auto-generated/templates/close_button",["mustache"],(function(e){var t='<button type="button" class="ls-ui-comp-close_button" title="{{ label }}"\n  ><span class="ls-u-hidden">{{ title }}</span\n  ><svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="m30 4.6-2.8-2.8L2 27.4l2.8 2.8L30 4.6zM4.8 1.8 1.9 4.7l25.2 25.5 2.9-2.9L4.8 1.8z"/></svg></button\n>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/close_button",["locservices/ui/component/component","stache!locservices/ui/auto-generated/templates/close_button"],(function(e,t){"use strict";function o(e){(e=e||{}).componentId="close_button",this.setComponentOptions(e),this.container.insertAdjacentHTML("beforeend",t({label:this.translations.get("close_button.label"),title:this.translations.get("close_button.label_locations")})),this.button=this.container.querySelector(".ls-ui-comp-close_button"),this.button.addEventListener("click",function(e){e.preventDefault(),this.emit("clicked")}.bind(this))}return o.prototype=new e,o.prototype.constructor=o,o})),define("stache!locservices/ui/auto-generated/templates/dialog",["mustache"],(function(e){var t='<div\n  tabindex="-1"\n  role="alertdialog"\n  data-role="dialog"\n  aria-describedby="{{#removeLabel}}{{#messageText}}{{ariaIdLabel}}-message{{/messageText}}{{/removeLabel}}"\n  aria-labelledby="{{ariaIdLabel}}-{{#removeLabel}}remove-label{{/removeLabel}}{{^removeLabel}}message{{/removeLabel}}"\n  class="ls-ui-comp-dialog"\n>\n  <p id="{{ariaIdLabel}}-message" class="gel-long-primer">{{& messageText}}</p>\n  <div role="group" aria-labelledby="{{ariaIdLabel}}-remove-label" class="ls-ui-comp-dialog-buttons">\n    {{#removeLabel}}\n    <p id="{{ariaIdLabel}}-remove-label" class="ls-ui-comp-dialog-remove-label gel-long-primer">{{removeLabel}}</p>\n    {{/removeLabel}}\n    <button type="button" class="ls-ui-comp-dialog-confirm large gel-long-primer-bold">{{confirmLabel}}</button>\n    <button type="button" class="ls-ui-comp-dialog-cancel large gel-long-primer-bold">{{cancelLabel}}</button>\n  </div>\n</div>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/dialog",["locservices/ui/component/component","stache!locservices/ui/auto-generated/templates/dialog","locservices/ui/utils/utils"],(function(e,t,o){"use strict";function i(e){e=e||{},this.setComponentOptions(e),this.prepend=!0===e.prepend&&e.prepend,this.confirmLabel=e.confirmLabel||this.translations.get("primary.cold_start.confirm"),this.cancelLabel=e.cancelLabel||this.translations.get("primary.cold_start.cancel"),this.removeLabel=void 0===e.removeLabel?this.translations.get("user_locations.dialog.remove"):e.removeLabel,this.editLabel=e.removeLabel||this.translations.get("user_locations.dialog.edit"),this.ifRemoveLabel=""!==e.removeLabel,this.callbacks={confirm:e.confirm,cancel:e.cancel};var o=t({messageText:e.message.replace(/{(.*?)}/g,"<strong>$1</strong>"),confirmLabel:this.confirmLabel,cancelLabel:this.cancelLabel,removeLabel:this.removeLabel,ariaIdLabel:this.eventNamespaceBase,ifRemoveLabel:this.ifRemoveLabel});this.container.insertAdjacentHTML(this.prepend?"afterbegin":"beforeend",o),this.container.querySelector(".ls-ui-comp-dialog").focus(),this.container.querySelector(".ls-ui-comp-dialog-confirm").addEventListener("click",r.bind(this)),this.container.querySelector(".ls-ui-comp-dialog-cancel").addEventListener("click",a.bind(this));var i=this.container;"function"==typeof i.scrollIntoViewIfNeeded&&i.scrollIntoViewIfNeeded()}var n=function(e){var t=this.container.parentNode;o.removeClass(t,"selected"),this.remove(),"function"==typeof e&&e()},a=function(){n.bind(this)(this.callbacks.cancel)},r=function(){n.bind(this)(this.callbacks.confirm)};return i.prototype=new e,i.prototype.constructor=i,i.prototype.remove=function(){var e=this.container.querySelector(".ls-ui-comp-dialog");e.parentNode.removeChild(e),this.emit("dialog:closed")},i})),define("locservices/ui/helpers/idcta_init",[],(function(){return function(e,t,o){"function"==typeof fetch&&"function"==typeof Promise&&"function"==typeof Promise.reject?function(e){try{var t=(e=e||{}).environment||"live",o=e.languageCode||"en-GB",i=encodeURI(document.location.href),n=e.userOrigin;return fetch("https://idcta"+("live"===t?"":"."+t)+".api.bbc.co.uk/idcta/init?buttonColour=white&buttonSize=medium&lang="+o+"&ptrt="+i+(n?"&userOrigin="+n:"")).then((function(e){return e.json()}))}catch(e){return Promise.reject(e)}}(e).then((function(e){(function(e){document.head.appendChild(document.createRange().createContextualFragment(e))})(e.inlineHead),function(e){e.forEach((function(e){var t=document.createElement("link");t.href=e,t.rel="stylesheet",document.head.appendChild(t)}))}(e.css),t(e.html)})).catch((function(e){o(e)})):o(new Error("Promises or fetch not supported"))}})),define("stache!locservices/ui/auto-generated/templates/id_signin",["mustache"],(function(e){var t='<div class="ls-c-id-signin ls-o-id-signin">\n  <div class="ls-c-id-signin__wrapper">\n    <h4 class="gel-double-pica-bold" id="{{ namespace }}-title">{{ translations.title }}</h4>\n    <p class="gel-body-copy ls-c-id-signin__description-and-prompt" id="{{ namespace }}-description">{{ translations.description\n      }} {{ translations.prompt }}</p>\n    {{{ html.idcta }}}\n  </div>\n</div>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("stache!locservices/ui/auto-generated/templates/id_signin_fallback",["mustache"],(function(e){var t='<div class="ls-c-id-signin ls-o-id-signin">\n  <div class="ls-c-id-signin__wrapper">\n    <h4 class="gel-double-pica-bold" id="{{ namespace }}-title">{{ translations.title }}</h4>\n    <p class="gel-body-copy ls-c-id-signin__description" id="{{ namespace }}-description">{{ translations.description\n      }}</p>\n    <p class="gel-long-primer ls-c-id-signin__prompt"><b>{{ translations.prompt }}</b></p>\n  </div>\n</div>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/id_signin",["locservices/ui/component/component","locservices/ui/helpers/idcta_init","stache!locservices/ui/auto-generated/templates/id_signin","stache!locservices/ui/auto-generated/templates/id_signin_fallback"],(function(e,t,o,i){function n(e){(e=e||{}).componentId="id-signin",this.setComponentOptions(e);var n=e.environment||"live",r=this.container,s=this.eventNamespaceBase,c=this.translations,l=c.getLanguageCode(),d=e.userOrigin;t({environment:n,languageCode:l,userOrigin:d},(function(e){r.innerHTML=a(o,s,c,e)}),(function(){r.innerHTML=a(i,s,c)}))}var a=function(e,t,o,i){return e({namespace:t,html:{idcta:i},translations:{title:o.get("follow_button.nocta.title"),description:o.get("follow_button.nocta.description"),prompt:o.get("user_profile.cta_prompt")}})};return n.prototype=new e,n.prototype.constructor=n,n})),define("stache!locservices/ui/auto-generated/templates/user_profile_location",["mustache"],(function(e){var t='<div class="li-c-user-profile-location">\n  <div class="li-c-user-profile-location__row">\n    <a href="#{{ location.id }}" data-id="{{ location.id }}" class="ls-o-location ls-o-location--home">\n      <div class="ls-o-location--home__icon-home"\n        ><svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="M16 3 4 13v16h10v-8h4v8h10V13z"/></svg></div>\n      <strong class="gel-pica-bold"\n        >{{ translations.label }}</strong\n      ><span class="gel-pica"\n        >, {{ location.name }}</span>\n    </a>\n    <button\n      type="button"\n      class="li-c-user-profile-location__icon-edit ls-o-btn ls-o-btn--right ls-o-btn--icon-inline"\n    ><svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="m2.4 28.6 1 1L13.9 27l15.8-15.7-8.9-8.9L5 18.1 2.4 28.6zM15 25.2l-8.3-8.3-.5 2.3 6.6 6.6 2.2-.6zm-1-.3L3.5 27.5l.9.9L7.1 18l-1.6 2.8L21.8 4.5l-1.4.6 6.7 6.6.4-1.5-16.3 16.3 2.8-1.6zm-6.7 1.8-2.1-2.1-1.1 3.2 3.2-1.1z"/></svg><span class="ls-u-hidden">{{ translations.edit }}</span\n    ></button>\n    <div class="li-c-user-profile-location__dialog"></div>\n  </div>\n</div>\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/user_profile_location",["locservices/ui/component/component","locservices/ui/utils/utils","locservices/ui/component/dialog","stache!locservices/ui/auto-generated/templates/user_profile_location"],(function(e,t,o,i){"use strict";function n(e){var t=this;(e=e||{}).componentId="user_profile_location",t.url=e.url,t.location=e.location,t.setComponentOptions(e),t._isDisplayingDialog=!1,this.container.innerHTML=i({location:t.location,translations:{label:this.translations.get("user_profile_location.label"),edit:this.translations.get("user_profile_location.edit")}}),this.container.querySelector("button").addEventListener("click",function(e){if(e.preventDefault(),this._isDisplayingDialog)return!1;this.displayDialog(this.container.querySelector(".li-c-user-profile-location__dialog"),this.translations.get("user_locations.dialog.home.redirect"))}.bind(this)),this.container.querySelector(".ls-o-location").addEventListener("click",function(e){e.preventDefault(),this.emit("location",[this.location])}.bind(this)),t.listenTo("locations_list","dialog-removed",function(){this._isDisplayingDialog=!1}.bind(this)),t.listenTo("locations_list","dialog-displayed",function(){this._isDisplayingDialog=!0}.bind(this))}var a="ls-ui-comp-user_locations-location-with-dialog",r=function(){var e="?ptrt="+encodeURI(document.location.href),t=this.url;this.removeDialog(),window.location.href=t+e};return n.prototype=new e,n.prototype.constructor=n,n.prototype.displayDialog=function(e,i){return!this._isDisplayingDialog&&(this._dialogElement=e,this._isDisplayingDialog=!0,t.addClass(e,a),this._dialog=new o({container:this._dialogElement,translations:this.translations,message:i,confirmLabel:this.translations.get("user_locations.dialog.settings"),cancelLabel:this.translations.get("user_locations.dialog.cancel_settings"),removeLabel:"",confirm:r.bind(this),cancel:this.removeDialog.bind(this)}),this.emit("dialog-displayed"),!0)},n.prototype.removeDialog=function(){this._isDisplayingDialog&&this._dialog&&this._dialogElement&&t.removeClass(this._dialogElement,a),this._isDisplayingDialog=!1,this._dialog=void 0,this._dialogElement=void 0,this.emit("dialog-removed")},n})),define("locservices/ui/utils/stats",["locservices/ui/mediator/events","locservices/core/geolocation","locservices/core/recent_locations","locservices/core/cookies","locservices/core/bbc_cookies","locservices/core/preferred_location","istats-1"],(function(e,t,o,i,n,a,r){"use strict";function s(e,t,o){var i={},n="location_"+t;return"object"!=typeof e||(i.locationId=e.id,i.locationPlaceType=e.placeType||null,i.locationCountry=e.country||null,i.locationName=e.name||null,e.container&&(i.locationName+=", "+e.container),i.location_namespace=n,g&&(i.addedToRecentLocations=!0),o&&(i.id_mylocationname=e.name),o&&e.placeType===d&&(i.id_mylocationtype=e.name),i.module_name=l),i}function c(e,t){if(t=t||{},this.namespace=t.namespace||"locservices:ui",u||(this.logUserActionEvent("locservices_user",b),u=!0),!e||"object"!=typeof e)throw new Error("The stats module requires an instance of an client");this._locservCookie=p,this._client=e,this._registeredNamespaces={},this.registerNamespace(this.namespace)}var l="location",d="district",u=!1,h=new a,p=h.getLocServCookieLocation(),m=h.isLocServCookieSet()&&p&&null!==p,f=new o,g=f.isSupported(),v=g?f.all():[],_=function(){var e="bbc-locservices-ui-js";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}(),y=m?Array.isArray(p.news)?p.news[0]:p.news:null,b={capability_geolocation:t.isSupported,capability_recent_locations:f.isSupported(),capability_local_storage:_,capability_cookies_enabled:(new i).isSupported(),capability_bbccookies_preference_enabled:(new n).isPersonalisationDisabled(),has_locserv_cookie:m,has_recent_locations:g&&v.length>0,recent_locations_total:g?v.length:0,locserv_nation:m?p.nation:"",locserv_news_region:m&&y?y.name:""};return c.prototype.registerNamespace=function(t){return!0!==this._registeredNamespaces[t]&&(e.on(t+":component:search:focus",function(){var e="location_"+t;this.logUserActionEvent("search-start",{location_namespace:e,module_name:l})}.bind(this)),e.on(t+":component:search_results:results",function(e){var o,i="location_"+t;o="results-"+(0===e.totalResults?"null":"multiple"),this.logUserActionEvent(o,{searchTerm:e.searchTerm,location_namespace:i,module_name:l})}.bind(this)),e.on(t+":component:search_results:result-single",function(e){var o="location_"+t;this.logUserActionEvent("results-single",{searchTerm:e.searchTerm,location_namespace:o,module_name:l})}.bind(this)),e.on(t+":component:search_results:show_more:clicked",function(){var e="location_"+t;this.logUserActionEvent("results-show-more",{location_namespace:e,module_name:l})}.bind(this)),e.on(t+":component:search_results:location:clicked",function(e){var o;o=Array.isArray(e)?e[0]:e,this.logUserActionEvent("results-select",s(o,t))}.bind(this)),e.on(t+":component:auto_complete:results",function(e){var o="location_"+t;this.logUserActionEvent("autocomplete-search",{searchTerm:e.searchTerm,location_namespace:o,module_name:l})}.bind(this)),e.on(t+":component:auto_complete:location",function(e){Array.isArray(e)&&(e={location:e[0],searchTerm:e[1]}),this.logUserActionEvent("autocomplete-select",s(e.location,t))}.bind(this)),e.on(t+":component:geolocation:click",function(){var e="location_"+t;this.logUserActionEvent("geolocation-click",{location_namespace:e,module_name:l})}.bind(this)),e.on(t+":component:geolocation:location",function(e){var o=Array.isArray(e)?e[0]:e;this.logUserActionEvent("geolocation-select",s(o,t))}.bind(this)),e.on(t+":error",function(e){var o=Array.isArray(e)?e[0].code:e.code,i="location_"+t;"geolocation.error.browser.permission"!==o&&"geolocation.error.browser.permission.insecure_origin"!==o||this.logUserActionEvent("geolocation-null",{location_namespace:i,module_name:l})}.bind(this)),e.on(t+":component:follow_button:location_added",function(e){var o=Array.isArray(e)?e[0]:e;this.logUserActionEvent("add",s(o,t,!0),!0)}.bind(this)),e.on(t+":component:follow_button:location_removed",function(e){var o=Array.isArray(e)?e[0]:e;this.logUserActionEvent("remove",s(o,t,!0),!0)}.bind(this)),e.on(t+":component:locations_list:location_removed:list",function(e){var o=Array.isArray(e)?e[0]:e;this.logUserActionEvent("remove-list",s(o,t,!0),!0)}.bind(this)),e.on(t+":component:locations_list:mylocation:searched",function(e){var o="location_"+t;this.logUserActionEvent("select-reg-search",{location_namespace:o,searchTerm:e,module_name:l},!0)}.bind(this)),e.on(t+":component:locations_list:location",function(e){var o="location_"+t;this.logUserActionEvent("select",{location:e,location_namespace:o,module_name:l},!0)}.bind(this)),e.on(t+":component:user_profile_location:location",function(e){var o=Array.isArray(e)?e[0]:e;this.logUserActionEvent("select-reg",s(o,t,!0),!0)}.bind(this)),this._registeredNamespaces[t]=!0,!0)},c.prototype.logUserActionEvent=function(e,t,o){if("search_no_results"!==e){var i=!0===o?"mylocations":l;r.log(e,i,t||{})}},c.prototype.getStatsAppName=function(){var e=[],t=this._client._getLabels();return e=[this._client.getSite(),t.app_name||"",t.app_type||""].filter((function(e){if(""!==e&&void 0!==e)return!0})),e.join("-")},c})),define("stache!locservices/ui/auto-generated/templates/locations_list",["mustache"],(function(e){var t='<div data-testid="locations-list" class="l-c-locations-list">\n    {{#showHeader}}\n    <div>\n        <div class="ls-o-header">\n            {{#headerText}}\n            <p id="{{headerId}}" class="gel-long-primer">{{headerText}}</p>\n            {{/headerText}}\n            {{#showClearAll}}\n            <button\n                type="button"\n                class="ls-c-locations-list__clear-all-btn ls-o-btn ls-o-btn--icon ls-o-btn--clear-all gel-brevier-bold"\n                data-clear-all="true"\n            >{{clearAllLabel}}</button\n            >\n            {{/showClearAll}}\n        </div>\n    </div>\n    {{/showHeader}}\n    <ul class="ls-c-locations-list-list" role="list" aria-describedby="{{headerId}}" aria-expanded="{{isActive}}">\n        {{#locations}}\n        <li class="ls-c-locations-list-item {{visibility}}">\n            <a href="#{{id}}" data-id="{{id}}" class="ls-o-location{{#isUserProfileLocation}} ls-o-location--home {{/isUserProfileLocation}} gel-pica">\n                <strong class="gel-long-pica-bold">{{name}}</strong><span class="gel-long-pica">, {{container}}</span>\n            </a>\n            <button type="button" data-id="{{id}}" data-action="{{action}}" class="ls-c-locations-list__close-btn ls-o-btn--icon-inline ls-o-btn--right">\n                <span class="ls-u-hidden">{{removeButtonLabel}}</span>\n                <svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="m30 4.6-2.8-2.8L2 27.4l2.8 2.8L30 4.6zM4.8 1.8 1.9 4.7l25.2 25.5 2.9-2.9L4.8 1.8z"/></svg>\n            </button>\n        </li>\n        {{/locations}}\n    </ul>\n    {{#showMoreButton}}\n    <button type="button" class="ls-o-toggle gel-long-primer-bold ls-o-location-more {{buttonClass}}" title="{{showMoreTitle}}"\n        ><span aria-hidden="true">{{showMoreLabel}}</span><span class="gs-u-vh ls-u-hidden">{{showMoreTitle}}</span\n        ><span class="ls-o-toggle__icon ls-o-toggle__icon--show-more"><svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="M17.7 22.6.9 4.2v6.7L16 27.8 31.1 11V4.3L14.3 22.6h3.4zm0 0L.9 4.2v6.7L16 27.8 31.1 11V4.3L14.3 22.6h3.4z"/></svg></span\n        ><span class="ls-o-toggle__icon ls-o-toggle__icon--show-less"><svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="M17.7 9.4.9 27.8v-6.7L16 4.2 31.1 21v6.7L14.3 9.4h3.4zm0 0L.9 27.8v-6.7L16 4.2 31.1 21v6.7L14.3 9.4h3.4z"/></svg></span\n    ></button>\n    {{/showMoreButton}}\n</div>\n\n{{#renderNoLocationsMessage}}\n<div class="ls-o-location-message">\n    <div class="gel-pica">\n        {{& noLocationsMessage}}\n    </div>\n</div>\n{{/renderNoLocationsMessage}}\n';return e.parse(t),function(o,i){return e.render(t,o,i)}})),define("locservices/ui/component/locations_list",["locservices/ui/component/component","locservices/ui/component/dialog","locservices/ui/component/header","stache!locservices/ui/auto-generated/templates/locations_list","locservices/ui/utils/utils"],(function(e,t,o,i,n){"use strict";function a(e){if(e){var t=e.querySelector("a");t&&t.focus()}}function r(e){var t=this;if((e=e||{}).componentId="locations_list",t.namespace=e.componentId,t.setComponentOptions(e),t.delegate=e.delegate,null===t.delegate)return!1;t.container=e.container,t.headerId=e.headerId,t.headerText=e.headerText,t.noLocationsMessage=e.noLocationsMessage||null,t.showMoreButton=e.showMoreButton||!1,t.showRemoveMessage=e.showRemoveMessage||!1,t.removeButtonLabel=e.removeButtonLabel||"Remove",t.userProfileLocation=e.userProfileLocation?e.userProfileLocation.location:null,t.title=e.title,t.showClearAll=e.showClearAll,t.showingMore=!1,t.maxShow=3,t.action=e.action,t.SHOW_THREE_MAX=599,t.SHOW_VALUES={narrow:2,wide:4},t.MYLOCATION_ACTION="mylocation",t.listenTo("user_profile_location","dialog-removed",(function(){t._isDisplayingDialog=!1})),t.listenTo("user_profile_location","dialog-displayed",(function(){t._isDisplayingDialog=!0})),t.listenTo("search_results","results",(function(e){t.isMyLocations()&&t.emit("mylocation:searched",e.searchTerm)})),t.delegate.on("location_added",(function(e){Array.isArray(e)&&(e=e[0]),t.onLocationsLoaded(e)})),t.delegate.on("location_removed:from-list",(function(e){var o=e[1]||null;Array.isArray(e)&&(e=e[0]),t.isMyLocations()&&t.emit("location_removed:list",[o]),t.onLocationsLoaded(e)})),t.delegate.on("location_removed",(function(e){Array.isArray(e)&&(e=e[0]),t.onLocationsLoaded(e)})),window.addEventListener("resize",(function(){t.maxShow!==t.determineMaxShow()&&!1!==t.showMoreButton&&t.resize.call(t)})),window.addEventListener("orientationchange",(function(){t.maxShow!==t.determineMaxShow()&&!1!==t.showMoreButton&&t.resize.call(t)})),t.render(),t.eventListeners(t)}var s=function(e){var t=e.element,o=e.classToMatch,i=e.parentLevelsToCheck||0;return n.hasClass(t,o)?t:i>0&&t.parentElement?s({element:t.parentElement,classToMatch:o,parentLevelsToCheck:i-1}):void 0};return r.prototype=new e,r.prototype.constructor=r,r.prototype.resize=function(){var e=this;return e._isDisplayingDialog=!1,window.innerWidth<=e.SHOW_THREE_MAX?void this.onLocationsLoaded(e.delegate.getLocationsFromCache().slice(0,3)):window.innerWidth>=e.SHOW_THREE_MAX?void this.onLocationsLoaded(e.delegate.getLocationsFromCache()):void 0},r.prototype.onLocationsLoaded=function(e){var t,o,n,r,s,c=!!this.container.contains(document.activeElement);this.maxShow=this.determineMaxShow(),0===e.length?(this.renderNoLocationsMessage=!0,!0===this.showClearAll&&(s=!1)):(this.renderNoLocationsMessage=!1,!0===this.showClearAll&&(s=!0)),!0===this.showMoreButton&&e.length<=this.maxShow?n=!1:!0===this.showMoreButton&&e.length>this.maxShow&&(n=!0),!0===this.showMoreButton&&e.length>this.maxShow&&(t=this.showingMore?this.translations.get("locations_list.action.show_less"):this.translations.get("locations_list.action.show_more"),o=this.showingMore?this.translations.get("locations_list.action.show_less_title"):this.translations.get("locations_list.action.show_more_title"),r=this.showingMore?"ls-o-toggle--up":"ls-o-toggle--down"),e.map(function(e,t){return!1===this.showingMore&&!0===this.showMoreButton&&t+1>this.maxShow?e.visibility="ls-c-locations-list-item--hidden":e.visibility="",e}.bind(this));var l=i({buttonClass:r,clearAllLabel:this.translations.get("locations_list.action.clear_all"),headerId:this.headerId,headerText:this.headerText,listId:this.listId,locations:e,noLocationsMessage:this.noLocationsMessage,removeButtonLabel:this.removeButtonLabel,removeButton:this.translations.get("locations_list.action.remove"),renderNoLocationsMessage:this.renderNoLocationsMessage,showClearAll:s,showHeader:s||Boolean(this.headerText),showMoreButton:n,showMoreLabel:t,showMoreTitle:o});this.container.innerHTML=l,c&&a(this.container)},r.prototype.onFailedtoLoadLocations=function(){this.container.innerHTML="",this.emit("error",[{closeable:!0,code:"user_locations.error.preferred_location",message:this.translations.get("user_locations.error.preferred_location")}])},r.prototype.selectLocationById=function(e){this.delegate.selectLocationById(e)},r.prototype.render=function(){this.delegate.getLocations(this.onLocationsLoaded.bind(this),this.onFailedtoLoadLocations.bind(this))},r.prototype.isUserProfileLocation=function(e){return null!==this.userProfileLocation&&this.userProfileLocation.id===e},r.prototype.displayDialog=function(e,o,i,a,r){var s=this;return!this._isDisplayingDialog&&(this._isDisplayingDialog=!0,this._dialogElement=e,n.addClass(e,"ls-ui-comp-user_locations-location-with-dialog"),this._dialog=new t({container:e,translations:this.translations,message:o,confirmLabel:this.translations.get("user_locations.dialog.yes"),cancelLabel:this.translations.get("user_locations.dialog.no"),confirm:function(){s.removeDialog(),"function"==typeof i&&i()},cancel:function(){s.removeDialog()},prepend:a,removeLabel:r||void 0}),this.emit("dialog-displayed"),!0)},r.prototype.removeDialog=function(){this._isDisplayingDialog&&this._dialog&&this._dialogElement&&(n.removeClass(this._dialogElement,"ls-ui-comp-user_locations-location-with-dialog"),a(this._dialog.container)),this.enableCloseButtons(),this.enableClearAllButtons(),this._isDisplayingDialog=!1,this._dialog=void 0,this._dialogElement=void 0,this.emit("dialog-removed")},r.prototype.isMyLocations=function(){return"my_locations"===this.delegate.delegateId},r.prototype.clearAllLocations=function(){for(var e=this,t=e.container.querySelectorAll(".ls-o-location"),o=function(){},i=0;i<t.length;i++)e.delegate.removeLocationFromLocationsList(t[i].getAttribute("data-id"),o,e.onFailedtoLoadLocations.bind(e))},r.prototype.onRemoveMyLocation=function(e,t){this.delegate.removeLocationFromLocationsList(t,(function(){}),this.onFailedtoLoadLocations.bind(this))},r.prototype.getWindowWidth=function(){return document.documentElement.clientWidth},r.prototype.determineMaxShow=function(){return this.getWindowWidth()>=this.SHOW_THREE_MAX?this.SHOW_VALUES.wide:this.SHOW_VALUES.narrow},r.prototype.enableButtonsWithClass=function(e,t){var o=this.container.querySelectorAll("."+e);Array.prototype.forEach.call(o,(function(e){!1===t?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled")}))},r.prototype.enableCloseButtons=function(e){this.enableButtonsWithClass("ls-c-locations-list__close-btn",e)},r.prototype.enableClearAllButtons=function(e){this.enableButtonsWithClass("ls-c-locations-list__clear-all-btn",e)},r.prototype.disableCloseButtons=function(){this.enableCloseButtons(!1)},r.prototype.disableClearAllButtons=function(){this.enableClearAllButtons(!1)},r.prototype.eventListeners=function(e){e.container.addEventListener("click",(function(t){if(t.target){var o=s({element:t.target,classToMatch:"ls-o-location",parentLevelsToCheck:1});o&&(e.emit("clicked"),e.emit("location",o.innerText),t.preventDefault(),t.stopPropagation(),e.selectLocationById(o.getAttribute("data-id")));var i=s({element:t.target,classToMatch:"ls-c-locations-list__close-btn",parentLevelsToCheck:2});if(i){var n,a,r;if(t.preventDefault(),t.stopPropagation(),e._isDisplayingDialog)return!1;if(e.disableCloseButtons(),a=i.parentNode,!(n=String(i.getAttribute("data-id"))))return;r=e.delegate._locations.filter((function(e){return e.id===n}))[0],e.action===e.MYLOCATION_ACTION?e.displayDialog(a,e.translations.get("user_locations.dialog.remove_preferred",{name:r.name}),(function(){e.onRemoveMyLocation(t,n)})):""===e.action&&e.onRemoveMyLocation(t,n)}else{var c=s({element:t.target,classToMatch:"ls-c-locations-list__clear-all-btn",parentLevelsToCheck:1});c&&(t.preventDefault(),t.stopPropagation(),e.disableClearAllButtons(),e.displayDialog(c.parentElement.parentElement,e.translations.get("locations_list.clear_recents"),e.clearAllLocations.bind(e),!1,e.translations.get("user_locations.dialog.remove")));var l=s({element:t.target,classToMatch:"ls-o-location-more",parentLevelsToCheck:3});if(l){var d=l;t.preventDefault(),t.stopPropagation(),d.classList.toggle("ls-o-toggle--up"),d.classList.toggle("ls-o-toggle--down"),!0!==e.showingMore?(d.innerHTML=e.translations.get("locations_list.action.show_less"),e.showingMore=!0):(d.innerHTML=e.translations.get("locations_list.action.show_more"),e.showingMore=!1),e.onLocationsLoaded(e.delegate.getLocationsFromCache())}}}}),!0)},r})),define("text!locservices/ui/svg-inline/gel-icon-labels-info.svg",[],(function(){return'<svg fill="currentColor" width="2em" height="2em" focusable="false" aria-hidden="true" viewBox="0 0 32 32"><path d="M16 31c8.5 0 15-6.5 15-15S24.5 1 16 1 1 7.5 1 16s6.5 15 15 15zm-2.2-5.5V12.7h4.4v12.9h-4.4zM16 10c-1.7 0-2.7-.9-2.7-2.4s1-2.4 2.7-2.4 2.7.9 2.7 2.4-1 2.4-2.7 2.4z"/></svg>\n'})),define("locservices/ui/controller/primary",["locservices/ui/mediator/events","locservices/core/api","locservices/core/preferred_location","locservices/core/registration_postcode","locservices/core/bbc_cookies","locservices/core/cookies","idcta/config","idcta/idcta-1","locservices/ui/component/search","locservices/ui/component/message","locservices/ui/component/geolocation","locservices/ui/component/header","locservices/ui/component/auto_complete","locservices/ui/component/search_results","locservices/ui/component/close_button","locservices/ui/component/dialog","locservices/ui/component/id_signin","locservices/ui/component/user_profile_location","locservices/ui/utils/utils","locservices/ui/utils/stats","locservices/ui/component/locations_list","text!locservices/ui/svg-inline/gel-icon-labels-info.svg"],(function(e,t,o,i,n,a,r,s,c,l,d,u,h,p,m,f,g,v,_,y,b,w){"use strict";function L(i){function f(){e.on(w.namespace+":error",D.onError),e.on(w.namespace+":component:search:focus",D.onActive),e.on(w.namespace+":component:search:start",D.onActive),e.on(w.namespace+":component:geolocation:click",D.onActive),e.on(w.namespace+":component:search:clear",D.onInputInteractionEnd),e.on(w.namespace+":component:search:end",D.onInputInteractionEnd),e.on(w.namespace+":component:auto_complete:results",D.onInputInteractionEnd),e.on(w.namespace+":component:search:results",D.onSearchResults),e.on(w.namespace+":component:search_results:results",D.onSearchResults),e.on(w.namespace+":component:auto_complete:render",D.onAutoCompleteResults),e.on(w.namespace+":component:auto_complete:clear",D.onResultsClear),e.on(w.namespace+":component:search:clear",D.onResultsClear),e.on(w.namespace+":component:geolocation:start",D.onResultsClear),e.on(w.namespace+":component:geolocation:location",D.onLocation),e.on(w.namespace+":component:auto_complete:location",D.onLocation),e.on(w.namespace+":component:user_locations:location",D.onLocation),e.on(w.namespace+":component:search_results:location",D.onLocation),e.on(w.namespace+":component:user_profile_location:location",D.onProfileLocation),e.on(w.namespace+":component:geolocation:available",D.onGeolocationAvailable),e.on(w.namespace+":component:close_button:clicked",D.onClose),e.on(w.namespace+":delegate:my_locations:location",(function(t){Array.isArray(t)&&(t=t[0]),e.emit(w.namespace+":controller:location",[t])})),e.on(w.namespace+":delegate:recent_locations:location",(function(t){Array.isArray(t)&&(t=t[0]),e.emit(w.namespace+":controller:location",[t])}));var t=_.createElement("div","ls-ui-ctrl-primary-search");w.inside.appendChild(t),w.search=new c({api:w.api,translations:w.translations,eventNamespace:w.namespace,container:t,locationName:i.locationName});var o=_.createElement("div","ls-ui-message");w.inside.appendChild(o),w.message=new l({translations:w.translations,eventNamespace:w.namespace,container:o,outerDiv:w.inside}),w.myLocationsDelegate&&!w.myLocationsDelegate.isSupported()&&w.isLoggedIn&&e.emit("error",[{closeable:!0}]);var n=document.createElement("div");w.inside.appendChild(n),T&&(w.geolocation=new d({api:w.api,translations:w.translations,eventNamespace:w.namespace,container:n}));var a=document.createElement("div");w.inside.appendChild(a),w.autoComplete=new h({api:w.api,translations:w.translations,eventNamespace:w.namespace,element:w.search.input,container:a,delegates:{myLocationsDelegate:w.myLocationsDelegate,recentLocationsDelegate:w.recentLocationsDelegate}}),w.results=new p({api:w.api,translations:w.translations,eventNamespace:w.namespace,container:a});var s=_.createElement("div","ls-ui-personalisation-container");if(w.inside.appendChild(s),!w.isLoggedIn||w.isLoggedIn&&w.isOverEighteen()){var f=document.createElement("div");s.appendChild(f),w.header=new u({id:"my-locations-header",translations:w.translations,title:w.translations.get("header.my_locations"),container:f,eventNamespace:w.namespace})}if(!w.isLoggedIn){var y=document.createElement("div");s.appendChild(y),w.signin=new g({environment:w.environment,translations:w.translations,eventNamespace:w.namespace,container:y,userOrigin:w.userOrigin})}if(w.isLoggedIn&&void 0!==w.myLocationsDelegate){if(w.postcode=w.createPostcodeObject(),w.postcode.isAvailable()&&w.isOverEighteen()){var C=w.postcode.get(),k=document.createElement("div");s.appendChild(k),w.userProfileLocation=new v({translations:w.translations,eventNamespace:w.namespace,container:k,url:r.settings_url,location:{id:C,name:C}}),w.autoComplete.setRegistrationPostcode(C)}if(w.isOverEighteen()){var E=_.createElement("div","#my-locations-list");s.appendChild(E),w.myLocationsList=new b({action:S,container:E,eventNamespace:w.namespace,delegate:w.myLocationsDelegate,headerId:"my-locations-header",noLocationsMessage:w.translations.get("locations_list.no_my_locations"),showClearAll:!1,showMoreButton:!0,showRemoveMessage:!0,translations:w.translations,userProfileLocation:w.userProfileLocation})}}if(void 0!==w.recentLocationsDelegate&&null!==w.recentLocationsDelegate){var I=_.createElement("div","#recent-locations-list");s.appendChild(I),w.recentLocationsList=new b({action:"",container:I,headerId:"recent-locations-header",headerText:w.translations.get("header.recent_locations"),delegate:w.recentLocationsDelegate,eventNamespace:w.namespace,noLocationsMessage:w.translations.get("locations_list.no_recent_locations"),showClearAll:!0,title:"Recent Searches",translations:w.translations})}if(w.infoLink&&s.appendChild(A({href:w.infoLink,text:w.translations.get("primary.info_link")})),L)_.addClass(w.container,"ls-ui-ctrl-open"),D.onActive();else{var B=document.createElement("div");w.inside.appendChild(B),w.closeButton=new m({translations:w.translations,eventNamespace:w.namespace,container:B})}}k(i),this.namespace=i.namespace||"locservices:ui","object"==typeof i.stats&&(this._stats=new y(i.stats,{namespace:this.namespace}));var w=this;w.environment=i.apiConfig.env||"live";var L=i.alwaysOpen||!1,T=i.isGeolocationEnabled,E=i.isPreferredLocationEnabled;w.isLoggedIn=void 0!==i.isLoggedIn?i.isLoggedIn:s.hasCookie(),w.postcode,w.outside=i.container,w.inside=document.createElement("div"),w.outside.appendChild(w.inside),_.addClass(w.inside,"ls-ui-o"),w.inside.innerHTML="",T=void 0===T||T,w.isPreferredLocationEnabled=void 0===E||E;var D={onError:function(e){"object"==typeof e&&(Array.isArray(e)&&(e=e[0]),w.results&&w.results.clear(),w.autoComplete&&w.autoComplete.clear(),e.code!==C&&D.onActive())},onInputInteractionEnd:function(){w.coldStartDialog&&(w.coldStartDialog.remove(),w.coldStartDialog=void 0)},onLocation:function(e){Array.isArray(e)&&(e=e[0]),w.message.clear(),w.hideUserLocationList(w.container),w.selectLocation(e)},onProfileLocation:function(t){w.message.clear(),w.hideUserLocationList(w.container),e.emit(w.namespace+":controller:user_profile_location",t)},onActive:function(){var t=w.container.querySelector(".ls-c-search__container input");w.isActive||(w.isActive=!0,e.emit(w.namespace+":controller:active"),_.addClass(w.container,"ls-ui-ctrl-active")),t&&t.focus()},onGeolocationAvailable:function(){e.emit(w.namespace+":controller:geolocation:available"),_.addClass(w.container,"ls-ui-ctrl-geolocation")},onSearchResults:function(t){Array.isArray(t)&&(t=t[1]),void 0===t||0!==t.totalResults?w.hideUserLocationList(w.container):e.emit(w.namespace+":component:search_results:results",[{searchTerm:t.searchTerm,totalResults:t.totalResults}])},onAutoCompleteResults:function(){w.message.clear(),w.results.clear(),w.hideUserLocationList(w.container)},onResultsClear:function(){w.message.clear(),w.results.clear(),w.coldStartDialog&&(w.coldStartDialog.remove(),w.coldStartDialog=void 0),w.showUserLocationList(w.container)},onClose:function(){w.close()}};w.translations=i.translations,i.placeTypes&&(i.apiConfig["place-types"]=i.placeTypes,i.myLocationsDelegate&&i.myLocationsDelegate.setFilters(i.placeTypes)),w.api=new t(i.apiConfig),w.container=i.container,w.myLocationsDelegate=i.myLocationsDelegate||null,w.myLocationUnavailable=w.myLocationsDelegate&&!w.myLocationsDelegate.isSupported(),w.recentLocationsDelegate=!0===w.showPersonalisation()&&i.recentLocationsDelegate?i.recentLocationsDelegate:null,w.preferredLocation=new o(w.api,{isUASWriteEnabled:i.isUASWriteEnabled,isUASReadEnabled:i.isUASReadEnabled}),w.bbcCookies=new n,w.cookies=new a,w.cookiesColdStartKey="ckps_locserv_uics";var I=!0!==w.supportsTouch()?"no-touch ls-ui-ctrl-primary":"ls-ui-ctrl-primary";_.addClass(w.container,I),w.isActive=!1,w.infoLink=i.infoLink||null,w.userOrigin=i.userOrigin,this.isPreferredLocationEnabled?this.preferredLocation.get({success:function(){f()},error:function(){f()}}):f()}var S="mylocation",C="user_locations.error.preferred_location",A=function(e){var t=document.createElement("a"),o=document.createElement("span"),i=document.createElement("span");return _.addClass(t,"ls-c-primary__info-link gel-long-primer-bold ls-o-link ls-o-link--with-icon"),t.setAttribute("href",e.href),_.addClass(o,"ls-c-primary__info-link__icon ls-o-link__icon"),o.innerHTML=w,i.innerHTML=e.text,t.appendChild(o),t.appendChild(i),t},k=function(e){for(var t=["apiConfig","translations","container"],o=t.length,i=0;i<o;i++){var n=t[i];if(!e[n])throw new Error('Primary Controller requires option: "'+n+'".')}var a=e.apiConfig||void 0;"object"==typeof a&&T(a)},T=function(e){for(var t=["api_key"],o=t.length,i=0;i<o;i++){var n=t[i];if(!e[n])throw new Error('Primary Controller requires apiConfig option: "'+n+'".')}};return L.prototype.hideUserLocationList=function(e){var t=e.querySelector(".ls-ui-personalisation-container");_.addClass(t,"ls-ui-hidden")},L.prototype.showUserLocationList=function(e){var t=e.querySelector(".ls-ui-personalisation-container");_.removeClass(t,"ls-ui-hidden")},L.prototype.setNoResultsErrorMessage=function(e){return this.translations.get("search.error.no_results",{searchTerm:e.search})},L.prototype.close=function(){if(this.isActive){this.isActive=!1,this.search.clear(),e.emit(this.namespace+":controller:inactive"),_.removeClass(this.container,"ls-ui-ctrl-active");var t=this.container.querySelector(".ls-ui-personalisation-container");_.removeClass(t,"ls-ui-hidden")}},L.prototype.selectLocation=function(t){var o=this,i=function(){Array.isArray(t)&&(t=t[0]),e.emit(o.namespace+":controller:location",[t])};if(this.preferredLocation.isValidLocation(t)&&this.shouldColdStartDialogBeDisplayed()){var n=document.createElement("div");o.inside.appendChild(n),this.coldStartDialog=new f({container:n,translations:this.translations,message:o.translations.get("primary.cold_start",{name:t.name}),confirmLabel:o.translations.get("primary.cold_start.confirm"),cancelLabel:o.translations.get("primary.cold_start.cancel"),removeLabel:"",confirm:function(){o.coldStartDialog=void 0,o.preferredLocation.set(t,{success:function(){t.wasSetAsPreferredLocationDueToColdStart=!0,i()},error:function(){i()}})},cancel:function(){o.coldStartDialog=void 0,function(){var e=new Date;e.setFullYear(e.getFullYear()+1),o.cookies.set(o.cookiesColdStartKey,"1",e.toUTCString(),"/",o.preferredLocation.getCookieDomain()),i()}()}})}else i()},L.prototype.isOverEighteen=function(){return"o18"===this.getUserDetailsFromCookie().ab},L.prototype.showPersonalisation=function(){try{return!0===this.isLoggedIn&&!0===this.getUserDetailsFromCookie().ep||!1===this.isLoggedIn}catch(e){return!0}},L.prototype.getUserDetailsFromCookie=function(){return s.getUserDetailsFromCookie()},L.prototype.createPostcodeObject=function(){return new i(s)},L.prototype.shouldColdStartDialogBeDisplayed=function(){return!1===this.preferredLocation.isLocServCookieSet()&&!1===this.bbcCookies.isPersonalisationDisabled()&&this.cookies.isSupported()&&"1"!==this.cookies.get(this.cookiesColdStartKey)&&!0===this.isPreferredLocationEnabled},L.prototype.supportsTouch=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},L})),define("locservices/ui/translations/en",[],(function(){"use strict";function e(){}e.prototype.getLanguageCode=function(){return"en-GB"};var t={"auto_complete.error.search":"Sorry, we are experiencing technical problems.","user_locations.heading.preferred":"Main location","user_locations.heading.other_locations":"Other locations","user_locations.heading.your_locations":"Your locations","user_locations.action.recent":"Prefer","user_locations.action.remove":"Remove","user_locations.dialog.yes":"Yes","user_locations.dialog.no":"No","user_locations.dialog.settings":"Go to settings","user_locations.dialog.cancel_settings":"Cancel","user_locations.dialog.remove":"Remove? ","user_locations.dialog.edit":"Edit? ","user_locations.action.label.prefer":"Make {name} your main location","user_locations.action.label.remove":"Remove {name} as your main location","user_locations.action.label.delete":"Remove {name} from other locations","user_locations.dialog.remove_preferred":"We will no longer use {{name}} to give you relevant local info across the BBC.","user_locations.dialog.prefer":"We will now use {{name}} to give you relevant local info across the BBC.","user_locations.dialog.home.redirect":"Want to edit your home postcode? You need to go to your account settings to do this. It helps us keep you safe.","user_locations.popover.home.redirect":"Want to edit your home postcode?","user_locations.popover.remove_homelocation":"You need to go to your account settings to do this. It helps us keep you safe.","user_locations.popover.homelocation_link_title":"Click here to edit","user_locations.message.preferred":"We'll use your location to give you relevant local info across the BBC.","user_locations.message.change_preferred":"Hit the star next to one of your other locations to make it your main location. If you are signed in to the BBC we will store the main location with your BBC account.","user_locations.error.preferred_location":"Sorry, we are experiencing technical problems.","user_profile_location.heading":"Home location","user_profile_location.edit":"Edit your home location","user_profile_location.label":"Home","user_profile.cta_prompt":"Sign in or Register to start adding.","close_button.label":"Close","close_button.label_locations":"Close location search","header.my_locations":"My locations","header.recent_locations":"Recent searches","follow_button.action.adding":"Adding","follow_button.action.added":"Added","follow_button.action.add":"Add","follow_button.action.to_your_locations":" to your locations","follow_button.action.remove":"Remove","follow_button.action.removed":"Removed","follow_button.action.removing":"Removing","follow_button.invalid.title":"Your location {location} is a foreign location","follow_button.invalid.description":"You are not able to save a foreign location to your locations","follow_button.invalid_full.title":"Your list of locations is full.","follow_button.invalid_full.description":"To add {location}, you first need to remove some other locations.","follow_button.invalid_type.title":"Your location is a {type}.","follow_button.invalid_type.description":"You are not able to save a location that is a {type} to your locations","follow_button.nocta.title":"Remember the places that matter to you","follow_button.nocta.description":"Add them to your locations to get relevant local info across the BBC.","popover.action.signin":"Sign in","popover.label.or":" or ","popover.action.register":"Register","popover.label.close":"Close dialog","popover.location_error_title":"Unable to save location.","popover.location_error_description":"Sorry, we are experiencing technical problems.","favourite.popover.added.title":"{location} has been added to your locations","favourite.popover.added.description":"We'll use it to give you relevant local info across the BBC.","favourite.popover.remove.title":"{location} has been removed from your locations","favourite.popover.remove.description":"We won't use it to give you relevant local info across the BBC any more.","favourite.popover.error.content":"Something's gone wrong. Please try again later","favourite.info_link":"Find out more","search.placeholder":"Enter a town, city or UK postcode","search.error.search":"Sorry, we are experiencing technical problems.","search.error.no_results":'We couldn\'t find any results for "{searchTerm}"',"search.clear":"Clear input.","search.submit":"Search","search.submit.title":"Search for a location","search_results.more":"Show more","search_results.more_title":"Show more results","geolocation.button.label":"Find my location","geolocation.error.http":"We are unable to use your location.","geolocation.error.browser":"We are unable to use your location.","geolocation.error.browser.permission":"Please enable Location Services in your device settings or browser then refresh.","geolocation.error.outsideContext":"Your location is not currently supported by this application.","geolocation.error.browser.permission.insecure_origin":"Geolocation is currently not available. Please use search instead.","message.action.close":"Close","message.geolocation.detect":"Detecting your location.","message.results":'Search results for "{searchTerm}"',"message.total_results":"Showing {current} of {total} results","message.total_results.formatted":"Showing <strong>{current}</strong> of <strong>{total}</strong>","primary.cold_start":"Would you like us to use {{name}} as your main location to give you relevant local info across the BBC?","primary.cold_start.confirm":"Yes","primary.cold_start.cancel":"No","primary.info_link":"How does the BBC use my location?","primary_search.close":"Close","test.interpolation":"Value {a} and value {b}.","locations_list.action.show_more":"Show more","locations_list.action.show_more_title":"Show more results","locations_list.action.show_less":"Show less","locations_list.action.show_less_title":"Show fewer results","locations_list.action.clear_all":"Clear all","locations_list.no_my_locations":"<p>We use your postcode to give you relevant local info across the BBC.</p><p>Add more locations to keep up with what's happening in the places you care about.</p>","locations_list.no_recent_locations":"<p>You haven't searched for any locations yet.</p><p>Previous searches will appear here.</p>","locations_list.clear_recents":"This will remove all of your recent searches."};return e.prototype.get=function(e,o){var i;return!!Object.prototype.hasOwnProperty.call(t,e)&&(i=t[e],"object"==typeof o&&(i=String(i).replace(/\{([^{}]*)\}/g,(function(e,t){return Object.prototype.hasOwnProperty.call(o,t)?o[t]:e}))),i)},e.prototype.set=function(e,o){return"string"==typeof e&&""!==e&&void 0!==o&&(t[e]=o,!0)},e})),define("locservices/ui/translations/cy",[],(function(){"use strict";function e(){}e.prototype.getLanguageCode=function(){return"cy-GB"};var t={"auto_complete.error.search":"Mae'n ddrwg gennym, mae yna broblemau technegol ar hyn o bryd.","user_locations.heading.preferred":"Prif leoliad","user_locations.heading.other_locations":"Lleoliadau eraill","user_locations.heading.your_locations":"Eich lleoliadau","user_locations.action.recent":"Dewis","user_locations.action.remove":"Dileu","user_locations.dialog.yes":"Ydw","user_locations.dialog.no":"Nac ydw","user_locations.dialog.settings":"Ewch at y gosodiadau","user_locations.dialog.cancel_settings":"Canslo","user_locations.dialog.remove":"Dileu? ","user_locations.dialog.edit":"Golygu? ","user_locations.action.label.prefer":"Defnyddio {name} fel eich prif leoliad","user_locations.action.label.remove":"Stopio defnyddio {name} fel eich prif leoliad","user_locations.action.label.delete":"Dileu {name} o'ch lleoliadau eraill","user_locations.dialog.remove_preferred":"Fyddwn ni ddim yn defnyddio {{name}} i roi gwybodaeth leol berthnasol i chi ar draws y BBC.","user_locations.dialog.prefer":"Byddwn ni nawr yn defnyddio {{name}} i roi gwybodaeth leol berthnasol i chi ar draws y BBC.","user_locations.dialog.home.redirect":"Ydy chi eisiau golygu eich cod post? Mae angen gwneud hyn yn eich gosodiadau cyfrif.","user_locations.popover.home.redirect":"Ydy chi eisiau golygu eich cod post?","user_locations.popover.remove_homelocation":"Mae angen gwneud hyn yn eich gosodiadau cyfrif.","user_locations.popover.homelocation_link_title":"Cliciwch yma i olygu","user_locations.message.preferred":"Byddwn ni'n defnyddio eich lleoliad i roi gwybodaeth leol berthnasol i chi ar draws y BBC.","user_locations.message.change_preferred":"I newid eich prif leoliad, defnyddiwch y seren i ddewis un o'ch lleoliadau eraill. Os ydych chi wedi mewngofnodi i'r BBC, byddwn ni'n cadw cofnod o'ch prif leoliad yn eich cyfrif BBC.","user_locations.error.preferred_location":"Mae'n ddrwg gennym, mae yna broblemau technegol ar hyn o bryd.","user_profile_location.heading":"Lleoliad cartref","user_profile_location.edit":"Golygu eich lleoliad cartref","user_profile_location.label":"Cartref","user_profile.cta_prompt":"Mewngofnodwch neu gofrestrwch er mwyn dechrau ychwanegu.","close_button.label":"Cau","close_button.label_locations":"Cau","header.my_locations":"Fy lleoliadau","header.recent_locations":"Lleoliadau diweddar","follow_button.action.adding":"Ychwanegu","follow_button.action.added":"Ychwanegwyd","follow_button.action.add":"Ychwanegu","follow_button.action.to_your_locations":" i eich lleoliadau","follow_button.action.remove":"Dileu","follow_button.action.removed":"Wedi dileu","follow_button.action.removing":"Yn dileu","follow_button.invalid.title":"Mae {location} yn lleoliad tramor","follow_button.invalid.description":"Allwch chi ddim arbed lleoliad tramor i eich lleoliadau","follow_button.invalid_full.title":"Mae eich rhestr lleoliadau yn llawn.","follow_button.invalid_full.description":"I ychwanegu {location}, bydd rhaid i chi ddileu lleoliadau eraill.","follow_button.invalid_type.title":"Mae eich lleoliad yn {type}.","follow_button.invalid_type.description":"Fedrwch chi ddim arbed lleoliad sydd yn {type} i eich lleoliadau","follow_button.nocta.title":"Cofio'r llefydd sy'n bwysig i chi","follow_button.nocta.description":"Ychwanegwch nhw i eich lleoliadau i gael gwybodaeth leol berthnasol ar draws y BBC.","popover.action.signin":"Mewngofnodi","popover.label.or":" neu ","popover.action.register":"Gofrestru","popover.label.close":"Cau","popover.location_error_title":"Methu arbed y lleoliad.","popover.location_error_description":"Mae yna broblemau technegol ar hyn o bryd.","favourite.popover.added.title":"Mae {location} wedi cael ei ychwanegu i eich lleoliadau","favourite.popover.added.description":"Byddwn ni'n ei ddefnyddio i roi gwybodaeth leol berthnasol i chi ar draws y BBC.","favourite.popover.remove.title":"Mae {location} wedi cael ei ddileu o eich lleoliadau","favourite.popover.remove.description":"Byddwn ni ddim yn ei ddefnyddio i roi gwybodaeth leol berthnasol i chi ar draws y BBC mwyach.","favourite.popover.error.content":"Triwch eto nes ymlaen","favourite.info_link":"Dewch i wybod rhagor","search.placeholder":"Rhowch dref, ddinas neu god post yn y DU yma.","search.error.search":"Mae yna broblemau technegol ar hyn o bryd.","search.error.no_results":'Wedi methu dod o hyd i ganlyniadau ar gyfer "{searchTerm}"',"search.clear":"Clirio","search.submit":"Chwilio","search.submit.title":"Chwilio am leoliad","search_results.more":"Dangos mwy o ganlyniadau","search_results.more_title":"Dangos mwy o ganlyniadau","geolocation.button.label":"Defnyddiwch fy lleoliad","geolocation.error.http":"Nid oes modd i ni ddefnyddio eich lleoliad.","geolocation.error.browser":"Nid oes modd i ni ddefnyddio eich lleoliad.","geolocation.error.browser.permission":"Rhaid galluogi'r Gwasanaethau Lleoliad ymlaen yng ngosodiadau eich dyfais neu'r porwr.","geolocation.error.outsideContext":"Dyw'r system ddim yn medru defnyddio'r lleoliad yma.","geolocation.error.browser.permission.insecure_origin":"Nid oes modd i ni ddefnyddio eich lleoliad.","message.action.close":"Cau","message.geolocation.detect":"Dod o hyd i'ch lleoliad","message.results":'Canlyniadau chwilio ar gyfer "{searchTerm}"',"message.total_results":"Dangos {current} o {total} results","message.total_results.formatted":"Dangos <strong>{current}</strong> o <strong>{total}</strong>","primary.cold_start":"Ydych chi eisiau defnyddio {{name}} fel eich prif leoliad i roi gwybodaeth leol berthnasol i chi ar draws y BBC?","primary.cold_start.confirm":"Ydw","primary.cold_start.cancel":"Nac ydw","primary.info_link":"Sut mae'r BBC yn defnyddio fy lleoliad?","primary_search.close":"Cau","test.interpolation":"Gwerth {a} a gwerth {b}.","locations_list.action.show_more":"Dangoswch mwy","locations_list.action.show_more_title":"Dangoswch mwy","locations_list.action.show_less":"Dangoswch llai","locations_list.action.show_less_title":"Dangoswch llai","locations_list.action.clear_all":"Cliriwch y cyfan","locations_list.no_my_locations":"<p>Rydyn ni'n defnyddio eich cod post i roi gwybodaeth leol berthnasol i chi ar draws y BBC.</p><p>Ychwanegwch fwy o leoliadau i weld beth sy'n digwydd yn y llefydd sy'n bwysig i chi.</p>","locations_list.no_recent_locations":"<p>Dydych chi ddim wedi chwilio am leoliad eto. Bydd chwiliadau blaenorol yn ymddangos yma.</p>","locations_list.clear_recents":"Bydd hyn yn dileu eich chwiliadau blaenorol."};return e.prototype.get=function(e,o){var i;return!!Object.prototype.hasOwnProperty.call(t,e)&&(i=t[e],"object"==typeof o&&(i=String(i).replace(/\{([^{}]*)\}/g,(function(e,t){return Object.prototype.hasOwnProperty.call(o,t)?o[t]:e}))),i)},e.prototype.set=function(e,o){return"string"==typeof e&&""!==e&&void 0!==o&&(t[e]=o,!0)},e})),define("locservices/ui/translations/ga",[],(function(){"use strict";function e(){}e.prototype.getLanguageCode=function(){return"ga-GB"};var t={"auto_complete.error.search":"Buartha, t fadhbanna teicnila againn.","user_locations.heading.preferred":"Promhlthair","user_locations.heading.other_locations":"Lithreacha eile","user_locations.heading.your_locations":"Do lithreacha","user_locations.action.recent":"B'fhearr liom","user_locations.action.remove":"Bain","user_locations.dialog.yes":"Dan","user_locations.dialog.no":"N Dan","user_locations.dialog.settings":"Tigh go socruithe","user_locations.dialog.cancel_settings":"Cealaigh","user_locations.dialog.remove":"Bain? ","user_locations.dialog.edit":"Cuir in eagar? ","user_locations.action.label.prefer":"sid {name} mar do phromhlthair","user_locations.action.label.remove":"Bain {name} mar do phromhlthair","user_locations.action.label.delete":"Bain {name} as lithreacha eile","user_locations.dialog.remove_preferred":"N sidfidh muid {{name}} nos m, le heolas itiil bhartha a thabhairt duit, fud fad an BBC.","user_locations.dialog.prefer":"Anois sidfidh muid {{name}} le heolas itiil bhartha a thabhairt duit, fud fad an BBC.","user_locations.dialog.home.redirect":"Ar mhaith leat do chd poist a chur in eagar? N mr duit dul chuig do shocruithe cuntais leis seo a dhanamh. Cuidonn s linn t a choinneil sln.","user_locations.popover.home.redirect":"Ar mhaith leat do chd poist a chur in eagar?","user_locations.popover.remove_homelocation":"N mr duit dul chuig do shocruithe cuntais leis seo a dhanamh. Cuidonn s linn t a choinneil sln.","user_locations.popover.homelocation_link_title":"Cliceil anseo le cur in eagar","user_locations.message.preferred":"Bainfidh muid sid as do lthair le heolas itiil bhartha a thabhairt duit, fud fad an BBC.","user_locations.message.change_preferred":"Buail an ralta in aice le ceann de do lithreacha eile le do phromhlthair a dhanamh as. M t t snithe isteach ar an BBC, strlfaidh muid an phromhlthair le do chuntas BBC.","user_locations.error.preferred_location":"Buartha, t fadhbanna teicnila againn faoi lthair.","user_profile_location.heading":"Lthair bhaile","user_profile_location.edit":"Cuir do lthair bhaile in eagar","user_profile_location.label":"Baile","user_profile.cta_prompt":"Snigh isteach n clraigh le tos ag cur leis.","close_button.label":"Druid","close_button.label_locations":"Druid cuardach lithreacha","header.my_locations":"Mo lithreacha","header.recent_locations":"Cuardaigh le dana","follow_button.action.adding":"Ag cur leis","follow_button.action.added":"Curtha leis","follow_button.action.add":"Cuir le","follow_button.action.to_your_locations":" do lithreacha","follow_button.action.remove":"Bain","follow_button.action.removed":"Bainte","follow_button.action.removing":" bhaint","follow_button.invalid.title":"Is lthair eachtrach  do lthair {location}","follow_button.invalid.description":"N thig leat lthair eachtrach a shbhil go dt do lithreacha","follow_button.invalid_full.title":"T do liosta lithreacha ln.","follow_button.invalid_full.description":"Le {location} a chur leis, caithfidh t roinnt lithreacha eile a bhaint ar dts.","follow_button.invalid_type.title":"Is {type}  do lthair","follow_button.invalid_type.description":"N thig leat lthair ar {type}  a shbhil go do lithreacha","follow_button.nocta.title":"Cuimhnigh ar na hiteanna at tbhachtach duitse","follow_button.nocta.description":"Cuir le do lithreacha iad, le heolas itiil bhartha a fhil fud fad an BBC.","popover.action.signin":"Snigh isteach","popover.label.or":" n ","popover.action.register":"Clraigh","popover.label.close":"Druid bosca dialige","popover.location_error_title":"N fidir an lthair a shbhil.","popover.location_error_description":"Buartha, t fadhbanna teicnila againn.","favourite.popover.added.title":"Cuireadh {location} le do lithreacha","favourite.popover.added.description":"Bainfidh muid sid as le heolas itiil bhartha a thabhairt duit fud fad an BBC.","favourite.popover.remove.title":"Scriosadh {location}  do lithreacha","favourite.popover.remove.description":"N bhainfidh muid sid as nos m le heolas itiil bhartha a thabhairt duit fud fad an BBC.","favourite.popover.error.content":"T lb ar lr. Triail ars nos moille le do thoil","favourite.info_link":"Tuilleadh eolais","search.placeholder":"Cuir isteach baile, cathair n cd poist sa RA","search.error.search":"Buartha, t fadhbanna teicnila againn.","search.error.no_results":'Nor thinig muid ar thortha ar bith do "{searchTerm}"',"search.clear":"Glan ionchur.","search.submit":"Cuardaigh","search.submit.title":"Cuardaigh lthair","search_results.more":"Taispein nos m","search_results.more_title":"Taispein nos m tortha","geolocation.button.label":"Aimsigh mo lthair","geolocation.error.http":"N fidir linn do lthair a sid.","geolocation.error.browser":"N fidir linn do lthair a sid.","geolocation.error.browser.permission":"Cumasaigh Seirbhs Lithreach i do shocruithe glis, n brabhsla agus athnuaigh le do thoil.","geolocation.error.outsideContext":"Nl do lthair tacaithe ag an fheidhmchlr seo faoi lthair.","geolocation.error.browser.permission.insecure_origin":"Nl geoshuomh ar fil faoi lthair. Bain sid as cuardach ina it, le do thoil.","message.action.close":"Druid","message.geolocation.detect":"Ag aimsi do lithreach.","message.results":'Tortha ar do chuardach do "{searchTerm}"',"message.total_results":"Ag taispeint {current} as {total} toradh.","message.total_results.formatted":"Ag taispeint <strong>{current}</strong> den <strong>{total}</strong>","primary.cold_start":"Ar mhian leat muid {{name}} a sid mar do phromhlthair le heolas itiil bhartha a thabhairt duit fud fad an BBC?","primary.cold_start.confirm":"Ba mhian","primary.cold_start.cancel":"Nor mhian","primary.info_link":"Cn digh a bhaineann an BBC sid as mo lthair?","primary_search.close":"Druid","test.interpolation":"Luach {a} agus luach {b}.","locations_list.action.show_more":"Taispein nos m","locations_list.action.show_more_title":"Taispein nos m tortha","locations_list.action.show_less":"Taispein nos l","locations_list.action.show_less_title":"Taispein nos l tortha","locations_list.action.clear_all":"Glan gach rud","locations_list.no_my_locations":"<p>Baineann muid sid as do chd poist le heolas itiil bhartha a thabhairt duit fud fad an BBC.</p><p>Cuir nos m lithreacha leis le bheith ar an eolas faoi iteanna a bhfuil dil agat iontu.</p>","locations_list.no_recent_locations":"<p>Nor chuardaigh t lthair ar bith go fill.</p><p>Feicfidh t cuardach ar bith a rinne t cheana anseo.</p>","locations_list.clear_recents":"Scriosfaidh s seo gach cuardach a rinne t le dana."};return e.prototype.get=function(e,o){var i;return!!Object.prototype.hasOwnProperty.call(t,e)&&(i=t[e],"object"==typeof o&&(i=String(i).replace(/\{([^{}]*)\}/g,(function(e,t){return Object.prototype.hasOwnProperty.call(o,t)?o[t]:e}))),i)},e.prototype.set=function(e,o){return"string"==typeof e&&""!==e&&void 0!==o&&(t[e]=o,!0)},e})),define("locservices/ui/translations/gd",[],(function(){"use strict";function e(){}e.prototype.getLanguageCode=function(){return"gd-GB"};var t={"auto_complete.error.search":"Duilich, tha trioblaidean teicnigeach againn.","user_locations.heading.preferred":"Promh ite","user_locations.heading.other_locations":"iteachan eile","user_locations.heading.your_locations":"D' iteachan","user_locations.action.recent":"Roghnaich","user_locations.action.remove":"Thoir s","user_locations.dialog.yes":"Tha","user_locations.dialog.no":"Chan eil","user_locations.dialog.settings":"Rach gu seataidhean","user_locations.dialog.cancel_settings":"Dubh s","user_locations.dialog.remove":"Thoir s? ","user_locations.dialog.edit":"Atharraich? ","user_locations.action.label.prefer":"Tagh {name} mar do phromh ite","user_locations.action.label.remove":"Thoir s {name} mar do phromh ite","user_locations.action.label.delete":"Thoir s {name}  iteachan eile","user_locations.dialog.remove_preferred":"Cha chleachd sinn {{name}} tuilleadh airson fios ionadail bhon a' BhBC a thoirt thugad.","user_locations.dialog.prefer":"Cleachdaidh sinn {{name}} airson fios ionadail bhon a' BhBC a thoirt thugad.","user_locations.dialog.home.redirect":"Bheil thu airson do chd puist atharrachadh? Rach gu seataidhean do chunntais airson seo a dhanamh. Cuidichidh seo do chumail sbhailte.","user_locations.popover.home.redirect":"Bheil thu airson do chd puist atharrachadh?","user_locations.popover.remove_homelocation":"Rach gu seataidhean do chunntais airson seo a dhanamh. Cuidichidh seo do chumail sbhailte.","user_locations.popover.homelocation_link_title":"Cliog an seo airson atharrachadh","user_locations.message.preferred":"Cleachdaidh sinn d' ite airson fios ionadail bhon a' BhBC a thoirt thugad.","user_locations.message.change_preferred":"Brth air an rionnag ri taobh aon de na h-iteachan agad airson a thaghadh mar phromh ite. Ma tha thu air logadh a-steach dhan a' BhBC, straidh sinn do phromh ite led chunntas BBC.","user_locations.error.preferred_location":"Duilich, tha trioblaidean teicnigeach againn.","user_profile_location.heading":"ite dachaigh","user_profile_location.edit":"Atharraich d' ite dachaigh","user_profile_location.label":"Dachaigh","user_profile.cta_prompt":"Log a-steach no Clraich gus tiseachadh a' cur ris.","close_button.label":"Din","close_button.label_locations":"Din an t-inneal lorg","header.my_locations":"M' iteachan","header.recent_locations":"Lorgan a rinnear o chionn ghoirid","follow_button.action.adding":"A' cur ris","follow_button.action.added":"Air a chur ris","follow_button.action.add":"Cuir","follow_button.action.to_your_locations":" rid iteachan","follow_button.action.remove":"Thoir s","follow_button.action.removed":"Air a thoirt s","follow_button.action.removing":"A' toirt s","follow_button.invalid.title":"Tha d' ite {location} na ite cin","follow_button.invalid.description":"Chan eil e comasach ite cin a shbhaladh rid iteachan","follow_button.invalid_full.title":"Tha do liosta de dh'iteachan ln.","follow_button.invalid_full.description":"Gus {location} a chur ris, feumaidh tu an toiseach iteachan eile a thoirt s.","follow_button.invalid_type.title":"'S e {type} a tha nad ite.","follow_button.invalid_type.description":"Chan urrainn dhut {type} a shbhaladh rid iteachan","follow_button.nocta.title":"Cuimhnich na h-iteachan a tha cudromach dhut","follow_button.nocta.description":"Cuir rid iteachan iad airson fios ionadail bhon a' BhBC a thoirt thugad.","popover.action.signin":"Log a-steach","popover.label.or":" no ","popover.action.register":"Clraich","popover.label.close":"Din an cmhradh","popover.location_error_title":"Cha urrainn dhuinn seo a shbhaladh.","popover.location_error_description":"Duilich, tha trioblaidean teicnigeach againn.","favourite.popover.added.title":"Chaidh {location} a chur rid iteachan","favourite.popover.added.description":"Cleachdaidh sinn seo airson fios ionadail bhon a' BhBC a thoirt thugad.","favourite.popover.remove.title":"Chaidh {location} a thoirt  d' iteachan","favourite.popover.remove.description":"Cha chleachd sinn seo airson fios ionadail bhon a' BhBC a thoirt thugad tuilleadh.","favourite.popover.error.content":"Chaidh rudeigin cerr. Feuch a-rithist ann an greis.","favourite.info_link":"Tuilleadh fiosrachaidh","search.placeholder":"Cuir a-steach baile, cathair-bhaile no cd puist san RA.","search.error.search":"Duilich, tha trioblaidean teicnigeach againn.","search.error.no_results":'Cha do lorg sinn toraidhean airson "{searchTerm}"',"search.clear":"Dubh s na chuir thu ris.","search.submit":"Lorg","search.submit.title":"Lorg ite","search_results.more":"Seall tuilleadh","search_results.more_title":"Tuilleadh thoraidhean","geolocation.button.label":"Lorg m' ite-sa","geolocation.error.http":"Cha urrainn dhuinn d' ite a chleachdadh.","geolocation.error.browser":"Cha urrainn dhuinn d' ite a chleachdadh.","geolocation.error.browser.permission":"Cuir Seirbheisean ite air ann an seataidhean d' inneal no do bhrobhsair is brth raich.","geolocation.error.outsideContext":"Chan eil an t-siostam seo ag aithneachadh d' ite aig an re seo.","geolocation.error.browser.permission.insecure_origin":"Chan eil geo-lorg ag obair an-drsta. Feuch lorg.","message.action.close":"Din","message.geolocation.detect":"A' lorg d' ite.","message.results":'Toraidhean airson "{searchTerm}"',"message.total_results":"A' sealltainn {current} de {total} thoraidhean","message.total_results.formatted":"A' sealltainn <strong>{name}</strong> de <strong>{total}</strong>","primary.cold_start":"A bheil thu airson 's gun cleachd sinn {{name}} mar do phromh ite airson fios ionadail bhon a' BhBC a thoirt thugad?","primary.cold_start.confirm":"Tha","primary.cold_start.cancel":"Chan eil","primary.info_link":"Ciamar a chleachdas am BBC m' ite?","primary_search.close":"Din","test.interpolation":"Luach {a} agus luach {b}.","locations_list.action.show_more":"Seall tuilleadh","locations_list.action.show_more_title":"Tuilleadh thoraidhean","locations_list.action.show_less":"Seall nas lugha","locations_list.action.show_less_title":"Seall nas lugha de thoraidhean","locations_list.action.clear_all":"Dubh s","locations_list.no_my_locations":"<p>Bidh sinn a' cleachdadh do chd puist airson fios ionadail bhon a' BhBC a thoirt thugad.</p><p>Cuir tuilleadh iteachan ris airson cumail suas ri na tha a' tachairt ann an iteachan anns a bheil idh agad.</p>","locations_list.no_recent_locations":"<p>Cha do dh'fheuch thu ri ite a lorg fhathast.</p><p>Nochdaidh na bha thu a' lorg roimhe an seo.</p>","locations_list.clear_recents":"Dubhaidh seo s na bha thu a' lorg roimhe."};return e.prototype.get=function(e,o){var i;return!!Object.prototype.hasOwnProperty.call(t,e)&&(i=t[e],"object"==typeof o&&(i=String(i).replace(/\{([^{}]*)\}/g,(function(e,t){return Object.prototype.hasOwnProperty.call(o,t)?o[t]:e}))),i)},e.prototype.set=function(e,o){return"string"==typeof e&&""!==e&&void 0!==o&&(t[e]=o,!0)},e})),define("modules/location-search",["jssignals-1","istats-1","locservices/ui/mediator/events","locservices/ui/factory/delegates_factory","locservices/ui/controller/primary","locservices/ui/translations/en","locservices/ui/translations/cy","locservices/ui/translations/ga","locservices/ui/translations/gd"],(function(e,t,o,i,n,a,r,s,c){"use strict";function l(t){this.container=t.container,this.locale=t.locale||"en",this.environment=t.environment||"live",this.locatorKey=t.locatorKey,this.uasKey=t.uasKey,this.namespace=t.namespace||"weather-search",this.alwaysOpen=t.alwaysOpen||!1,this.isInternational=t.isInternational||!1,this.isTidesSearch=t.isTidesSearch||!1,this.signals={active:new e.Signal,inactive:new e.Signal,location:new e.Signal,geolocationButtonClick:new e.Signal,closeButtonClick:new e.Signal,locationsShown:new e.Signal,locationsCleared:new e.Signal},"cy"===this.locale?d=new r:"ga"===this.locale?d=new s:"gd"===this.locale&&(d=new c),t.placeholder&&d.set("search.placeholder",t.placeholder)}var d=new a;return l.prototype.init=function(){var e,a,r=this,s=!0,c={namespace:this.namespace,apiKey:this.uasKey,env:this.environment,domainSuffix:"co.uk"};a=new i(c).createDelegates(),this.container.innerHTML="",this.isInternational&&(s=!1),o.on(this.namespace+":controller:active",(function(){r.signals.active.dispatch()})),o.on(this.namespace+":controller:inactive",(function(){r.signals.inactive.dispatch()})),o.on(this.namespace+":controller:location",(function(e){r.signals.location.dispatch(e[0])})),o.on(this.namespace+":controller:user_profile_location",(function(e){r.signals.location.dispatch(e[0])})),o.on(this.namespace+":component:geolocation:click",(function(){r.signals.geolocationButtonClick.dispatch()})),o.on(this.namespace+":component:close_button:clicked",(function(){r.signals.closeButtonClick.dispatch()})),o.on(this.namespace+":component:auto_complete:render",(function(){r.signals.locationsShown.dispatch()})),o.on(this.namespace+":component:auto_complete:clear",(function(){r.signals.locationsCleared.dispatch()})),o.on(this.namespace+":component:search_results:results",(function(){r.signals.locationsShown.dispatch()})),o.on(this.namespace+":component:search:clear",(function(){r.signals.locationsCleared.dispatch()})),e={api_key:this.locatorKey,stack:"aws",env:this.environment,locale:this.locale,filter:"international","place-types":["settlement","airport","district"],order:"importance",protocol:"https"},this.isTidesSearch&&(e.filter="domestic",e["place-types"]=["settlement","district"],a={}),(window.bbcpage&&window.bbcpage.getDestination?window.bbcpage.getDestination():window.Promise.resolve(null)).then((function(o){r.controller=new n({apiConfig:e,namespace:r.namespace,container:r.container,translations:d,alwaysOpen:r.alwaysOpen,userOrigin:o,isPreferredLocationEnabled:!1,isGeolocationEnabled:s,isUASReadEnabled:!0,isUASWriteEnabled:!0,myLocationsDelegate:a.myLocationsDelegate,recentLocationsDelegate:a.recentLocationsDelegate,stats:t})}))},l.prototype.open=function(){this.controller&&this.controller.search.input.focus()},l.prototype.close=function(){this.controller.close()},l.prototype.reverseGeocode=function(){this.controller.geolocation.reverseGeocode()},l})),define("utils/browser",[],(function(){return{isCapable:"querySelector"in document&&"localStorage"in window&&"addEventListener"in window,isAndroid2:(e=navigator.userAgent.match(/Android (\d+(?:\.\d+)+)/),!!e&&"2"===e[1].split(".")[0])};var e})),require(["modules/overlay","modules/overlay-dom","modules/location-redirector","modules/location-search","utils/browser"],(function(e,t,o,i,n){"use strict";if(n.isCapable){var a,r,s=document.getElementById("wr-location-search-params"),c=document.getElementById("wr-location-search-container"),l=document.querySelector(".wr-c-masthead--search"),d=document.querySelector(".wr-c-masthead__navigation .wr-c-navigation__link--search"),u=document.querySelector("#site-container"),h=document.getElementById("wr-tide-locations-container");l&&function(o){var i;a=new e({container:o.container,openClass:o.containerClass+"--open"}),n.isAndroid2||((i=new t({container:o.container,outer:o.siteContainer,searchLink:o.searchLink})).signals.searchLinkClicked.add((function(){a.open()})),i.signals.userClickedOutsideOverlay.add((function(){a.close()})),i.signals.focusLeftOverlay.add((function(){a.close()}))),a.signals.opened.add((function(){r.open()})),a.signals.closed.add((function(){r.close()}))}({container:l,containerClass:"wr-c-masthead",siteContainer:u,searchLink:d}),function(){if(c){var e=s.getAttribute("lang"),t=s.getAttribute("data-forecast-page-url-template"),n=s.getAttribute("data-edition"),l=s.getAttribute("data-environment"),d=s.getAttribute("data-locator-key"),u=s.getAttribute("data-uas-key"),p=c.querySelector(".ls-c-search__input").getAttribute("placeholder"),m=new o(t);(r=new i({alwaysOpen:Boolean(h),container:c,locale:e,environment:l,locatorKey:d,uasKey:u,placeholder:p,isInternational:"international"===n,isTidesSearch:Boolean(h)})).signals.active.add((function(){a&&a.open()})),r.signals.inactive.add((function(){a&&a.close()})),r.signals.closeButtonClick.add((function(){a&&a.close()})),h?r.signals.location.add((function(){r.controller.search.clear()})):r.signals.location.add((function(e){m.redirectToLocationId(e.id)})),r.init()}}()}})),define("search",(function(){}));