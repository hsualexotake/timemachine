"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[724],{57620:(e,t,n)=>{n.d(t,{A:()=>R});var r=n(63696),i=n(89958),a=n(20641),o=n(11545),s=n(74437),c=n(35289),l=n(61223),d=n(11216),u=n(9745),g=n(10737),h=n(49565),p=n(21773),v=n(99070),y=n(12879),b=n(54498),f=n(41738),m=n(95584),w=n(63548),I=n(12180),S=n(2097);const E=JSON.parse('{"en-GB":{"noJSMessage":"Sorry, this vote cannot be loaded. In order to vote you need to enable JavaScript in your browser.","signInHeading":"Sign in to vote. It\'s quick and easy.","unavailableMessage":"This vote is currently unavailable. Please try refreshing the page or try again later.","accountErrorMessage":"Uh oh, we couldn\'t submit your vote. Try refreshing the page, or signing out and in again."},"cy":{"noJSMessage":"Ymddiheuriadau, nid yw\'r bleidlais yma yn gallu cael ei llwytho. Er mwyn pleidleisio mae angen i chi ganiatáu JavaScript yn eich porwr.","signInHeading":"Mewngofnodwch i bleidleisio. Mae\'n gyflym ac yn hawdd.","unavailableMessage":"Dyw\'r bleidlais yma ddim ar gael ar hyn o bryd. Ceisiwch adnewyddu\'r dudalen neu rhowch gynnig arall arni nes ymlaen.","accountErrorMessage":"Dyw\'r bleidlais yma ddim ar gael ar hyn o bryd. Ceisiwch adnewyddu\'r dudalen neu rhowch gynnig arall arni nes ymlaen."},"gd":{"noJSMessage":"Duilich, cha ghabh a\' bhòt a luchdachadh. Airson bhòtadh, feumaidh tu JavaScript a chur a dhol.","signInHeading":"Soidhne a-staigh \'son bhòtadh. Tha e luath is furasta.","unavailableMessage":"Chan eil a\' bhòt seo ri fhaotainn an-dràsta. Feuch an duilleag ùrachadh no feuch a-rithist an ceann greis.","accountErrorMessage":"Chan eil a\' bhòt seo ri fhaotainn an-dràsta. Feuch an duilleag ùrachadh no feuch a-rithist an ceann greis."}}');var U=n(62540);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){O(a,r,i,o,s,"next",e)}function s(e){O(a,r,i,o,s,"throw",e)}o(void 0)}))}}var D=(0,i.default)("p",{target:"e15e1xc13",label:"NoJSPanel"})(a.tc,";",o.K1,";padding:",s.SPACING_8," 0;"),A=(0,i.default)("p",{target:"e15e1xc12",label:"ErrorPanel"})(a.tc,";",o.K1,";padding:",s.SPACING_8," 0;"),_=(0,i.default)("div",{target:"e15e1xc11",label:"MessageWrapper"})("display:flex;flex-direction:column;gap:",s.SPACING_2,";"),B=(0,i.default)("div",{target:"e15e1xc10",label:"SignInWrapper"})("display:flex;flex-direction:column;align-items:flex-start;gap:",s.SPACING_7,";@media (min-width: ",c.cK,"){padding:0 ",s.SPACING_2,";}"),P=e=>{var{children:t,hasWrapper:n}=e;return n?(0,U.jsx)(l.A,{children:t}):t},L={environment:"test",telescopeLibraryUrl:"https://ssp-libraries-uktest.votenow.tv/tldr/tldr.min",widgetDataUrl:"https://widgetstate-uktest.votenow.tv/v3/state",widgetEmbedUrl:"https://ssp-app-uktest.votenow.tv/"},C={environment:"live",telescopeLibraryUrl:"https://ssp-libraries-uk.votenow.tv/tldr/tldr.min",widgetDataUrl:"https://widgetstate-uk.votenow.tv/v3/state",widgetEmbedUrl:"https://ssp-app-uk.votenow.tv/"},M={environment:"stage",telescopeLibraryUrl:"https://ssp-libraries-ukbench.votenow.tv/tldr/tldr.min",widgetDataUrl:"https://widgetstate-ukbench.votenow.tv/v3/state",widgetEmbedUrl:"https://ssp-app-ukbench.votenow.tv/"};const R=e=>{var{experienceResourceId:t,hasWrapper:n=!0,isSignInRequired:i=!1,service:a,testData:o=!1,voteId:s,wid:c}=e,[l,x]=(0,r.useState)(void 0),[{widgetId:k,isVoteBehindSignIn:O},R]=(0,r.useState)({widgetId:c,isVoteBehindSignIn:i}),[V,N]=(0,r.useState)(!1),{pathname:z,search:J,hash:K}=(0,u.t)(),{host:G,env:W,"telescope-voting-enabled":H,is_uk:q,country:F}=(0,g.i3)(),Y=(0,S.Ri)("ckps_language"),Z=(0,f.Dn)(),Q=Y||Z,{accountErrorMessage:X,unavailableMessage:$,noJSMessage:ee,signInHeading:te}=(e=>E[e]||E["en-GB"])(Q),ne=(e=>{switch(e){case"cy":return"cy_GB";case"gd":return"gd";case"ga":return"ga";default:return"en_GB"}})(Q),re=(e=>e&&e.includes("stage.bbc.co.uk"))(G),{environment:ie,telescopeLibraryUrl:ae,widgetEmbedUrl:oe,widgetDataUrl:se}=(e=>{var{testData:t,loadTest:n}=e;return t&&!n?L:n?M:C})({testData:o,loadTest:re}),ce=(0,d.A)(ae),le=(0,h.A)(),de="https://".concat(G).concat(z).concat(J).concat(K),{identityTokenExchangeUrl:ue,isSignInAvailable:ge,registerUrl:he,signInUrl:pe,error:ve}=(0,p.A)({ptrt:de,userOrigin:a});if(!s)throw new Error("Required parameter not provided: voteId");if((0,r.useEffect)((()=>{ve&&(x(X),I.z3("Telescope Voting Error: fetching idcta config"),I.z3(ve))}),[X,ve]),(0,r.useEffect)((()=>{var e=Boolean(he&&pe);!ge&&e&&O&&!le&&(x(X),I.z3("Telescope Voting Error: Sign in is not available"))}),[X,ge,le,O,he,pe]),(0,r.useEffect)((()=>{"localhost"===W||H||(x($),I.z3("Telescope Voting Error: Telescope voting is not enabled"))}),[W,H,$]),(0,r.useEffect)((()=>{O&&le&&function(){var e=T((function*(){var e=G&&G.endsWith(".com");try{yield(0,v.Z)({environment:ie,isDotCom:e}),N(!0)}catch(e){x(X),I.z3("Telescope Voting Error: calling ensureTokens"),I.z3(e)}}));return function(){return e.apply(this,arguments)}}()()}),[X,ie,G,le,O]),(0,r.useEffect)((()=>{k||function(){var e=T((function*(e){try{var t=yield fetch("".concat(se,"/").concat(e)),n=yield t.json(),r={widgetId:n.snapshot.data.wid,isVoteBehindSignIn:n.data.bbc_id.enabled};R(r)}catch(e){x($),I.z3("Telescope Voting Error: fetching widget data"),I.z3(e)}}));return function(t){return e.apply(this,arguments)}}()(s)}),[$,s,k,se]),(0,r.useEffect)((()=>{if(ce&&k&&ue&&(!O||O&&le&&V))try{(e=>{var{country:t,identityTokenExchangeUrl:n,isUK:r,isVoteBehindSignIn:i,telescopeLibrary:a,telescopeLocale:o,voteId:s,widgetId:c,widgetEmbedUrl:l}=e,d=(e=>{var{country:t,identityTokenExchangeUrl:n,isUK:r,isVoteBehindSignIn:i,telescopeLocale:a,voteId:o,widgetEmbedUrl:s}=e,c=JSON.stringify({voteId:o,initialWidth:document.getElementById("telescope-vote-".concat(o))?document.getElementById("telescope-vote-".concat(o)).offsetWidth:0,childId:"telescope-vote-".concat(o),parentTitle:document.title,parentUrl:document.URL,region:t,isUK:r,locale:a}),l={clientId:"telescope",nonce:"1111111114444",scope:"vote openid",state:c,redirectUri:s};if(i){var d=new URL(n);return Object.entries(l).forEach((e=>{var[t,n]=e;return d.searchParams.append(t,n)})),d.toString()}var u=new URL(s);return u.hash="state=".concat(encodeURIComponent(c)),u.toString()})({country:t,identityTokenExchangeUrl:n,isUK:r,isVoteBehindSignIn:i,telescopeLocale:o,voteId:s,widgetEmbedUrl:l});a.loadApplication({id:"telescope-vote-".concat(s),url:d,method:"get",wid:c,custom_id:!!i})})({country:F,identityTokenExchangeUrl:ue,isUK:q,isVoteBehindSignIn:O,telescopeLibrary:ce,telescopeLocale:ne,voteId:s,widgetId:k,widgetEmbedUrl:oe})}catch(e){x($),I.z3("Telescope Voting Error: loading Telescope library application"),I.z3(e)}}),[ce,k,O,oe,s,ue,le,$,ne,q,F,V]),O&&ge&&!le){var ye={groupName:"Sign in to vote",groupType:"experience article embed telescope"};return(0,U.jsx)(P,{hasWrapper:n,children:(0,U.jsx)(m.C,{trackClicks:!1,tracking:(0,w.D9)(j(j({},ye),{},{type:"article",headline:"Sign in to vote",metadataStripItems:[{label:"Attribution",text:"BBC - Register"}]})),children:e=>{var{trackRef:n}=e;return(0,U.jsxs)(B,{ref:n,children:[(0,U.jsx)(_,{children:(0,U.jsx)(b.A,{fontScale:"indexHeadlineMedium",level:"2",children:te})}),(0,U.jsx)(f.Is,{context:Q,children:(0,U.jsx)(y.A,{layout:"one-line",registerUrl:he,signInUrl:pe,signInTracking:(0,w.D9)(j(j({},ye),{},{itemType:"id-cta-sign-in",headline:"Sign in",url:pe,metadataStripItems:[{label:"Attribution",text:"BBC - Sign in"}],experienceResourceId:t})),registerTracking:(0,w.D9)(j(j({},ye),{},{itemType:"id-cta-register",headline:"Register",url:he,metadataStripItems:[{label:"Attribution",text:"BBC - Register"}],experienceResourceId:t}))})})]})}})})}return(0,U.jsxs)(P,{hasWrapper:n,children:[(0,U.jsx)("noscript",{children:(0,U.jsx)(D,{children:ee})}),l?(0,U.jsx)(A,{children:l}):(0,U.jsx)("div",{id:"telescope-vote-".concat(s)})]})}}}]);