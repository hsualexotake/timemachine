!function a(o,n,s){function i(r,e){if(!n[r]){if(!o[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);throw(e=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",e}t=n[r]={exports:{}},o[r][0].call(t.exports,function(e){return i(o[r][1][e]||e)},t,t.exports,a,o,n,s)}return n[r].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)i(s[e]);return i}({1:[function(e,r,t){r.exports=function(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a},r.exports.__esModule=!0,r.exports.default=r.exports},{}],2:[function(e,r,t){r.exports=function(e){if(Array.isArray(e))return e},r.exports.__esModule=!0,r.exports.default=r.exports},{}],3:[function(e,r,t){r.exports=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},r.exports.__esModule=!0,r.exports.default=r.exports},{}],4:[function(e,r,t){function a(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}r.exports=function(e,r,t){return r&&a(e.prototype,r),t&&a(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e},r.exports.__esModule=!0,r.exports.default=r.exports},{}],5:[function(e,r,t){var i=e("./unsupportedIterableToArray.js");r.exports=function(e,r){var t,a,o,n,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return a=!(t=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return t=e.done,e},e:function(e){a=!0,o=e},f:function(){try{t||null==s.return||s.return()}finally{if(a)throw o}}};if(Array.isArray(e)||(s=i(e))||r&&e&&"number"==typeof e.length)return s&&(e=s),n=0,{s:r=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},r.exports.__esModule=!0,r.exports.default=r.exports},{"./unsupportedIterableToArray.js":13}],6:[function(e,r,t){r.exports=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e},r.exports.__esModule=!0,r.exports.default=r.exports},{}],7:[function(e,r,t){r.exports=function(e){return e&&e.__esModule?e:{default:e}},r.exports.__esModule=!0,r.exports.default=r.exports},{}],8:[function(e,r,t){r.exports=function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,o,n=[],s=!0,i=!1;try{for(t=t.call(e);!(s=(a=t.next()).done)&&(n.push(a.value),!r||n.length!==r);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==t.return||t.return()}finally{if(i)throw o}}return n}},r.exports.__esModule=!0,r.exports.default=r.exports},{}],9:[function(e,r,t){r.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},r.exports.__esModule=!0,r.exports.default=r.exports},{}],10:[function(e,r,t){var a=e("./defineProperty.js");function o(r,e){var t,a=Object.keys(r);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(r),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),a.push.apply(a,t)),a}r.exports=function(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach(function(e){a(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r},r.exports.__esModule=!0,r.exports.default=r.exports},{"./defineProperty.js":6}],11:[function(e,r,t){var a=e("./arrayWithHoles.js"),o=e("./iterableToArrayLimit.js"),n=e("./unsupportedIterableToArray.js"),s=e("./nonIterableRest.js");r.exports=function(e,r){return a(e)||o(e,r)||n(e,r)||s()},r.exports.__esModule=!0,r.exports.default=r.exports},{"./arrayWithHoles.js":2,"./iterableToArrayLimit.js":8,"./nonIterableRest.js":9,"./unsupportedIterableToArray.js":13}],12:[function(e,r,t){function a(e){return r.exports=a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r.exports.__esModule=!0,r.exports.default=r.exports,a(e)}r.exports=a,r.exports.__esModule=!0,r.exports.default=r.exports},{}],13:[function(e,r,t){var a=e("./arrayLikeToArray.js");r.exports=function(e,r){var t;if(e)return"string"==typeof e?a(e,r):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,r):void 0},r.exports.__esModule=!0,r.exports.default=r.exports},{"./arrayLikeToArray.js":1}],14:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Destinations=void 0;e=e("./producers"),e={DEFAULT:{id:"596068",defaultProducer:e.Producers.BBC},ACCOUNT:{id:"598250",defaultProducer:e.Producers.ACCOUNT},ACCOUNT_TEST:{id:"598252",defaultProducer:e.Producers.ACCOUNT},AUDIENCE_PORTAL:{id:"602136",defaultProducer:e.Producers.AUDIENCE_SERVICES},AUDIENCE_PORTAL_TEST:{id:"602137",defaultProducer:e.Producers.AUDIENCE_SERVICES},AUDIENCE_SERVICES_PS:{id:"602167",defaultProducer:e.Producers.AUDIENCE_SERVICES},AUDIENCE_SERVICES_PS_TEST:{id:"602168",defaultProducer:e.Producers.AUDIENCE_SERVICES},BBC_ARCHIVE_PS:{id:"605565",defaultProducer:e.Producers.BBC_ARCHIVE},BBC_ARCHIVE_PS_TEST:{id:"605566",defaultProducer:e.Producers.BBC_ARCHIVE},BBC_CORPORATE_PS:{id:"603550",defaultProducer:e.Producers.BBC},BBC_CORPORATE_PS_TEST:{id:"603551",defaultProducer:e.Producers.BBC},BBC_OTHER_NONJS:{id:"598253",defaultProducer:e.Producers.BBC_OTHER_NONJS},BBC_OTHER_NONJS_TEST:{id:"598254",defaultProducer:e.Producers.BBC_OTHER_NONJS},BBC_STUDIOS_PLAYER:{id:"606296",defaultProducer:e.Producers.BBC_STUDIOS},BBC_STUDIOS_PLAYER_TEST:{id:"606293",defaultProducer:e.Producers.BBC_STUDIOS},BBC_SYNDICATION:{id:"601718",defaultProducer:e.Producers.BBC},BBC_SYNDICATION_TEST:{id:"601719",defaultProducer:e.Producers.BBC},BBC_THREE:{id:"598255",defaultProducer:e.Producers.BBC_THREE},BBC_THREE_TEST:{id:"598256",defaultProducer:e.Producers.BBC_THREE},BBCS_BBC:{id:"637014",defaultProducer:e.Producers.BBC_STUDIOS},BBCS_BBC_TEST:{id:"637015",defaultProducer:e.Producers.BBC_STUDIOS},BITESIZE:{id:"598257",defaultProducer:e.Producers.BITESIZE},BITESIZE_TEST:{id:"598258",defaultProducer:e.Producers.BITESIZE},BLOGS_PS:{id:"603546",defaultProducer:e.Producers.BBC},BLOGS_PS_TEST:{id:"603547",defaultProducer:e.Producers.BBC},BRITBOX:{id:"598259",defaultProducer:e.Producers.BRITBOX},BRITBOX_TEST:{id:"598260",defaultProducer:e.Producers.BRITBOX},CBBC:{id:"598261",defaultProducer:e.Producers.CBBC},CBBC_TEST:{id:"598262",defaultProducer:e.Producers.CBBC},CBEEBIES:{id:"598263",defaultProducer:e.Producers.CBEEBIES},CBEEBIES_TEST:{id:"598264",defaultProducer:e.Producers.CBEEBIES},FEATURE_SITES_GNL:{id:"598265",defaultProducer:e.Producers.GNL_HOMEPAGE},FEATURE_SITES_GNL_TEST:{id:"598266",defaultProducer:e.Producers.GNL_HOMEPAGE},FOOD:{id:"598267",defaultProducer:e.Producers.BBC_FOOD},FOOD_TEST:{id:"598268",defaultProducer:e.Producers.BBC_FOOD},GAMES_PS:{id:"599452",defaultProducer:e.Producers.BBC},GAMES_PS_TEST:{id:"599454",defaultProducer:e.Producers.BBC},GATEWAY:{id:"598269",defaultProducer:e.Producers.GATEWAY},GATEWAY_TEST:{id:"598270",defaultProducer:e.Producers.GATEWAY},HOMEPAGE_GNL:{id:"598271",defaultProducer:e.Producers.GNL_HOMEPAGE},HOMEPAGE_GNL_TEST:{id:"598272",defaultProducer:e.Producers.GNL_HOMEPAGE},HOMEPAGE_PS:{id:"598273",defaultProducer:e.Producers.PS_HOMEPAGE},HOMEPAGE_PS_TEST:{id:"598274",defaultProducer:e.Producers.PS_HOMEPAGE},IDEAS:{id:"598275",defaultProducer:e.Producers.BBC},IDEAS_TEST:{id:"598276",defaultProducer:e.Producers.BBC},IPLAYER:{id:"598277",defaultProducer:e.Producers.IPLAYER},IPLAYER_TEST:{id:"598278",defaultProducer:e.Producers.IPLAYER},MEDIA_ACTION:{id:"598279",defaultProducer:e.Producers.MEDIA_ACTION},MEDIA_ACTION_TEST:{id:"598280",defaultProducer:e.Producers.MEDIA_ACTION},MONITORING:{id:"598281",defaultProducer:e.Producers.MONITORING},MONITORING_TEST:{id:"598282",defaultProducer:e.Producers.MONITORING},MUSIC:{id:"598283",defaultProducer:e.Producers.BBC_MUSIC},MUSIC_TEST:{id:"598284",defaultProducer:e.Producers.BBC_MUSIC},NATIONAL_MOMENTS_PS:{id:"605567",defaultProducer:e.Producers.BBC},NATIONAL_MOMENTS_PS_TEST:{id:"605568",defaultProducer:e.Producers.BBC},NEWS_PS:{id:"598285",defaultProducer:e.Producers.NEWS},NEWS_PS_TEST:{id:"598286",defaultProducer:e.Producers.NEWS},NEWS_GNL:{id:"598287",defaultProducer:e.Producers.NEWS},NEWS_GNL_TEST:{id:"598288",defaultProducer:e.Producers.NEWS},NEWS_LANGUAGES_GNL:{id:"598289",defaultProducer:e.Producers.NEWS},NEWS_LANGUAGES_GNL_TEST:{id:"598290",defaultProducer:e.Producers.NEWS},NEWS_LANGUAGES_PS:{id:"598291",defaultProducer:e.Producers.NEWS},NEWS_LANGUAGES_PS_TEST:{id:"598292",defaultProducer:e.Producers.NEWS},NEWSROUND:{id:"598293",defaultProducer:e.Producers.NEWSROUND},NEWSROUND_TEST:{id:"598294",defaultProducer:e.Producers.NEWSROUND},OTHER:{id:"598295",defaultProducer:e.Producers.OTHER},OTHER_TEST:{id:"598297",defaultProducer:e.Producers.OTHER},OWN_IT:{id:"598298",defaultProducer:e.Producers.CBBC},OWN_IT_TEST:{id:"598299",defaultProducer:e.Producers.CBBC},PROGRAMMES_PS:{id:"598300",defaultProducer:e.Producers.PROGRAMMES},PROGRAMMES_PS_TEST:{id:"598301",defaultProducer:e.Producers.PROGRAMMES},PS_AUDIENCE_ENGAGEMENT:{id:"609581",defaultProducer:e.Producers.PARTICIPATION},PS_AUDIENCE_ENGAGEMENT_TEST:{id:"609582",defaultProducer:e.Producers.PARTICIPATION},PS_PAN_BBC:{id:"641476",defaultProducer:e.Producers.BBC},PS_PAN_BBC_TEST:{id:"641477",defaultProducer:e.Producers.BBC},RED_BUTTON_PS:{id:"601192",defaultProducer:e.Producers.BBC},RED_BUTTON_PS_TEST:{id:"601193",defaultProducer:e.Producers.BBC},REWIND_PS:{id:"603552",defaultProducer:e.Producers.BBC},REWIND_PS_TEST:{id:"603553",defaultProducer:e.Producers.BBC},R_AND_D_PS:{id:"607103",defaultProducer:e.Producers.RD},R_AND_D_PS_TEST:{id:"607104",defaultProducer:e.Producers.RD},SEARCH_GNL:{id:"598302",defaultProducer:e.Producers.SEARCH},SEARCH_GNL_TEST:{id:"598303",defaultProducer:e.Producers.SEARCH},SEARCH_PS:{id:"598304",defaultProducer:e.Producers.SEARCH},SEARCH_PS_TEST:{id:"598305",defaultProducer:e.Producers.SEARCH},SILVER_PS:{id:"607105",defaultProducer:e.Producers.BBC},SILVER_PS_TEST:{id:"607106",defaultProducer:e.Producers.BBC},SOUNDS:{id:"598306",defaultProducer:e.Producers.SOUNDS},SOUNDS_TEST:{id:"598307",defaultProducer:e.Producers.SOUNDS},SPORT_GNL:{id:"598308",defaultProducer:e.Producers.SPORT},SPORT_GNL_TEST:{id:"598309",defaultProducer:e.Producers.SPORT},SPORT_PS:{id:"598310",defaultProducer:e.Producers.SPORT},SPORT_PS_TEST:{id:"598311",defaultProducer:e.Producers.SPORT},STORYWORKS_GNL:{id:"598312",defaultProducer:e.Producers.GNL_STORYWORKS},STORYWORKS_GNL_TEST:{id:"598313",defaultProducer:e.Producers.GNL_STORYWORKS},SUBTITLES_PS:{id:"603548",defaultProducer:e.Producers.PROGRAMMES},SUBTITLES_PS_TEST:{id:"603549",defaultProducer:e.Producers.PROGRAMMES},SYNDICATION_PARTNERS_GNL:{id:"598314",defaultProducer:e.Producers.WS_PARTNERS_B2B},SYNDICATION_PARTNERS_GNL_TEST:{id:"598315",defaultProducer:e.Producers.WS_PARTNERS_B2B},TASTER:{id:"598316",defaultProducer:e.Producers.TASTER},TASTER_TEST:{id:"598317",defaultProducer:e.Producers.TASTER},TEACH:{id:"598318",defaultProducer:e.Producers.BBC},TEACH_TEST:{id:"598320",defaultProducer:e.Producers.BBC},TOPICS_GNL:{id:"612991",defaultProducer:e.Producers.BBC},TOPICS_GNL_TEST:{id:"614559",defaultProducer:e.Producers.BBC},TOPICS_PS:{id:"612261",defaultProducer:e.Producers.BBC},TOPICS_PS_TEST:{id:"612262",defaultProducer:e.Producers.BBC},VOICE:{id:"598326",defaultProducer:e.Producers.VOICE},VOICE_TEST:{id:"598328",defaultProducer:e.Producers.VOICE},WEATHER_GNL:{id:"598330",defaultProducer:e.Producers.WEATHER},WEATHER_GNL_TEST:{id:"598332",defaultProducer:e.Producers.WEATHER},WEATHER_PS:{id:"598338",defaultProducer:e.Producers.WEATHER},WEATHER_PS_TEST:{id:"598339",defaultProducer:e.Producers.WEATHER},WS_LEARNING_ENGLISH:{id:"598340",defaultProducer:e.Producers.WS_LEARNING_ENGLISH},WS_LEARNING_ENGLISH_TEST:{id:"598341",defaultProducer:e.Producers.WS_LEARNING_ENGLISH},WS_NEWS_LANGUAGES:{id:"598342",defaultProducer:e.Producers.BBC_WORLD_NEWS},WS_NEWS_LANGUAGES_TEST:{id:"598343",defaultProducer:e.Producers.BBC_WORLD_NEWS},WS_PARTNERS_B2B:{id:"598820",defaultProducer:e.Producers.WS_PARTNERS_B2B},WS_PARTNERS_B2B_TEST:{id:"598823",defaultProducer:e.Producers.WS_PARTNERS_B2B},WS_PROGRAMMES:{id:"598344",defaultProducer:e.Producers.PROGRAMMES},WS_PROGRAMMES_TEST:{id:"598345",defaultProducer:e.Producers.PROGRAMMES},WS_SYNDICATION_PARTNERS:{id:"598346",defaultProducer:e.Producers.WS_PARTNERS_B2B},WS_SYNDICATION_PARTNERS_TEST:{id:"598347",defaultProducer:e.Producers.WS_PARTNERS_B2B},get:function(e){var r;return r=e?this[e.toUpperCase()]:r}};t.Destinations=e},{"./producers":17}],15:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ATILabelKeys=void 0;t.ATILabelKeys={BBC_COUNTER_NAME:"page",LEVEL_1_SITE:"site",LEVEL_2_SITE:"site_level2",SECTION:"section",CHAPTER_1:"page_chapter1",CHAPTER_2:"page_chapter2",CHAPTER_3:"page_chapter3",CONTENT_ID:"content_id",APP_TYPE:"app_type",APP_NAME:"app_name",LANGUAGE:"language",URL:"url",REFERRER_URL:"referrer_url",CONTENT_TYPE:"content_type",NATIONS_PRODUCER:"nations_producer",LIBRARY_VERSION:"library_version",PAGE_TITLE:"page_title",CUSTOM_VAR_1:"x11",CUSTOM_VAR_2:"x12",CUSTOM_VAR_3:"x13",CUSTOM_VAR_4:"x14",CUSTOM_VAR_5:"x15",CUSTOM_VAR_6:"x16",CUSTOM_VAR_7:"x17",CUSTOM_VAR_8:"x18",CUSTOM_VAR_9:"x19",CUSTOM_VAR_10:"x20",SOURCE:"source",CONTAINER:"container",METADATA:"metadata",PERSONALISATION:"personalisation",RESULT:"result",COLLECT_DOMAIN:"collectDomain",COLLECT_DOMAIN_SSL:"collectDomainSSL"}},{}],16:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NationsProducers=void 0;t.NationsProducers={WALES:"wales",ENGLAND:"england",SCOTLAND:"scotland",NORTHERN_IRELAND:"northern_ireland",NONE:"",getName:function(e){var r;return r=e?this[e.toUpperCase()]:r}}},{}],17:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Producers=void 0;t.Producers={ACADEMY:125,ACCOUNT:1,AFAAN_OROMOO:2,AFRIQUE:3,AMHARIC:4,ARABIC:5,AZERI:6,BBC:7,BBC_ALBA:8,BBC_ARCHIVE:127,BBC_ARTS:9,BBC_ASIAN_NETWORK:10,BBC_FOOD:11,BBC_FOUR:12,BBC_HD:13,BBC_MUSIC:14,BBC_NEWS_CHANNEL:15,BBC_ONE:16,BBC_PARLIAMENT_CHANNEL:17,BBC_RADIO:18,BBC_RADIO_1:19,BBC_RADIO_1XTRA:20,BBC_RADIO_2:21,BBC_RADIO_3:22,BBC_RADIO_4:23,BBC_RADIO_4_EXTRA:24,BBC_RADIO_5_LIVE:25,BBC_RADIO_6_MUSIC:26,BBC_SCOTLAND:120,BBC_SEND:121,BBC_STUDIOS:128,BBC_OTHER_NONJS:27,BBC_THREE:28,BBC_TWO:29,BBC_WORLD_NEWS:30,BENGALI:31,BITESIZE:32,BRASIL:33,BRITBOX:34,BRITBOX_AU:132,BURMESE:35,CBBC:36,CBEEBIES:37,CHINESE:38,ENGLISH_REGIONS:39,GAHUZA:40,GATEWAY:41,GNL_AUTOS:42,GNL_CAPITAL:43,GNL_CULTURE:44,GNL_EARTH:45,GNL_FUTURE:46,GNL_HOMEPAGE:47,GNL_STORYWORKS:48,GNL_TRAVEL:49,GUJARATI:50,HAUSA:51,HINDI:52,IGBO:53,INDONESIAN:54,IPLAYER:55,JAPANESE:56,KOREAN:57,KYRGYZ:58,MARATHI:59,MEDIA_ACTION:60,MONITORING:61,MUNDO:62,NEPALI:63,NEWS:64,NEWS_LABS:129,NEWSROUND:65,NORTHERN_IRELAND:66,OTHER:67,OWN_IT:118,PARTICIPATION:130,PASHTO:68,PERSIAN:69,PIDGIN:70,PROGRAMMES:71,PS_HOMEPAGE:72,PUNJABI:73,RD:126,RECEPTION:124,REEL:74,RUSSIAN:75,S4C:76,SCHOOL_RADIO:77,SCHOOL_REPORT:78,SCOTLAND:79,SEARCH:80,SERBIAN:81,SINHALA:82,SOMALI:83,SOUNDS:84,SPORT:85,SWAHILI:86,TAMIL:87,TASTER:88,TEACH:119,TELUGU:89,THAI:90,TIGRINYA:91,TURKISH:92,TV_CERTIFICATION:131,UK_CHINA:93,UKRAINIAN:94,URDU:95,UZBEK:96,VIETNAMESE:97,VOICE:98,VOICE_FIRST_FORMATS:99,VOLT:122,WALES:100,WEATHER:101,WEATHER_WATCHERS:102,WEB_APPS:133,WORLD_SERVICE_ENGLISH:103,WORKLIFE:104,WS_LEARNING_ENGLISH:105,WS_PARTNERS_B2B:106,YORUBA:107,NEWS_ENGLISH_REGIONS:108,SPORT_ENGLISH_REGIONS:109,NEWS_SCOTLAND:110,SPORT_SCOTLAND:111,NEWS_WALES:112,SPORT_WALES:113,NEWS_NORTHERN_IRELAND:114,SPORT_NORTHERN_IRELAND:115,AUDIENCE_SERVICES:116,WORLD_NEWS_PROGRAMMES:117,getId:function(e){var r;return r=e?this[e.toUpperCase()]:r}}},{}],18:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomVariables=void 0;var a=e("./versions.json"),o=e("./util/label-cleanser"),n=e("./config/label-keys"),s=[n.ATILabelKeys.CONTENT_ID,n.ATILabelKeys.APP_TYPE,n.ATILabelKeys.APP_NAME,n.ATILabelKeys.LANGUAGE,n.ATILabelKeys.URL,n.ATILabelKeys.REFERRER_URL,n.ATILabelKeys.CONTENT_TYPE,n.ATILabelKeys.NATIONS_PRODUCER,n.ATILabelKeys.LIBRARY_VERSION,n.ATILabelKeys.PAGE_TITLE,n.ATILabelKeys.CUSTOM_VAR_1,n.ATILabelKeys.CUSTOM_VAR_2,n.ATILabelKeys.CUSTOM_VAR_3,n.ATILabelKeys.CUSTOM_VAR_4,n.ATILabelKeys.CUSTOM_VAR_5,n.ATILabelKeys.CUSTOM_VAR_6,n.ATILabelKeys.CUSTOM_VAR_7,n.ATILabelKeys.CUSTOM_VAR_8,n.ATILabelKeys.CUSTOM_VAR_9,n.ATILabelKeys.CUSTOM_VAR_10];t.CustomVariables={create:function(e,r,t){var a=this._setCustomVariable(a,n.ATILabelKeys.APP_TYPE,"responsive");if(a=this._setCustomVariable(a,n.ATILabelKeys.APP_NAME,this._getAppName(null,"bbc_website")),a=this._setCustomVariable(a,n.ATILabelKeys.LIBRARY_VERSION,this.getLibraryVersion()),r&&(a=this._setOrbitCustomVariables(a,r)),t&&(a=this._setDocumentCustomVariables(a,t)),e)for(var o in e)this._isCustomVariable(o)&&(a=this._setCustomVariable(a,o,e[o]),delete e[o]);return a},_getAppName:function(e,r){e=e&&r?"".concat(e,"-").concat(r):r;return e},getLibraryVersion:function(){return"".concat(a.name,"-").concat(a.version)},_isCustomVariable:function(e){return void 0!==e&&s.includes(e)&&"function"!=typeof e},_setCustomVariable:function(e,r,t){return null!=r&&null!=t&&(e=e||{},t=o.LabelCleanser.removeSensitiveInfo(t),(t=o.LabelCleanser.cleanCustomVariable(t))?e[r]=t:delete e[r]),e},_setDocumentCustomVariables:function(e,r){return r&&(e=this._setCustomVariable(e,n.ATILabelKeys.URL,r.URL),e=this._setCustomVariable(e,n.ATILabelKeys.PAGE_TITLE,r.title)),e},_setOrbitCustomVariables:function(e,r){return r&&(e=this._setCustomVariable(e,n.ATILabelKeys.CONTENT_ID,r.contentId),e=this._setCustomVariable(e,n.ATILabelKeys.CONTENT_TYPE,r.contentType),e=this._setCustomVariable(e,n.ATILabelKeys.LANGUAGE,r.language),e=this._setCustomVariable(e,n.ATILabelKeys.REFERRER_URL,r.referrer),e=this._setProductCustomVariables(e,r.additionalProperties)),e},_setProductCustomVariables:function(e,r){return r&&(e=this._setCustomVariable(e,n.ATILabelKeys.APP_TYPE,r.app_type),e=this._setCustomVariable(e,n.ATILabelKeys.APP_NAME,this._getAppName(r.app_category,r.app_name)),r.content_language&&(e=this._setCustomVariable(e,n.ATILabelKeys.LANGUAGE,r.content_language)),r.referrer_url&&(e="none"===r.referrer_url?this._setCustomVariable(e,n.ATILabelKeys.REFERRER_URL,""):this._setCustomVariable(e,n.ATILabelKeys.REFERRER_URL,r.referrer_url)),e=this._setCustomVariable(e,n.ATILabelKeys.CUSTOM_VAR_1,r.custom_var_1),e=this._setCustomVariable(e,n.ATILabelKeys.CUSTOM_VAR_2,r.custom_var_2),e=this._setCustomVariable(e,n.ATILabelKeys.CUSTOM_VAR_3,r.custom_var_3),e=this._setCustomVariable(e,n.ATILabelKeys.CUSTOM_VAR_4,r.custom_var_4),e=this._setCustomVariable(e,n.ATILabelKeys.CUSTOM_VAR_5,r.custom_var_5),e=this._setCustomVariable(e,n.ATILabelKeys.CUSTOM_VAR_6,r.custom_var_6),e=this._setCustomVariable(e,n.ATILabelKeys.CUSTOM_VAR_7,r.custom_var_7),e=this._setCustomVariable(e,n.ATILabelKeys.CUSTOM_VAR_8,r.custom_var_8),e=this._setCustomVariable(e,n.ATILabelKeys.CUSTOM_VAR_9,r.custom_var_9),e=this._setCustomVariable(e,n.ATILabelKeys.CUSTOM_VAR_10,r.custom_var_10)),e}}},{"./config/label-keys":15,"./util/label-cleanser":24,"./versions.json":26}],19:[function(e,r,t){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault").default,u=(Object.defineProperty(t,"__esModule",{value:!0}),t.ReverbClient=void 0,a(e("@babel/runtime/helpers/objectSpread2"))),s=a(e("@babel/runtime/helpers/createForOfIteratorHelper")),n=a(e("@babel/runtime/helpers/classCallCheck")),i=a(e("@babel/runtime/helpers/createClass")),l=e("./config/label-keys"),d=e("./util/label-cleanser"),c=e("./custom-variables"),_=e("./config/destinations"),E=e("./config/producers"),P=e("./config/nations-producers"),p=e("./user-action-event"),T=e("./util/debug"),f=e("./util/helpers"),A=e("./versions.json"),S="user_id",b="responsive",C="bbc_website",R="logws1363.ati-host.net",I="a1.api.bbc.co.uk",N={persistent:!0},a=function(){function o(e){var r=e.staticLocation,t=e.pianoAnalyticsVersion,a=e.getPageVariables,e=e.getUserVariables;(0,n.default)(this,o),this.staticLocation=r||"".concat(A.staticHost,"/reverb-client-js/"),this.pianoAnalyticsVersion=t||A.pianoAnalyticsVersion,this.counterName="",this.paSdkLoaded=!1,this.ready=!1,this.echoDeviceId=null,this.bbcHid,this.signedIn=!1,this.atiInitPromise=null,this.echoDeviceIdCookie="ckns_echo_device_id",this.eventHistory=[],this.suppressView=!1,this.getUserVariables=e,this.getPageVariables=a,this.nationsProducer,this.pageSentPromise=this._resetPageSentPromise(),this.__resolvePageSent}return(0,i.default)(o,[{key:"_resetPageSentPromise",value:function(){var r=this;return new Promise(function(e){r.__resolvePageSent=e})}},{key:"_readCookie",value:function(e){var r=document.cookie.split(";");if(r){var t,a=(0,s.default)(r);try{for(a.s();!(t=a.n()).done;){var o=t.value;if((o=o.trim()).startsWith(e+"=")){var n=o.split("=");if(1<n.length)return encodeURIComponent(n[1])}}}catch(e){a.e(e)}finally{a.f()}}return null}},{key:"_setChapterProperties",value:function(t){[l.ATILabelKeys.CHAPTER_1,l.ATILabelKeys.CHAPTER_2,l.ATILabelKeys.CHAPTER_3].forEach(function(e,r){t&&t[r]?pa.setProperty(e,t[r],N):pa.deleteProperty(e)})}},{key:"_setPageValues",value:function(){var a=this;return this.getPageVariables().then(function(e){var r,t;e&&a.paSdkLoaded&&(a.setDestination(e.destination),e.producer&&a.setProducer(e.producer),a.setCounterName(e.name||a._generateCounterName()),a.addLabel(l.ATILabelKeys.BBC_COUNTER_NAME,a.getCounterName()),e.additionalProperties?(e.additionalProperties.app_type?"none"===e.additionalProperties.app_type?e.additionalProperties.app_type="":e.additionalProperties.app_type=e.additionalProperties.app_type:e.additionalProperties.app_type=b,e.additionalProperties.app_name?"none"===e.additionalProperties.app_name?e.additionalProperties.app_name="":e.additionalProperties.app_name=e.additionalProperties.app_name:e.additionalProperties.app_name=C):(e.additionalProperties={},e.additionalProperties.app_type=b,e.additionalProperties.app_name=C),r=c.CustomVariables.create(void 0,e,document),e&&e[l.ATILabelKeys.SECTION]?(t=d.LabelCleanser.cleanCustomVariable(e[l.ATILabelKeys.SECTION]).split("::",3),a._setChapterProperties(t)):a._setChapterProperties([]),r&&pa.setProperties(r,N),pa.setProperty(l.ATILabelKeys.LIBRARY_VERSION,A.name+"-"+A.version,N),e.additionalProperties)&&(t=e.additionalProperties,a.appType=t.app_type,a.appName=t.app_name,a._setCustomProperties(t),pa.setProperty(l.ATILabelKeys.APP_TYPE,t.app_type,N),pa.setProperty(l.ATILabelKeys.APP_NAME,c.CustomVariables._getAppName(t.app_category,t.app_name),N),!0!==t.suppressView&&"true"!==t.suppressView||(a.suppressView=!0),a._setDebug(t),a._setCollectionDomains(e),e.additionalProperties.hasOwnProperty(l.ATILabelKeys.NATIONS_PRODUCER)&&a.setNationsProducer(e.additionalProperties.nations_producer),a._setTestParams(e))})}},{key:"_setCustomProperties",value:function(t){var e=["custom_var_","content_language","referrer_url","suppressView","trace","testDomain","app_name","app_category","app_type","nations_producer"];Object.keys(t).filter(function(r){return!e.some(function(e){return!r||f.Helpers.startsWith(r,e)})}).forEach(function(e){var r;e&&(r=d.LabelCleanser.cleanCustomVariable(e),e=d.LabelCleanser.cleanCustomVariable(t[e]),Array.isArray(e)&&(r="a:s:"+r),pa.setProperty(r,e,{persistent:!1}))})}},{key:"_setTestParams",value:function(e){e.additionalProperties.trace&&pa.setProperty("trace",e.additionalProperties.trace,N)}},{key:"_setCollectionDomains",value:function(e){e=e.additionalProperties.testDomain||(e.destination&&e.destination.toUpperCase().match(/TEST$/)?R:I);pa.setConfiguration(l.ATILabelKeys.COLLECT_DOMAIN,e),pa.setConfiguration(l.ATILabelKeys.COLLECT_DOMAIN_SSL,e)}},{key:"_setUserValues",value:function(){var r=this;return this.getUserVariables().then(function(e){e&&(e.hashedId&&e.isSignedIn?r.bbcHid=encodeURIComponent(e.hashedId):e.isSignedIn?r.bbcHid="unidentified-user":r.bbcHid=null,r.signedIn=e.isSignedIn,r.bbcHid?r._setPAHid(r.bbcHid):r._removePAHid())})}},{key:"_getCookieDomain",value:function(e){e=e&&e.location&&e.location.hostname&&e.location.hostname.match(/.bbc.com$/)?"bbc.com":"bbc.co.uk";return e}},{key:"_isScriptLoaded",value:function(){for(var e=document.getElementsByTagName("script"),r=0;r<e.length;r++)if(e[r].src==="".concat(this.staticLocation,"piano-analytics-").concat(this.pianoAnalyticsVersion,".js"))return!0;return!1}},{key:"_loadPianoSDK",value:function(){var t=this;return!1===this._isScriptLoaded()?(this.atiInitPromise||(this.atiInitPromise=new Promise(function(e){var r=document.createElement("script");r.type="text/javascript",r.src="".concat(t.staticLocation,"piano-analytics-").concat(t.pianoAnalyticsVersion,".js"),r.async=!0,r.onload=function(){t.paSdkLoaded=!0,e()},(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode).insertBefore(r,null)})),this.atiInitPromise):new Promise(function(e){t.paSdkLoaded=!0,e()})}},{key:"_unloadPianoSDK",value:function(){for(var e=document.getElementsByTagName("script"),r=0;r<e.length;r++)e[r].src==="".concat(this.staticLocation,"piano-analytics-").concat(this.pianoAnalyticsVersion,".js")&&e[r].remove()}},{key:"_removePAHid",value:function(){pa.deleteProperty("at"),pa.deleteProperty(S)}},{key:"_setPAHid",value:function(e){pa.setProperty("at",e),pa.setProperty(S,e,N)}},{key:"_setPADeviceId",value:function(e){pa.setProperty("idclient",e,N)}},{key:"initialise",value:function(){var r=this;return this.isReady()?new Promise(function(e){r._initPianoAnalytics(),e()}):(this.echoDeviceId=this._readCookie(this.echoDeviceIdCookie),this._loadPianoSDK().then(function(){return r._initPianoAnalytics()}))}},{key:"_initPianoAnalytics",value:function(){var e={secure:!0,sameSite:"none",cookieSecure:!0,sameSiteStrict:!0,site:parseInt(_.Destinations.DEFAULT.id),cookieDomain:this._getCookieDomain(window),sendEmptyProperties:!1};pa.setConfigurations(e),this.echoDeviceId&&this._setPADeviceId(this.echoDeviceId),this._contentLoaded(),this.ready=!0,this.suppressView=!1}},{key:"isReady",value:function(){return this.ready}},{key:"viewEvent",value:function(){return Promise.all([this._setUserValues(),this._setPageValues()]).then(this._sendViewEvent.bind(this))}},{key:"_sendViewEvent",value:function(){var r=this;return new Promise(function(e){r.suppressView&&"false"!==r.suppressView?r.pageSentPromise=r._resetPageSentPromise():(_paq.push(["sendEvent","page.display"]),T.Debug.isEnabled()&&T.Debug.info("Sending page view event"),r.__resolvePageSent()),e()})}},{key:"userActionEvent",value:function(e,r,t,a){var o=this;return this.pageSentPromise.then(function(){return o._sendUserActionEvent(e,r,t,a)})}},{key:"_sendUserActionEvent",value:function(a,o,n,s){var i=this;return new Promise(function(e){var r=n||{},t=new p.UserActionEvent,r=(0,u.default)({},r);"viewability"===a&&(i._constructCustomEventData(r,o),t.sendCustomEvent(r)),r.actionName=o,r.actionType=a,(r.actionName||r.container)&&(r.userId=i.bbcHid,r[l.ATILabelKeys.BBC_COUNTER_NAME]=i.getCounterName(),s?t.sendClickEvent(r):t.sendImpressionEvent(r)),e()})}},{key:"_constructCustomEventData",value:function(e,r){e.user=e.user||{},e.user.id=this.bbcHid,e.app={},e.app.type=this.appType||b,e.app.name=this.appName||C,e.event=e.event||{},e.event.category=e.event.category||"viewability",e.event.action=e.event.action||r}},{key:"setCounterName",value:function(e){this.counterName=d.LabelCleanser.cleanPageName(e)}},{key:"getCounterName",value:function(){return this.counterName}},{key:"_generateCounterName",value:function(){var e=new RegExp(/\/$/),r=new RegExp(/^\//),t=new RegExp(/\//g),r=window.location.pathname.replace(r,"").replace(e,"").replace(t,".");return""===r&&(e=new RegExp(/ \- /),t=new RegExp(/BBC /gi),r=document.title.replace(e,"").replace(t,"")),d.LabelCleanser.cleanPageName(r)}},{key:"_contentLoaded",value:function(){""===this.counterName&&this.setCounterName(this._generateCounterName())}},{key:"getSiteId",value:function(){return String(pa.getConfiguration(l.ATILabelKeys.LEVEL_1_SITE))}},{key:"addLabel",value:function(e,r){e===l.ATILabelKeys.BBC_COUNTER_NAME||e===l.ATILabelKeys.LEVEL_2_SITE?pa.setProperty(e,r,N):pa.setProperty(e,d.LabelCleanser.cleanCustomVariable(r),N)}},{key:"setDestination",value:function(e){e=_.Destinations.get(e)||_.Destinations.DEFAULT;return this.addLabel(l.ATILabelKeys.LEVEL_2_SITE,e.defaultProducer.toString()),pa.setConfiguration(l.ATILabelKeys.LEVEL_1_SITE,e.id),this}},{key:"setProducer",value:function(e){e=e?E.Producers.getId(e):0;return!e&&0!==e||this.addLabel(l.ATILabelKeys.LEVEL_2_SITE,e.toString()),this}},{key:"setNationsProducer",value:function(e){e=e?P.NationsProducers.getName(e):P.NationsProducers.NONE;return void 0!==e&&(this.nationsProducer=e),this.paSdkLoaded&&void 0!==this.nationsProducer&&(this.nationsProducer!==P.NationsProducers.NONE?(pa.deleteProperty(l.ATILabelKeys.NATIONS_PRODUCER),pa.setProperty(l.ATILabelKeys.NATIONS_PRODUCER,this.nationsProducer,N)):pa.deleteProperty(l.ATILabelKeys.NATIONS_PRODUCER)),this}},{key:"getProperties",value:function(){return{bbcHid:this.bbcHid,signedIn:this.signedIn}}},{key:"_setDebug",value:function(e){if(!0===e.enableDebug||"true"===e.enableDebug?T.Debug.enable():T.Debug.disable(),!0===e.throwOnError||"true"===e.throwOnError?T.Debug.setThrowOnError(!0):T.Debug.setThrowOnError(!1),e.debugLevel)if("number"==typeof e.debugLevel)T.Debug.setLevel(e.debugLevel);else if("string"==typeof e.debugLevel)switch(e.debugLevel.toLowerCase()){case"info":T.Debug.setLevel(T.Debug.DebugLevels.INFO);break;case"warn":T.Debug.setLevel(T.Debug.DebugLevels.WARN);break;case"error":T.Debug.setLevel(T.Debug.DebugLevels.ERROR)}}}]),o}();(t.ReverbClient=a).Debug=T.Debug},{"./config/destinations":14,"./config/label-keys":15,"./config/nations-producers":16,"./config/producers":17,"./custom-variables":18,"./user-action-event":21,"./util/debug":22,"./util/helpers":23,"./util/label-cleanser":24,"./versions.json":26,"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/createForOfIteratorHelper":5,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/helpers/objectSpread2":10}],20:[function(e,r,t){"use strict";var a=e("./reverb-client"),e=e("./util/orbit-variables");window.__reverb.__reverbTimeout&&clearTimeout(window.__reverb.__reverbTimeout),window.__reverb.__resolveReverbLoaded(new a.ReverbClient({staticLocation:window.__reverbStaticLocation,pianoAnalyticsVersion:window.__pianoAnalyticsVersion,getPageVariables:e.OrbitVariables.getPageVariables,getUserVariables:e.OrbitVariables.getUserVariables}))},{"./reverb-client":19,"./util/orbit-variables":25}],21:[function(e,r,t){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault").default,s=(Object.defineProperty(t,"__esModule",{value:!0}),t.UserActionEvent=void 0,a(e("@babel/runtime/helpers/createForOfIteratorHelper"))),i=a(e("@babel/runtime/helpers/objectSpread2")),u=a(e("@babel/runtime/helpers/typeof")),l=a(e("@babel/runtime/helpers/slicedToArray")),o=a(e("@babel/runtime/helpers/classCallCheck")),n=a(e("@babel/runtime/helpers/createClass")),d=e("./config/label-keys"),c=e("./util/label-cleanser"),_=e("./util/debug"),E={EVENT_ACTION:"unknown",CAMPAIGN_ID:"Page",VARIANT:{},FORMAT:{},GENERAL_PLACEMENT:"unknown",DETAILED_PLACEMENT:"",ADVERTISER_ID:"",URL:"unknown"},P="click",p="impression",a=function(){function e(){(0,o.default)(this,e)}return(0,n.default)(e,[{key:"_buildCreation",value:function(e){var r=e&&e.actionName||E.EVENT_ACTION;return e&&e.type&&(r+="~"+e.type),r}},{key:"_formatEventValue",value:function(e){return c.LabelCleanser.cleanCustomVariable(e)}},{key:"_serialiseObjectForAti",value:function(t){return Object.keys(t).map(function(e){var r="".concat(e,"="),e=t[e];return null!=e&&(r+=e.toString().substring(0,255).replace(/(\~|\=)/g,"_")),r}).join("~")}},{key:"_sendEvent",value:function(e,r){var t=e[d.ATILabelKeys.RESULT]||E.URL;try{t=decodeURIComponent(t)}catch(e){_.Debug.isEnabled()&&_.Debug.error("Error decoding url: ".concat(e))}t={onsitead_creation:this._formatEventValue(this._buildCreation(e)),onsitead_campaign:this._formatEventValue(e[d.ATILabelKeys.CONTAINER]||E.CAMPAIGN_ID),onsitead_variant:this._formatEventValue(this._serialiseObjectForAti(e[d.ATILabelKeys.PERSONALISATION]||E.VARIANT)),onsitead_format:this._formatEventValue(this._serialiseObjectForAti(e[d.ATILabelKeys.METADATA]||E.FORMAT)),onsitead_general_placement:this._formatEventValue(e[d.ATILabelKeys.BBC_COUNTER_NAME]||E.GENERAL_PLACEMENT),onsitead_detailed_placement:this._formatEventValue(e.user||E.DETAILED_PLACEMENT),onsitead_advertiser:this._formatEventValue(e[d.ATILabelKeys.SOURCE]||E.ADVERTISER_ID),onsitead_url:this._formatEventValue(c.LabelCleanser.removeSensitiveInfo(t))};pa&&(e.echo_event&&pa.setProperty("echo_event",e.echo_event),e=r===P?"publisher.click":"publisher.display",_.Debug.isEnabled()&&_.Debug.info("Sending user action ".concat(e," event"),t),_paq.push(["sendEvent",e,t]))}},{key:"_formatSupplementary",value:function(e){for(var r={},t=0;t<e.length;t++)r[(t+1).toString()]=e[t];return r}},{key:"_extractLabelsForCustomEvent",value:function(e){var r={};if(Object.entries(e).length)for(var t=0,a=Object.entries(e);t<a.length;t++){var o,n=(0,l.default)(a[t],2),s=n[0],n=n[1];"object"===(0,u.default)(n)?(o=(0,i.default)({},n),"event"===s&&n.details&&(delete o.details.elem,delete o.details.originalEvent),r[s]=JSON.parse(JSON.stringify(o))):r[s]=n}return r}},{key:"_processItem",value:function(e,r,t){return Array.isArray(r)?(this._batchSendCustomEvents(e,r,t),null):(this._hasSupplementaryThatIsAnArray(r)&&(r.supplementary=this._formatSupplementary(r.supplementary)),r)}},{key:"sendCustomEvent",value:function(e){var r=e.item,t=e.event;if(t&&pa){t=[t.category,t.subcategory,t.action,t.type].filter(function(e){return!!e}).join("."),e=this._extractLabelsForCustomEvent(e);if(r){r=this._processItem(t,r,e);if(!r)return;e.item=r}_paq.push(["sendEvent",t,e])}}},{key:"_batchSendCustomEvents",value:function(e,r,t){var a,o=(0,s.default)(r);try{for(o.s();!(a=o.n()).done;){var n=a.value;this._hasSupplementaryThatIsAnArray(n)&&(n.supplementary=this._formatSupplementary(n.supplementary))}}catch(e){o.e(e)}finally{o.f()}(t=t||{}).items_list=r,_paq.push(["sendEvent",e,t])}},{key:"_hasSupplementaryThatIsAnArray",value:function(e){return e&&e.supplementary&&Array.isArray(e.supplementary)}},{key:"sendClickEvent",value:function(e){this._sendEvent(e,P)}},{key:"sendImpressionEvent",value:function(e){this._sendEvent(e,p)}}]),e}();t.UserActionEvent=a},{"./config/label-keys":15,"./util/debug":22,"./util/label-cleanser":24,"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/createForOfIteratorHelper":5,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/helpers/objectSpread2":10,"@babel/runtime/helpers/slicedToArray":11,"@babel/runtime/helpers/typeof":12}],22:[function(e,r,t){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault").default,o=(Object.defineProperty(t,"__esModule",{value:!0}),t.Debug=void 0,a(e("@babel/runtime/helpers/typeof"))),n=a(e("@babel/runtime/helpers/classCallCheck")),s=a(e("@babel/runtime/helpers/createClass")),a=function(){function r(){(0,n.default)(this,r)}return(0,s.default)(r,null,[{key:"callConsole",value:function(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"log";"object"===("undefined"==typeof console?"undefined":(0,o.default)(console))&&"function"==typeof console[t]&&(r?console[t](e,r):console[t](e))}},{key:"enable",value:function(){r.enabled=!0}},{key:"disable",value:function(){r.enabled=!1}},{key:"isEnabled",value:function(){return r.enabled}},{key:"getLevel",value:function(){return r.level}},{key:"getThrowOnError",value:function(){return r.throwOnError}},{key:"setThrowOnError",value:function(e){r.throwOnError=e}},{key:"setLevel",value:function(e){e>=this.DebugLevels.ERROR?r.level=this.DebugLevels.ERROR:e<=this.DebugLevels.INFO?r.level=this.DebugLevels.INFO:r.level=this.DebugLevels.WARN}},{key:"info",value:function(e,r){this.enabled&&this.level===this.DebugLevels.INFO&&this.callConsole("REVERB_DEBUG [INFO]: "+e,r)}},{key:"warn",value:function(e,r){this.enabled&&this.level<=this.DebugLevels.WARN&&this.callConsole("REVERB_DEBUG [WARN]: "+e,r)}},{key:"error",value:function(e,r){if(this.enabled&&this.level<=this.DebugLevels.ERROR&&(this.callConsole("REVERB_DEBUG [ERROR]: "+e,r),this.throwOnError))throw"REVERB_DEBUG [ERROR]: "+e}}]),r}();(t.Debug=a).throwOnError=!1,a.enabled=!1,a.DebugLevels={INFO:0,WARN:1,ERROR:2},a.level=a.DebugLevels.ERROR},{"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/helpers/typeof":12}],23:[function(e,r,t){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault").default,o=(Object.defineProperty(t,"__esModule",{value:!0}),t.Helpers=void 0,a(e("@babel/runtime/helpers/classCallCheck"))),n=a(e("@babel/runtime/helpers/createClass"));t.Helpers=function(){function e(){(0,o.default)(this,e)}return(0,n.default)(e,null,[{key:"startsWith",value:function(e,r){return!(!e||!r)&&0===e.indexOf(r)}}]),e}()},{"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":7}],24:[function(e,r,t){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault").default,n=(Object.defineProperty(t,"__esModule",{value:!0}),t.LabelCleanser=void 0,a(e("@babel/runtime/helpers/createForOfIteratorHelper"))),o=a(e("@babel/runtime/helpers/classCallCheck")),s=a(e("@babel/runtime/helpers/createClass")),a=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"cleanPageName",value:function(e){var r=new RegExp(/[^a-z0-9\.]+/g),t=new RegExp(/\.+/g),a=new RegExp(/(^_+)|(_+$)/g),r=e&&e.toLowerCase().replace(r,"_").replace(t,".").replace(a,"")||"no.name.page";if(e===r||"string"==typeof e&&0!==e.replace(/ */,"").length)return-1===r.search(/\.page$/)&&(r+=".page"),r;throw new Error("REVERB-ERROR: Countername must be a non-empty string")}},{key:"cleanCustomVariable",value:function(e){var r,t=this;return Array.isArray(e)?(r=[],e.forEach(function(e){e=t.stripCommaFromValues(e);r.push(t.cleanCustomVariable(e))}),r):null==e?e:e.toString().replace(/[\u200B-\u200D\uFEFF]+/g,"").trim().replace(/\[|\]/g,"").replace(/&/g,"$").replace(/\s{1,}/g," ")}},{key:"stripCommaFromValues",value:function(e){return e&&e.replace(/,/g,"")}},{key:"removeSensitiveInfo",value:function(e){if(e&&"string"==typeof e){var r,t=(0,n.default)(this.sensitiveParams);try{for(t.s();!(r=t.n()).done;){var a=r.value,o=new RegExp("".concat(a,"=[^(&|$)]*"),"g");e=e.replace(o,"".concat(a,"=XXXX"))}}catch(e){t.e(e)}finally{t.f()}}return e}}]),e}();(t.LabelCleanser=a).sensitiveParams=["token","guardianToken","nonce","dateOfBirthDay","dateOfBirthMonth","dateOfBirthYear","dateOfBirth","permissionToken"]},{"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/createForOfIteratorHelper":5,"@babel/runtime/helpers/interopRequireDefault":7}],25:[function(e,r,t){"use strict";var a=e("@babel/runtime/helpers/interopRequireDefault").default,o=(Object.defineProperty(t,"__esModule",{value:!0}),t.OrbitVariables=void 0,a(e("@babel/runtime/helpers/classCallCheck"))),n=a(e("@babel/runtime/helpers/createClass")),a=function(){function r(){(0,o.default)(this,r)}return(0,n.default)(r,null,[{key:"wrapMethod",value:function(e,r){return e[r]&&"function"==typeof e[r]?e[r]():Promise.resolve(null)}},{key:"getPageVariables",value:function(){return window&&window.bbcpage?Promise.all(["getName","getDestination","getProducer","getSection","getContentId","getContentType","getLanguage","getAdditionalProperties","getReferrer"].map(function(e){return r.wrapMethod(window.bbcpage,e)})).then(function(e){e=JSON.parse(JSON.stringify(e));return{name:e[0],destination:e[1],producer:e[2],section:e[3],contentId:e[4],contentType:e[5],language:e[6],additionalProperties:e[7],referrer:e[8]}}):Promise.resolve(void 0)}},{key:"getUserVariables",value:function(){return window&&window.bbcuser?Promise.all(["getHashedId","isSignedIn"].map(function(e){return r.wrapMethod(window.bbcuser,e)})).then(function(e){return{hashedId:e[0],isSignedIn:e[1]}}):Promise.resolve(void 0)}}]),r}();t.OrbitVariables=a},{"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":7}],26:[function(e,r,t){r.exports={name:"reverb",version:"4.0.0",pianoAnalyticsVersion:"6.14.2",staticHost:"https://mybbc-analytics.files.bbci.co.uk"}},{}]},{},[20]);